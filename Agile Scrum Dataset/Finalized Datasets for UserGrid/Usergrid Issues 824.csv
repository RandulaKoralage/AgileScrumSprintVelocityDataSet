key,issueType,sprint,status,summary,description,storyPoint,priority,watchcount,fixVersions,affectedVersions,assignee,creator,reporter,commentCount,votes,issueLinks,blockedBy,blocks,dependedOnBy,dependedOn,subtasks
USERGRID-273,Story,1,Closed,5 Cleanup test harness and create a more declarative test framework,Currently our test harnesses are a mess of spaghetti.  We need to decouple this mess and allow us to cleanly define the rules and requirements of our system.  I think we need to break it down into the following behaviors.h1. Test Execution Environmentsh2. Parallel ExecutionThis should be the default behavior.  All tests are assumed to be parallelh2. Serial ExecutionThis should be the exception and only used when parallel execution cannot be accomplished.  Tests in this classification should run in a method at a time with no concurrencyh1. External resourcesh2. Cassandra# Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh2. ElasticSearch # Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh1. LifecycleA test itself can have numerous lifecycle operations.  These should be set up as rules both class and instance and should NOT be done via inheritance of abstract tests.  This is the old Junit3 way of operating and needs removed.,8,3,2,2,0,David Johnson,Todd Nine,Todd Nine,5,0,5,4,4,0,0,0
USERGRID-293,Story,1,Closed,Oversee release of 1.0.1,null,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,3,0,0,0,0,0,0,0
USERGRID-254,Story,1,Closed,1 Add Event system to Collections module use it to clean up old indices,When the Core module EntityManager deletes or updates Entities in the Collections module the Query Index records for the old versions of that Entity need to be deleted.To enable this we added an eventing system to the Collections module so that callers can hook into entity create update and delete events.And we added event handlers to clean up the Query Index records for those events. See the new package in Collections module:   org.apache.usergrid.persistence.collection.eventAnd in Core:   org.apache.usergrid.corepersistence.events,null,3,2,1,0,David Johnson,David Johnson,Todd Nine,9,0,0,0,0,0,0,0
USERGRID-288,Improvement,1,Closed,Update GEO Tests to work with new REST test framework,Fix the Geo tests to bring them up to standard.,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,9,0,0,0,0,0,0,0
USERGRID-267,Story,1,Closed,Rework broken Scheduler Tests in two-dot-o branch,Our move to the using external Cassandra and ElasticSearch instances during testing cause the Scheduler tests in the Core and Services Module to fail when run multiple times unless you clear the Cassandra and ElasticSearch storage files between each run.One instance of this problem is: SchedulerRuntimeIntervalIT in the Core Module,null,3,2,0,0,null,David Johnson,David Johnson,1,0,1,1,1,0,0,0
USERGRID-268,Story,1,Closed,3 Rework broken Migration tests in two-dot-o branch,Our move to the using external Cassandra and ElasticSearch instances during testing cause the Migration tests in the Core Module to fail when run multiple times unless you clear the Cassandra and ElasticSearch storage files between each run.The two tests are in Core:- EntityDataMigrationIT- EntityTypeMappingMigrationIT,null,3,2,0,0,null,David Johnson,David Johnson,1,0,1,1,1,0,0,0
USERGRID-302,Story,1,Closed,Update Group Tests to work with new REST Test Framework,null,null,3,1,1,0,Rod Simpson,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-269,Story,1,Closed,fix broken notifications services test,null,null,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-276,Story,1,Closed,Implement Collection/Entity calls for new REST testing framework,null,null,3,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-295,Story,1,Closed,Create ways to post organizations using new REST test framework,null,null,3,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-296,Story,1,Closed,Create ways to create users in new REST test framework,null,null,3,1,1,0,Shawn Feldman,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-299,Story,1,Closed,Create way to get management token and store it using the rest test framework,null,null,3,1,1,0,Shawn Feldman,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-298,Story,1,Closed,test,null,null,3,1,1,0,null,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-279,Story,60,Closed,Update Browser Compatibility to work with new REST test framework,Update all role tests to use the new test framework,null,3,4,1,0,Rod Simpson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-273,Story,60,Closed,5 Cleanup test harness and create a more declarative test framework,Currently our test harnesses are a mess of spaghetti.  We need to decouple this mess and allow us to cleanly define the rules and requirements of our system.  I think we need to break it down into the following behaviors.h1. Test Execution Environmentsh2. Parallel ExecutionThis should be the default behavior.  All tests are assumed to be parallelh2. Serial ExecutionThis should be the exception and only used when parallel execution cannot be accomplished.  Tests in this classification should run in a method at a time with no concurrencyh1. External resourcesh2. Cassandra# Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh2. ElasticSearch # Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh1. LifecycleA test itself can have numerous lifecycle operations.  These should be set up as rules both class and instance and should NOT be done via inheritance of abstract tests.  This is the old Junit3 way of operating and needs removed.,8,3,2,2,0,David Johnson,Todd Nine,Todd Nine,5,0,5,4,4,0,0,0
USERGRID-320,Story,60,Closed,Add more meaningful query logic tests,The REST tests for logical operations in queries is sorely lacking.  We need more tests for union intersection and negation as well as proper query grammar,null,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,4,0,0,0,0,0,0,0
USERGRID-313,Story,60,Closed,Convert ConnectionResourceTest/OwnershipResourceIT/Permissions to new Rest Framework,null,null,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-293,Story,60,Closed,Oversee release of 1.0.1,null,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,3,0,0,0,0,0,0,0
USERGRID-312,Story,60,Closed,Implement App Delete in Usergrid 2 codebase ,We need a way to delete an application from an organization.Should only work with an org-admin level auth token.When delete is executed we will- Add application to the deleted apps collection.- Delete the application entity from the management app collection.- Sometime later we will delete the application's collectionsLet's do this for 2.0 and 1.0.  It should be possible with EntityManager level APIs only.,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,4,0,0,0,0,0,0,0
USERGRID-310,Story,60,Closed,Update REST tests for Activities and Devices,null,null,3,1,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-291,Improvement,60,Closed,Update Users Tests to work with new REST test framework,https://issues.apache.org/jira/browse/USERGRID-276,null,3,1,1,0,Shawn Feldman,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-254,Story,60,Closed,1 Add Event system to Collections module use it to clean up old indices,When the Core module EntityManager deletes or updates Entities in the Collections module the Query Index records for the old versions of that Entity need to be deleted.To enable this we added an eventing system to the Collections module so that callers can hook into entity create update and delete events.And we added event handlers to clean up the Query Index records for those events. See the new package in Collections module:   org.apache.usergrid.persistence.collection.eventAnd in Core:   org.apache.usergrid.corepersistence.events,null,3,2,1,0,David Johnson,David Johnson,Todd Nine,9,0,0,0,0,0,0,0
USERGRID-311,Story,60,Closed,Update remaining groups tests,null,null,3,1,1,0,Rod Simpson,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-304,Story,60,Closed,Fix Paging test using new REST test framework,Fix the issues centered around paging by fixing the existing rest paging tests. ,null,3,1,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-282,Story,60,Closed,Update Query Tests to work with new REST test framework,Update Query Tests to work with new REST test framework,null,3,1,1,0,ryan bridges,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-288,Improvement,60,Closed,Update GEO Tests to work with new REST test framework,Fix the Geo tests to bring them up to standard.,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,9,0,0,0,0,0,0,0
USERGRID-278,Story,60,Closed,Implement Organization methods in Management Class for REST tests,Implement Organization methods in Management Class for REST tests,null,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,3,0,0,0,0,0,0,0
USERGRID-335,Bug,61,Closed,Test Not Passing: CollectionsResourceIT,null,2,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-323,Story,61,Closed,Implement Windows phone push notifications,We have apple and google push notifications - need to and windows phone support.----portal is done,null,3,2,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-279,Story,61,Closed,Update Browser Compatibility to work with new REST test framework,Update all role tests to use the new test framework,null,3,4,1,0,Rod Simpson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-330,Bug,61,Closed,Fix GeoPagingTest cast issue,Test fails with casting issuejava.lang.ClassCastException: org.apache.usergrid.rest.test.resource2point0.model.Entity cannot be cast to java.util.LinkedHashMapat org.apache.usergrid.rest.applications.queries.GeoPagingTest.groupQueriesWithConsistentResults(GeoPagingTest.java:201)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:65)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:309)at org.junit.runner.JUnitCore.run(JUnitCore.java:160)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:67)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)Might be fixed by one of the other pull requests but we would need to verify.,null,3,3,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-326,Bug,61,Closed,Fix PartialUpdateTest by integrating it with new REST test framework.,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-331,Bug,61,Closed,Fix AdminEmailEncodingIT by integrating it with new REST test framework,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-327,Bug,61,Closed,Fix DuplicateNameIT test by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-273,Story,61,Closed,5 Cleanup test harness and create a more declarative test framework,Currently our test harnesses are a mess of spaghetti.  We need to decouple this mess and allow us to cleanly define the rules and requirements of our system.  I think we need to break it down into the following behaviors.h1. Test Execution Environmentsh2. Parallel ExecutionThis should be the default behavior.  All tests are assumed to be parallelh2. Serial ExecutionThis should be the exception and only used when parallel execution cannot be accomplished.  Tests in this classification should run in a method at a time with no concurrencyh1. External resourcesh2. Cassandra# Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh2. ElasticSearch # Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh1. LifecycleA test itself can have numerous lifecycle operations.  These should be set up as rules both class and instance and should NOT be done via inheritance of abstract tests.  This is the old Junit3 way of operating and needs removed.,8,3,2,2,0,David Johnson,Todd Nine,Todd Nine,5,0,5,4,4,0,0,0
USERGRID-320,Story,61,Closed,Add more meaningful query logic tests,The REST tests for logical operations in queries is sorely lacking.  We need more tests for union intersection and negation as well as proper query grammar,null,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,4,0,0,0,0,0,0,0
USERGRID-328,Bug,61,Closed,Fix ConnectionResourceTest by integrating with new REST test framework.,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-329,Bug,61,Closed,Fix RetrieveUsersTest by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-313,Story,61,Closed,Convert ConnectionResourceTest/OwnershipResourceIT/Permissions to new Rest Framework,null,null,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-293,Story,61,Closed,Oversee release of 1.0.1,null,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,3,0,0,0,0,0,0,0
USERGRID-312,Story,61,Closed,Implement App Delete in Usergrid 2 codebase ,We need a way to delete an application from an organization.Should only work with an org-admin level auth token.When delete is executed we will- Add application to the deleted apps collection.- Delete the application entity from the management app collection.- Sometime later we will delete the application's collectionsLet's do this for 2.0 and 1.0.  It should be possible with EntityManager level APIs only.,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,4,0,0,0,0,0,0,0
USERGRID-337,Bug,61,Closed,Fix GroupResourceIT,null,null,3,1,1,0,Rod Simpson,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-325,Bug,61,Closed,Fix NotificationIT Tests by integrating it with new REST test framework.,Fix NotificationsIT by integrating it with ,null,3,2,1,0,Rod Simpson,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-278,Story,61,Closed,Implement Organization methods in Management Class for REST tests,Implement Organization methods in Management Class for REST tests,null,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,3,0,0,0,0,0,0,0
USERGRID-285,Story,61,Closed,Implement Token methods in Management Class for REST tests,Implement Token methods in Management Class for REST tests,null,3,1,1,0,null,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-335,Bug,64,Closed,Test Not Passing: CollectionsResourceIT,null,2,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-323,Story,64,Closed,Implement Windows phone push notifications,We have apple and google push notifications - need to and windows phone support.----portal is done,null,3,2,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-279,Story,64,Closed,Update Browser Compatibility to work with new REST test framework,Update all role tests to use the new test framework,null,3,4,1,0,Rod Simpson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-330,Bug,64,Closed,Fix GeoPagingTest cast issue,Test fails with casting issuejava.lang.ClassCastException: org.apache.usergrid.rest.test.resource2point0.model.Entity cannot be cast to java.util.LinkedHashMapat org.apache.usergrid.rest.applications.queries.GeoPagingTest.groupQueriesWithConsistentResults(GeoPagingTest.java:201)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:65)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:309)at org.junit.runner.JUnitCore.run(JUnitCore.java:160)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:67)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)Might be fixed by one of the other pull requests but we would need to verify.,null,3,3,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-326,Bug,64,Closed,Fix PartialUpdateTest by integrating it with new REST test framework.,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-331,Bug,64,Closed,Fix AdminEmailEncodingIT by integrating it with new REST test framework,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-327,Bug,64,Closed,Fix DuplicateNameIT test by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-273,Story,64,Closed,5 Cleanup test harness and create a more declarative test framework,Currently our test harnesses are a mess of spaghetti.  We need to decouple this mess and allow us to cleanly define the rules and requirements of our system.  I think we need to break it down into the following behaviors.h1. Test Execution Environmentsh2. Parallel ExecutionThis should be the default behavior.  All tests are assumed to be parallelh2. Serial ExecutionThis should be the exception and only used when parallel execution cannot be accomplished.  Tests in this classification should run in a method at a time with no concurrencyh1. External resourcesh2. Cassandra# Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh2. ElasticSearch # Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh1. LifecycleA test itself can have numerous lifecycle operations.  These should be set up as rules both class and instance and should NOT be done via inheritance of abstract tests.  This is the old Junit3 way of operating and needs removed.,8,3,2,2,0,David Johnson,Todd Nine,Todd Nine,5,0,5,4,4,0,0,0
USERGRID-320,Story,64,Closed,Add more meaningful query logic tests,The REST tests for logical operations in queries is sorely lacking.  We need more tests for union intersection and negation as well as proper query grammar,null,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,4,0,0,0,0,0,0,0
USERGRID-360,Story,64,Closed,Fix ImportIT REST tests,null,2,3,2,1,0,George Reyes,Rod Simpson,Rod Simpson,1,0,1,1,1,0,0,0
USERGRID-328,Bug,64,Closed,Fix ConnectionResourceTest by integrating with new REST test framework.,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-329,Bug,64,Closed,Fix RetrieveUsersTest by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-313,Story,64,Closed,Convert ConnectionResourceTest/OwnershipResourceIT/Permissions to new Rest Framework,null,null,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-293,Story,64,Closed,Oversee release of 1.0.1,null,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,3,0,0,0,0,0,0,0
USERGRID-312,Story,64,Closed,Implement App Delete in Usergrid 2 codebase ,We need a way to delete an application from an organization.Should only work with an org-admin level auth token.When delete is executed we will- Add application to the deleted apps collection.- Delete the application entity from the management app collection.- Sometime later we will delete the application's collectionsLet's do this for 2.0 and 1.0.  It should be possible with EntityManager level APIs only.,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,4,0,0,0,0,0,0,0
USERGRID-337,Bug,64,Closed,Fix GroupResourceIT,null,null,3,1,1,0,Rod Simpson,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-325,Bug,64,Closed,Fix NotificationIT Tests by integrating it with new REST test framework.,Fix NotificationsIT by integrating it with ,null,3,2,1,0,Rod Simpson,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-289,Story,64,Closed,Implement delete app,Need to implement delete app.  This first pass won't actually clean up the data it will just delete the app entity so the data can no longer be accessed.,null,3,1,1,0,null,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-359,Story,64,Open,[SPIKE] Perform profiling of the Entity Manager and Relation Manager,null,null,4,1,0,0,null,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-361,Story,64,Closed,Create REST test for app delete,null,2,3,2,1,0,David Johnson,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-367,Story,70,Open,Refactor entity writes to run concurrently,We need to implement our operations concurrently to increase our throughput.  We need to execute the following operations in parallel.Entity WriteGraph Edge WriteEntity Indexing (still async)We have lazy repair on all reads if the system were to get out of sync.  Since we do not have a transactional store we can utilize this read repair to increase write throughput.  In the event a transaction fails we attempt to roll back. If the roll back fails it will be repaired the next time a stale entry is read.,null,3,1,0,0,null,Todd Nine,Todd Nine,0,0,1,1,1,0,0,0
USERGRID-193,Bug,70,Closed,SaveCollectionMembers in Export does not correctly export all entity data,The saveConnections() and saveDictionaries() methods are called at the end of SaveCollectionMembers() in file ExportServiceImpl.java  but if collection for an entity was null then it would just return and not export the connections and dictionaries for that particular entity thus calling these functions in the start of the method ensures that all connections and dictionaries are always exported.,3,4,3,0,0,David Johnson,Pooja Jain,Pooja Jain,4,0,0,0,0,0,0,0
USERGRID-335,Bug,70,Closed,Test Not Passing: CollectionsResourceIT,null,2,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-371,Technical task,70,Closed,Ensure that all services that use amazon keys are using the same identifier for those amazon keys.,Currently the way notifications looks for access and secret keys is different from the way that export and import services look for keys. This needs to be changed so that we all look for the same name of the keys.,3,3,1,1,0,George Reyes,George Reyes,George Reyes,5,0,0,0,0,0,0,0
USERGRID-323,Story,70,Closed,Implement Windows phone push notifications,We have apple and google push notifications - need to and windows phone support.----portal is done,null,3,2,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-279,Story,70,Closed,Update Browser Compatibility to work with new REST test framework,Update all role tests to use the new test framework,null,3,4,1,0,Rod Simpson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-294,Story,70,Closed,move cleanup to before tests run in stack,move cleanup to before tests run in stack,5,3,2,2,0,Todd Nine,David Johnson,David Johnson,1,0,1,1,1,0,0,0
USERGRID-330,Bug,70,Closed,Fix GeoPagingTest cast issue,Test fails with casting issuejava.lang.ClassCastException: org.apache.usergrid.rest.test.resource2point0.model.Entity cannot be cast to java.util.LinkedHashMapat org.apache.usergrid.rest.applications.queries.GeoPagingTest.groupQueriesWithConsistentResults(GeoPagingTest.java:201)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:65)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:309)at org.junit.runner.JUnitCore.run(JUnitCore.java:160)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:67)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)Might be fixed by one of the other pull requests but we would need to verify.,null,3,3,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-326,Bug,70,Closed,Fix PartialUpdateTest by integrating it with new REST test framework.,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-331,Bug,70,Closed,Fix AdminEmailEncodingIT by integrating it with new REST test framework,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-327,Bug,70,Closed,Fix DuplicateNameIT test by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-273,Story,70,Closed,5 Cleanup test harness and create a more declarative test framework,Currently our test harnesses are a mess of spaghetti.  We need to decouple this mess and allow us to cleanly define the rules and requirements of our system.  I think we need to break it down into the following behaviors.h1. Test Execution Environmentsh2. Parallel ExecutionThis should be the default behavior.  All tests are assumed to be parallelh2. Serial ExecutionThis should be the exception and only used when parallel execution cannot be accomplished.  Tests in this classification should run in a method at a time with no concurrencyh1. External resourcesh2. Cassandra# Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh2. ElasticSearch # Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh1. LifecycleA test itself can have numerous lifecycle operations.  These should be set up as rules both class and instance and should NOT be done via inheritance of abstract tests.  This is the old Junit3 way of operating and needs removed.,8,3,2,2,0,David Johnson,Todd Nine,Todd Nine,5,0,5,4,4,0,0,0
USERGRID-366,Story,70,Closed,Eliminate 2 network calls for non optimistic transaction writes,Currently when a write occurs that is either a new entity or a non optimistic transaction (I.E no version included in the payload) we're performing 2 writes in the collection module.  Instead we should perform a single write to both the transaction log and entity storage to reduce our network I/O.,null,3,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-320,Story,70,Closed,Add more meaningful query logic tests,The REST tests for logical operations in queries is sorely lacking.  We need more tests for union intersection and negation as well as proper query grammar,null,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,4,0,0,0,0,0,0,0
USERGRID-360,Story,70,Closed,Fix ImportIT REST tests,null,2,3,2,1,0,George Reyes,Rod Simpson,Rod Simpson,1,0,1,1,1,0,0,0
USERGRID-328,Bug,70,Closed,Fix ConnectionResourceTest by integrating with new REST test framework.,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-329,Bug,70,Closed,Fix RetrieveUsersTest by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-11,Improvement,70,Closed,Limit the size of entities posted to Usergrid,Currently you can post items of almost any size to UG. We should determine the maximum size that is still optimum (15-16MB?) and enforce this.[~zznate] do you have a recommendation?,null,3,3,2,0,Todd Nine,Rod Simpson,Rod Simpson,2,0,0,0,0,0,0,0
USERGRID-364,Story,70,Closed,Get Import Service working with old queue system in 2.0,Get all existing Import Service tests working in the two-dot-o branch with the existing Scheduler & Queue system.,null,3,1,2,1,David Johnson,David Johnson,David Johnson,0,0,1,1,1,0,0,0
USERGRID-313,Story,70,Closed,Convert ConnectionResourceTest/OwnershipResourceIT/Permissions to new Rest Framework,null,null,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-293,Story,70,Closed,Oversee release of 1.0.1,null,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,3,0,0,0,0,0,0,0
USERGRID-312,Story,70,Closed,Implement App Delete in Usergrid 2 codebase ,We need a way to delete an application from an organization.Should only work with an org-admin level auth token.When delete is executed we will- Add application to the deleted apps collection.- Delete the application entity from the management app collection.- Sometime later we will delete the application's collectionsLet's do this for 2.0 and 1.0.  It should be possible with EntityManager level APIs only.,null,3,3,2,0,David Johnson,Rod Simpson,Rod Simpson,4,0,0,0,0,0,0,0
USERGRID-363,Story,70,Closed,Provide REST test for Import Service,Provide REST test coverage for the parts of our Import Service implemented in the REST module.,null,3,2,2,1,George Reyes,David Johnson,David Johnson,1,0,1,1,1,0,0,0
USERGRID-278,Story,70,Closed,Implement Organization methods in Management Class for REST tests,Implement Organization methods in Management Class for REST tests,null,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,3,0,0,0,0,0,0,0
USERGRID-359,Story,70,Open,[SPIKE] Perform profiling of the Entity Manager and Relation Manager,null,null,4,1,0,0,null,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-8,Improvement,70,Closed,Work out Usergrid 2.0 Roadmap,"This should be an epic but no epic option is available.The following is a loose roadmap of what is in store for ""2.0"" of Usergrid.  We welcome comments / questions.I. Overview- Refactoring and rebuilding the low-level persistence APIsII. Features / Goals- Optimistic Concurrency (No More Locking Nightmares)- Rock Solid Data Consistency- Establish (Cassandra Optimized) Persistence Usage Patterns- Ability to Support All Clients on Single Multi-tenant Mega Cluster- Cassandra Friendly Graph API- Asynchronous Staged Post-processing Pipeline- Optimizing Query Processing Engine- Circuit Breakers - Throttling & Load Management- Leverage Existing Netflix Infrastructure for Scalability (Elasticity)III. Phasesi. Exploration- discussion - small scale tests- code analysis with toolsii. Develop new architectureBelow is a link to an image of our proposed architecture plan. http://cl.ly/image/2j130R300f45iii.Build and Integrate1. Collection ManagerBuild:Collection Manager (Entity) persistenceGraph edgesGraph indexingIntegrate:Collection ServicesGraph Services (Services formerly known as Connections)Create migration for Graph and CollectionDeploy: Performance testingIntegration testing** Map Persistence and Time Series Persistence may not be needed2. Map PersistenceBuild:Map PersistenceIntegrate:Add shiro support for map persistenceCreate migration for security map persistenceDeployPerformance testingIntegration testing3. Time Series PersistenceBuild:Time Series PersistenceIntegrate:Queue servicesQueue query services DeployPerformance testingIntegration testing",null,4,8,0,0,null,Rod Simpson,Rod Simpson,8,0,0,0,0,0,0,0
USERGRID-361,Story,70,Closed,Create REST test for app delete,null,2,3,2,1,0,David Johnson,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-335,Bug,71,Closed,Test Not Passing: CollectionsResourceIT,null,2,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-371,Technical task,71,Closed,Ensure that all services that use amazon keys are using the same identifier for those amazon keys.,Currently the way notifications looks for access and secret keys is different from the way that export and import services look for keys. This needs to be changed so that we all look for the same name of the keys.,3,3,1,1,0,George Reyes,George Reyes,George Reyes,5,0,0,0,0,0,0,0
USERGRID-323,Story,71,Closed,Implement Windows phone push notifications,We have apple and google push notifications - need to and windows phone support.----portal is done,null,3,2,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-377,Story,71,Closed,Implement error handling for import and put tests in place to verify,null,null,3,2,1,0,Todd Nine,Rod Simpson,Rod Simpson,2,0,1,1,1,0,0,0
USERGRID-279,Story,71,Closed,Update Browser Compatibility to work with new REST test framework,Update all role tests to use the new test framework,null,3,4,1,0,Rod Simpson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-374,Story,71,Closed,Get basic import collections with connections work,null,null,3,1,1,0,David Johnson,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-294,Story,71,Closed,move cleanup to before tests run in stack,move cleanup to before tests run in stack,5,3,2,2,0,Todd Nine,David Johnson,David Johnson,1,0,1,1,1,0,0,0
USERGRID-376,Story,71,Closed,Test that you can update entities by importing,null,null,3,1,1,0,David Johnson,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-330,Bug,71,Closed,Fix GeoPagingTest cast issue,Test fails with casting issuejava.lang.ClassCastException: org.apache.usergrid.rest.test.resource2point0.model.Entity cannot be cast to java.util.LinkedHashMapat org.apache.usergrid.rest.applications.queries.GeoPagingTest.groupQueriesWithConsistentResults(GeoPagingTest.java:201)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:65)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:309)at org.junit.runner.JUnitCore.run(JUnitCore.java:160)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:67)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)Might be fixed by one of the other pull requests but we would need to verify.,null,3,3,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-326,Bug,71,Closed,Fix PartialUpdateTest by integrating it with new REST test framework.,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-331,Bug,71,Closed,Fix AdminEmailEncodingIT by integrating it with new REST test framework,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-327,Bug,71,Closed,Fix DuplicateNameIT test by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-273,Story,71,Closed,5 Cleanup test harness and create a more declarative test framework,Currently our test harnesses are a mess of spaghetti.  We need to decouple this mess and allow us to cleanly define the rules and requirements of our system.  I think we need to break it down into the following behaviors.h1. Test Execution Environmentsh2. Parallel ExecutionThis should be the default behavior.  All tests are assumed to be parallelh2. Serial ExecutionThis should be the exception and only used when parallel execution cannot be accomplished.  Tests in this classification should run in a method at a time with no concurrencyh1. External resourcesh2. Cassandra# Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh2. ElasticSearch # Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh1. LifecycleA test itself can have numerous lifecycle operations.  These should be set up as rules both class and instance and should NOT be done via inheritance of abstract tests.  This is the old Junit3 way of operating and needs removed.,8,3,2,2,0,David Johnson,Todd Nine,Todd Nine,5,0,5,4,4,0,0,0
USERGRID-333,Bug,71,Closed,Fix ApplicationResourceIT,null,3,3,2,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-320,Story,71,Closed,Add more meaningful query logic tests,The REST tests for logical operations in queries is sorely lacking.  We need more tests for union intersection and negation as well as proper query grammar,null,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,4,0,0,0,0,0,0,0
USERGRID-360,Story,71,Closed,Fix ImportIT REST tests,null,2,3,2,1,0,George Reyes,Rod Simpson,Rod Simpson,1,0,1,1,1,0,0,0
USERGRID-328,Bug,71,Closed,Fix ConnectionResourceTest by integrating with new REST test framework.,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-329,Bug,71,Closed,Fix RetrieveUsersTest by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-11,Improvement,71,Closed,Limit the size of entities posted to Usergrid,Currently you can post items of almost any size to UG. We should determine the maximum size that is still optimum (15-16MB?) and enforce this.[~zznate] do you have a recommendation?,null,3,3,2,0,Todd Nine,Rod Simpson,Rod Simpson,2,0,0,0,0,0,0,0
USERGRID-364,Story,71,Closed,Get Import Service working with old queue system in 2.0,Get all existing Import Service tests working in the two-dot-o branch with the existing Scheduler & Queue system.,null,3,1,2,1,David Johnson,David Johnson,David Johnson,0,0,1,1,1,0,0,0
USERGRID-313,Story,71,Closed,Convert ConnectionResourceTest/OwnershipResourceIT/Permissions to new Rest Framework,null,null,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-256,Improvement,71,Closed,Use ApiResponse to parse out JsonNode responses,Currently in the rest tier tests we are forced to parse the JsonNode response to see what has been returned. Instead what we want to do is use our ApiResponse and use the methods in there to retrieve and check the responses. This will make the tests easier to understand. ,null,3,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,2
USERGRID-259,Technical task,71,Closed,Generify the ApiResponse so we can return any type of class,The ApiResponse should be converted to be a generic class so that we can type case it into the specific type we need. For example : the ApiResponse can return a User type if we have ApiResponse<T> we should be able to get back a ApiResponse<User>.,null,3,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-260,Technical task,71,Closed,composition vs inheritance for the apiresponse json node deserialization,Check to see if we can get away with using Composition in the ApiResponse rather than using inheritance which will create a lot of different UserResponse kind of subclasses. Rather with composition we could have a User object or Organization object that gets populated.,null,3,1,1,0,George Reyes,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-361,Story,71,Closed,Create REST test for app delete,null,2,3,2,1,0,David Johnson,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-384,Story,78,Open,Get import to work on a distributed system,1. write code and tests2. test on a distributed system,3,4,1,0,0,null,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-375,Story,78,Open,Implement test for resume import,null,3,4,1,0,0,null,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-335,Bug,78,Closed,Test Not Passing: CollectionsResourceIT,null,2,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-371,Technical task,78,Closed,Ensure that all services that use amazon keys are using the same identifier for those amazon keys.,Currently the way notifications looks for access and secret keys is different from the way that export and import services look for keys. This needs to be changed so that we all look for the same name of the keys.,3,3,1,1,0,George Reyes,George Reyes,George Reyes,5,0,0,0,0,0,0,0
USERGRID-383,Story,78,Closed,Create Service integration tests for Import,Create Service integration tests- error checking  - send bad data  - check http status codes  - check exception codes   ,5,3,1,1,0,George Reyes,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-323,Story,78,Closed,Implement Windows phone push notifications,We have apple and google push notifications - need to and windows phone support.----portal is done,null,3,2,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-377,Story,78,Closed,Implement error handling for import and put tests in place to verify,null,null,3,2,1,0,Todd Nine,Rod Simpson,Rod Simpson,2,0,1,1,1,0,0,0
USERGRID-279,Story,78,Closed,Update Browser Compatibility to work with new REST test framework,Update all role tests to use the new test framework,null,3,4,1,0,Rod Simpson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-374,Story,78,Closed,Get basic import collections with connections work,null,null,3,1,1,0,David Johnson,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-385,Story,78,Closed,Change import/export format to support multiple collections,null,5,3,1,2,0,Todd Nine,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-386,Story,78,Closed,Change the path for getting status for Import job,null,2,3,1,2,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-388,Story,78,Closed,Fix Import Resource endpoint to use services to lookup import information,It's not possible to perform standard collection/connection walking from org/app/import endpoints.  Fix this using overridden services.,3,3,1,2,0,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-382,Story,78,Closed,Clean up migration code (move from Core to CP),Refactor the data migrations to move from Core to Core Persistence for Entity Storage ,3,3,1,1,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-381,Story,78,Closed,3 Change serialization format that is used to store entities in Cassandra,null,3,3,1,1,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,1,0,0,0,0,0
USERGRID-376,Story,78,Closed,Test that you can update entities by importing,null,null,3,1,1,0,David Johnson,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-330,Bug,78,Closed,Fix GeoPagingTest cast issue,Test fails with casting issuejava.lang.ClassCastException: org.apache.usergrid.rest.test.resource2point0.model.Entity cannot be cast to java.util.LinkedHashMapat org.apache.usergrid.rest.applications.queries.GeoPagingTest.groupQueriesWithConsistentResults(GeoPagingTest.java:201)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:65)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:309)at org.junit.runner.JUnitCore.run(JUnitCore.java:160)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:67)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)Might be fixed by one of the other pull requests but we would need to verify.,null,3,3,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-326,Bug,78,Closed,Fix PartialUpdateTest by integrating it with new REST test framework.,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-331,Bug,78,Closed,Fix AdminEmailEncodingIT by integrating it with new REST test framework,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-327,Bug,78,Closed,Fix DuplicateNameIT test by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-333,Bug,78,Closed,Fix ApplicationResourceIT,null,3,3,2,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-320,Story,78,Closed,Add more meaningful query logic tests,The REST tests for logical operations in queries is sorely lacking.  We need more tests for union intersection and negation as well as proper query grammar,null,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,4,0,0,0,0,0,0,0
USERGRID-360,Story,78,Closed,Fix ImportIT REST tests,null,2,3,2,1,0,George Reyes,Rod Simpson,Rod Simpson,1,0,1,1,1,0,0,0
USERGRID-328,Bug,78,Closed,Fix ConnectionResourceTest by integrating with new REST test framework.,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-329,Bug,78,Closed,Fix RetrieveUsersTest by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-387,Story,78,Closed,Migrate Import service tests to rest tests to better emulate end to end testing,Migrate relevant ImportCollectionIT and ImportServiceIT tests to the rest tier such that we have better end to end coverage of the system. Having all of our integration tests in the service tier means that there is still room for error when we go back up into the REST tier.,3,4,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-361,Story,78,Closed,Create REST test for app delete,null,2,3,2,1,0,David Johnson,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-384,Story,79,Open,Get import to work on a distributed system,1. write code and tests2. test on a distributed system,3,4,1,0,0,null,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-375,Story,79,Open,Implement test for resume import,null,3,4,1,0,0,null,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-335,Bug,79,Closed,Test Not Passing: CollectionsResourceIT,null,2,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-371,Technical task,79,Closed,Ensure that all services that use amazon keys are using the same identifier for those amazon keys.,Currently the way notifications looks for access and secret keys is different from the way that export and import services look for keys. This needs to be changed so that we all look for the same name of the keys.,3,3,1,1,0,George Reyes,George Reyes,George Reyes,5,0,0,0,0,0,0,0
USERGRID-479,Story,79,Closed,CLONE - Could not retrieve unique value for field name unable to verify,"2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- java.lang.RuntimeException Server Error (500)java.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:63)        ... 13 more2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Server Error (500):{""error"":""runtime""""timestamp"":1424064803590""duration"":0""error_description"":""Could not retrieve unique value for field name unable to verify""""exception"":""java.lang.RuntimeException""}2015-02-16 05:33:23600 [http-bio-8080-exec-488] ERROR org.apache.usergrid.rest.exceptions.ThrowableMapper- An uncaught exception occurred during HTTP invocationjava.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)",3,3,1,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,0,0,1,0,0,0,0,0
USERGRID-383,Story,79,Closed,Create Service integration tests for Import,Create Service integration tests- error checking  - send bad data  - check http status codes  - check exception codes   ,5,3,1,1,0,George Reyes,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-391,Story,79,Closed,Change log message level from log to debug,---------------------------------Change these from info to debug:---------------------------------2015-02-16 04:52:10056 [http-bio-8080-exec-289] INFO  org.apache.usergrid.rest.filters.MeteringFilter- Application: 1752a4f8-9d3f-11e4-8eb3-024d19876b16 sp,null,3,3,1,0,David Johnson,Rod Simpson,Rod Simpson,2,0,0,0,0,0,0,0
USERGRID-392,Story,79,Closed,Could not retrieve unique value for field name unable to verify,"2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- java.lang.RuntimeException Server Error (500)java.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:63)        ... 13 more2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Server Error (500):{""error"":""runtime""""timestamp"":1424064803590""duration"":0""error_description"":""Could not retrieve unique value for field name unable to verify""""exception"":""java.lang.RuntimeException""}2015-02-16 05:33:23600 [http-bio-8080-exec-488] ERROR org.apache.usergrid.rest.exceptions.ThrowableMapper- An uncaught exception occurred during HTTP invocationjava.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)",null,3,3,1,0,Todd Nine,Rod Simpson,Rod Simpson,2,0,1,0,0,0,0,0
USERGRID-323,Story,79,Closed,Implement Windows phone push notifications,We have apple and google push notifications - need to and windows phone support.----portal is done,null,3,2,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-377,Story,79,Closed,Implement error handling for import and put tests in place to verify,null,null,3,2,1,0,Todd Nine,Rod Simpson,Rod Simpson,2,0,1,1,1,0,0,0
USERGRID-279,Story,79,Closed,Update Browser Compatibility to work with new REST test framework,Update all role tests to use the new test framework,null,3,4,1,0,Rod Simpson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-374,Story,79,Closed,Get basic import collections with connections work,null,null,3,1,1,0,David Johnson,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-385,Story,79,Closed,Change import/export format to support multiple collections,null,5,3,1,2,0,Todd Nine,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-386,Story,79,Closed,Change the path for getting status for Import job,null,2,3,1,2,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-388,Story,79,Closed,Fix Import Resource endpoint to use services to lookup import information,It's not possible to perform standard collection/connection walking from org/app/import endpoints.  Fix this using overridden services.,3,3,1,2,0,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-294,Story,79,Closed,move cleanup to before tests run in stack,move cleanup to before tests run in stack,5,3,2,2,0,Todd Nine,David Johnson,David Johnson,1,0,1,1,1,0,0,0
USERGRID-382,Story,79,Closed,Clean up migration code (move from Core to CP),Refactor the data migrations to move from Core to Core Persistence for Entity Storage ,3,3,1,1,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-381,Story,79,Closed,3 Change serialization format that is used to store entities in Cassandra,null,3,3,1,1,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,1,0,0,0,0,0
USERGRID-376,Story,79,Closed,Test that you can update entities by importing,null,null,3,1,1,0,David Johnson,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-393,Story,79,Closed,Create Batch Spike for Elastic Search (Todd),null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-330,Bug,79,Closed,Fix GeoPagingTest cast issue,Test fails with casting issuejava.lang.ClassCastException: org.apache.usergrid.rest.test.resource2point0.model.Entity cannot be cast to java.util.LinkedHashMapat org.apache.usergrid.rest.applications.queries.GeoPagingTest.groupQueriesWithConsistentResults(GeoPagingTest.java:201)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:65)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:309)at org.junit.runner.JUnitCore.run(JUnitCore.java:160)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:67)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)Might be fixed by one of the other pull requests but we would need to verify.,null,3,3,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-326,Bug,79,Closed,Fix PartialUpdateTest by integrating it with new REST test framework.,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-331,Bug,79,Closed,Fix AdminEmailEncodingIT by integrating it with new REST test framework,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-327,Bug,79,Closed,Fix DuplicateNameIT test by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-366,Story,79,Closed,Eliminate 2 network calls for non optimistic transaction writes,Currently when a write occurs that is either a new entity or a non optimistic transaction (I.E no version included in the payload) we're performing 2 writes in the collection module.  Instead we should perform a single write to both the transaction log and entity storage to reduce our network I/O.,null,3,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-333,Bug,79,Closed,Fix ApplicationResourceIT,null,3,3,2,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-320,Story,79,Closed,Add more meaningful query logic tests,The REST tests for logical operations in queries is sorely lacking.  We need more tests for union intersection and negation as well as proper query grammar,null,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,4,0,0,0,0,0,0,0
USERGRID-387,Story,79,Closed,Migrate Import service tests to rest tests to better emulate end to end testing,Migrate relevant ImportCollectionIT and ImportServiceIT tests to the rest tier such that we have better end to end coverage of the system. Having all of our integration tests in the service tier means that there is still room for error when we go back up into the REST tier.,3,4,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-361,Story,79,Closed,Create REST test for app delete,null,2,3,2,1,0,David Johnson,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-479,Story,82,Closed,CLONE - Could not retrieve unique value for field name unable to verify,"2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- java.lang.RuntimeException Server Error (500)java.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:63)        ... 13 more2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Server Error (500):{""error"":""runtime""""timestamp"":1424064803590""duration"":0""error_description"":""Could not retrieve unique value for field name unable to verify""""exception"":""java.lang.RuntimeException""}2015-02-16 05:33:23600 [http-bio-8080-exec-488] ERROR org.apache.usergrid.rest.exceptions.ThrowableMapper- An uncaught exception occurred during HTTP invocationjava.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)",3,3,1,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,0,0,1,0,0,0,0,0
USERGRID-383,Story,82,Closed,Create Service integration tests for Import,Create Service integration tests- error checking  - send bad data  - check http status codes  - check exception codes   ,5,3,1,1,0,George Reyes,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-391,Story,82,Closed,Change log message level from log to debug,---------------------------------Change these from info to debug:---------------------------------2015-02-16 04:52:10056 [http-bio-8080-exec-289] INFO  org.apache.usergrid.rest.filters.MeteringFilter- Application: 1752a4f8-9d3f-11e4-8eb3-024d19876b16 sp,null,3,3,1,0,David Johnson,Rod Simpson,Rod Simpson,2,0,0,0,0,0,0,0
USERGRID-392,Story,82,Closed,Could not retrieve unique value for field name unable to verify,"2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- java.lang.RuntimeException Server Error (500)java.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:63)        ... 13 more2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Server Error (500):{""error"":""runtime""""timestamp"":1424064803590""duration"":0""error_description"":""Could not retrieve unique value for field name unable to verify""""exception"":""java.lang.RuntimeException""}2015-02-16 05:33:23600 [http-bio-8080-exec-488] ERROR org.apache.usergrid.rest.exceptions.ThrowableMapper- An uncaught exception occurred during HTTP invocationjava.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)",null,3,3,1,0,Todd Nine,Rod Simpson,Rod Simpson,2,0,1,0,0,0,0,0
USERGRID-323,Story,82,Closed,Implement Windows phone push notifications,We have apple and google push notifications - need to and windows phone support.----portal is done,null,3,2,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-377,Story,82,Closed,Implement error handling for import and put tests in place to verify,null,null,3,2,1,0,Todd Nine,Rod Simpson,Rod Simpson,2,0,1,1,1,0,0,0
USERGRID-279,Story,82,Closed,Update Browser Compatibility to work with new REST test framework,Update all role tests to use the new test framework,null,3,4,1,0,Rod Simpson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-412,Story,82,Closed,Random Tasks add tasks to comments with time,null,5,3,2,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-374,Story,82,Closed,Get basic import collections with connections work,null,null,3,1,1,0,David Johnson,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-385,Story,82,Closed,Change import/export format to support multiple collections,null,5,3,1,2,0,Todd Nine,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-386,Story,82,Closed,Change the path for getting status for Import job,null,2,3,1,2,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-388,Story,82,Closed,Fix Import Resource endpoint to use services to lookup import information,It's not possible to perform standard collection/connection walking from org/app/import endpoints.  Fix this using overridden services.,3,3,1,2,0,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-294,Story,82,Closed,move cleanup to before tests run in stack,move cleanup to before tests run in stack,5,3,2,2,0,Todd Nine,David Johnson,David Johnson,1,0,1,1,1,0,0,0
USERGRID-382,Story,82,Closed,Clean up migration code (move from Core to CP),Refactor the data migrations to move from Core to Core Persistence for Entity Storage ,3,3,1,1,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,0,0,0,0,0,0
USERGRID-381,Story,82,Closed,3 Change serialization format that is used to store entities in Cassandra,null,3,3,1,1,0,Todd Nine,Rod Simpson,Rod Simpson,0,0,1,0,0,0,0,0
USERGRID-376,Story,82,Closed,Test that you can update entities by importing,null,null,3,1,1,0,David Johnson,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-393,Story,82,Closed,Create Batch Spike for Elastic Search (Todd),null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-330,Bug,82,Closed,Fix GeoPagingTest cast issue,Test fails with casting issuejava.lang.ClassCastException: org.apache.usergrid.rest.test.resource2point0.model.Entity cannot be cast to java.util.LinkedHashMapat org.apache.usergrid.rest.applications.queries.GeoPagingTest.groupQueriesWithConsistentResults(GeoPagingTest.java:201)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:65)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:309)at org.junit.runner.JUnitCore.run(JUnitCore.java:160)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:67)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)Might be fixed by one of the other pull requests but we would need to verify.,null,3,3,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-326,Bug,82,Closed,Fix PartialUpdateTest by integrating it with new REST test framework.,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-331,Bug,82,Closed,Fix AdminEmailEncodingIT by integrating it with new REST test framework,null,null,3,3,1,0,ryan bridges,George Reyes,George Reyes,4,0,0,0,0,0,0,0
USERGRID-327,Bug,82,Closed,Fix DuplicateNameIT test by integrating it with new REST test framework,null,null,3,2,1,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-273,Story,82,Closed,5 Cleanup test harness and create a more declarative test framework,Currently our test harnesses are a mess of spaghetti.  We need to decouple this mess and allow us to cleanly define the rules and requirements of our system.  I think we need to break it down into the following behaviors.h1. Test Execution Environmentsh2. Parallel ExecutionThis should be the default behavior.  All tests are assumed to be parallelh2. Serial ExecutionThis should be the exception and only used when parallel execution cannot be accomplished.  Tests in this classification should run in a method at a time with no concurrencyh1. External resourcesh2. Cassandra# Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh2. ElasticSearch # Configure the runtime# Pre invocation hook## Create default implementation of truncating column families.  This should be manually added and not execute by default.# Post invocation hookh1. LifecycleA test itself can have numerous lifecycle operations.  These should be set up as rules both class and instance and should NOT be done via inheritance of abstract tests.  This is the old Junit3 way of operating and needs removed.,8,3,2,2,0,David Johnson,Todd Nine,Todd Nine,5,0,5,4,4,0,0,0
USERGRID-366,Story,82,Closed,Eliminate 2 network calls for non optimistic transaction writes,Currently when a write occurs that is either a new entity or a non optimistic transaction (I.E no version included in the payload) we're performing 2 writes in the collection module.  Instead we should perform a single write to both the transaction log and entity storage to reduce our network I/O.,null,3,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-333,Bug,82,Closed,Fix ApplicationResourceIT,null,3,3,2,1,0,David Johnson,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-409,Story,82,Closed,Enable system properties for customizable keyspaces,Keyspaces should be customizable for the usergrid system.  We need to implement the ability to set the keyspace based on system properties as well as the current defaults.  We should implement this in the following way.# Add these properties to the Cassandra Fig (or create a new fig configuration)# Add the fig to the injector# Reference the injector and the fig in the current EntityManager and CassandraService setup classes,3,3,2,1,0,George Reyes,Todd Nine,Todd Nine,4,0,1,0,0,0,0,0
USERGRID-418,Story,82,Closed,"Fix system/database/setup to swallow ""test-app"" already exists error.",Fix the endpoint to return ok even if the test-app already exists. This isn't really an error and should be swallowed so we don't confuse users. ,5,3,1,1,0,George Reyes,George Reyes,George Reyes,0,0,0,0,0,0,0,1
USERGRID-422,Technical task,82,Closed,Create test that proves the issue before making any rest tier changes,Make a rest test that shows when calling system/database/setup twice returns an exception.,1,3,1,1,0,George Reyes,George Reyes,George Reyes,3,0,1,1,1,0,0,0
USERGRID-280,Story,82,Closed,Implement Admin User methods in Management Class for REST tests,Implement Admin User methods in Management Class for REST tests. Ensure that AdminUsersIT test works.,3,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,4,0,1,1,1,0,0,0
USERGRID-448,Bug,83,Closed,Remove redundant appinfos collections in ManagementServiceImpl,"There is a flaw in the two-dot-o CpEntityManagerFactory.The factory stores a collection of ""appinfo"" type entities but the ManagementServiceImpl stores a redundant collection of ""application_info"" entities. The problem becomes evident when you try to delete an application. The application will only be deleted from the ""appinfos"" collection. When you call the management org/apps end-point you will still see the application because the end-point uses the ""application_infos"". To fix this:- Ensure that only one collection is stored- Add code to migrate the existing app information collections",3,3,2,1,0,David Johnson,David Johnson,David Johnson,8,0,0,0,0,0,0,0
USERGRID-348,Story,83,Closed,Update ExportResourceIT to new REST test framework,null,3,4,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-335,Bug,83,Closed,Test Not Passing: CollectionsResourceIT,null,2,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-371,Technical task,83,Closed,Ensure that all services that use amazon keys are using the same identifier for those amazon keys.,Currently the way notifications looks for access and secret keys is different from the way that export and import services look for keys. This needs to be changed so that we all look for the same name of the keys.,3,3,1,1,0,George Reyes,George Reyes,George Reyes,5,0,0,0,0,0,0,0
USERGRID-466,Bug,83,Closed,Rejected ES Index jobs are dropped.  ,When the index queue is full and ES rejects index requests Usergrid drops them.  The result could be that entities cannot be returned.We should handle this soon.  At a minimum we should put them in an SQS queue or something similar for future handling.,5,1,2,1,0,Todd Nine,Jeffrey West,Jeffrey West,2,0,1,0,0,0,0,0
USERGRID-396,Story,83,Closed,Create UniqueIndexCleanup tool that works with 2.0,Current instance of tools don't work correctly with 2.0. This should have a RESTful endpoint that is trigged with a PUT.  We should have something like this endpoint.Check all unique values across the entire system => PUT /system/database/unqiuecheckCheck all unique values across a single applications => PUT /system/database/uniquecheck/[appid]Check all unique values in a single collection => PUT /system/database/uniquecheck/[appid]/[collectionname]Check a specific unique value for a collection.PUT=> system/database/uniquecheck/[appid]/[collectionname]/[unique value]The unique check will need to audit the unique index and ensure that the unique value exists for the entity specified. If the entity does not exist they should be removed.I think we should implement specific property cleanup first then implement the other operations as an input of Observables,3,3,2,1,0,George Reyes,George Reyes,George Reyes,3,0,1,1,1,0,0,0
USERGRID-472,Story,83,Closed,fix array type index issue when types alternate,null,null,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-405,Story,83,Closed,Fix hotspot from continuous writes of entities (Shawn),Currently performing a continuous PUT in 2.0 under heavy load causes a hotspot in our cassandra data.  Cause:# Under load entities can be PUT continuously# Asynchronous cleanups run and delete previous versions# These versions are retained in cassandra for long periods of time.  This causes severe row bloating before compaction occurs.Solution:For entity data we only care about the current max version.  We should change this column family to store only the maximum data format.  We will need to keep the log of previous versions so that we can bring ES into a consistent state,1,3,2,1,0,Todd Nine,Todd Nine,Todd Nine,5,0,4,0,0,0,0,0
USERGRID-456,Bug,83,Closed,Change ElasticSearch mapping behavior to be per index,Currently it is not possible to share multiple usergrid instances on the same cluster.  This is due to our default mapping usage in elasticsearch.  We need to change the following.# Stop putting default wildcard mappings based on the index prefix while this should work it appears it is not# Change our settings so that when an index is created the default mapping is applied per-indexAlso during an index rebuild if the write_alias exists we will also want to explicitly update the mapping during this process.   This will allow us to do an online rebuild without having to allocate a new write index and then merge.,3,1,1,1,0,Todd Nine,Todd Nine,Todd Nine,0,0,1,1,1,0,0,0
USERGRID-416,Story,83,Closed,SPIKE: Profile Usergrid Search,null,3,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,1,0,0,0,0,0
USERGRID-443,Story,83,Closed,Implement Windows Raw Push Notifications for 1.0,Support for Raw Push Notifications for Windows platform needs to be added to the 1.0 code base.  A separate task can be created/assigned for 2.0.,3,2,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-361,Story,83,Closed,Create REST test for app delete,null,2,3,2,1,0,David Johnson,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-432,Story,83,Closed,Remove redundant createIndex calls,null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,1,0,0,0,0,0
USERGRID-454,Story,83,Closed,Add metrics to cassandra and ES calls,We want to add a way for UG to get metrics about calls being made to Cassandra and ES so we can measure where we have performance bottlenecks.In order to accomplish this we need to wrap our Cassandra execution calls with graphite timers. We could also set timers to check when Cassandra calls are being started or loaded up.For ES we already have timers around index updates and index deletes. We just want to check the other ES calls ( index creations delete by queries and the rest ),5,3,1,1,0,George Reyes,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-465,Story,83,Closed,Fix remaining graphite timers in CpEntityManager,Refactor of UG-454 where we move the timers into the constructor instead of being initialized in methods. ,1,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-415,Bug,83,Closed,Consider Not Logging this Exception,This exception probably shouldn't be logged at ERROR.  Please consider logging it at DEBUG or not at all.2015-02-25 02:35:55795 [http-bio-8080-exec-2] ERROR org.apache.usergrid.services.AbstractCollectionService- Entity 7 unable to be created in collection saparticlesorg.apache.usergrid.persistence.exceptions.DuplicateUniquePropertyExistsException: Entity saparticle requires that property named name be unique value of 000000000000226126-2538 existsat org.apache.usergrid.corepersistence.CpEntityManager.handleWriteUniqueVerifyException(CpEntityManager.java:2556)at org.apache.usergrid.corepersistence.CpEntityManager.batchCreate(CpEntityManager.java:2483)at org.apache.usergrid.corepersistence.CpEntityManager.create(CpEntityManager.java:334)at org.apache.usergrid.corepersistence.CpEntityManager.create(CpEntityManager.java:280)at org.apache.usergrid.corepersistence.CpEntityManager.create(CpEntityManager.java:266)at org.apache.usergrid.corepersistence.CpRelationManager.createItemInCollection(CpRelationManager.java:746)at org.apache.usergrid.corepersistence.CpEntityManager.createItemInCollection(CpEntityManager.java:1325)at org.apache.usergrid.services.AbstractCollectionService.postCollection(AbstractCollectionService.java:369)at org.apache.usergrid.services.AbstractService.invokeCollection(AbstractService.java:720)at org.apache.usergrid.services.AbstractService.invoke(AbstractService.java:634)at org.apache.usergrid.services.AbstractService.invoke(AbstractService.java:544)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:226)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:193)at org.apache.usergrid.rest.applications.ServiceResource.executeServiceRequest(ServiceResource.java:251)at org.apache.usergrid.rest.applications.ServiceResource.executePost(ServiceResource.java:401)at sun.reflect.GeneratedMethodAccessor135.invoke(Unknown Source)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:601)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:722)2015-02-25 02:35:55799 [http-bio-8080-exec-2] ERROR org.apache.usergrid.services.AbstractCollectionService- Entity 8 unable to be created in collection saparticlesorg.apache.usergrid.persistence.exceptions.DuplicateUniquePropertyExistsException: Entity saparticle requires that property named name be unique value of 000000000000230926-3219 existsat org.apache.usergrid.corepersistence.CpEntityManager.handleWriteUniqueVerifyException(CpEntityManager.java:2556)at org.apache.usergrid.corepersistence.CpEntityManager.batchCreate(CpEntityManager.java:2483)at org.apache.usergrid.corepersistence.CpEntityManager.create(CpEntityManager.java:334)at org.apache.usergrid.corepersistence.CpEntityManager.create(CpEntityManager.java:280)at org.apache.usergrid.corepersistence.CpEntityManager.create(CpEntityManager.java:266)at org.apache.usergrid.corepersistence.CpRelationManager.createItemInCollection(CpRelationManager.java:746)at org.apache.usergrid.corepersistence.CpEntityManager.createItemInCollection(CpEntityManager.java:1325)at org.apache.usergrid.services.AbstractCollectionService.postCollection(AbstractCollectionService.java:369)at org.apache.usergrid.services.AbstractService.invokeCollection(AbstractService.java:720)at org.apache.usergrid.services.AbstractService.invoke(AbstractService.java:634)at org.apache.usergrid.services.AbstractService.invoke(AbstractService.java:544)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:226)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:193)at org.apache.usergrid.rest.applications.ServiceResource.executeServiceRequest(ServiceResource.java:251)at org.apache.usergrid.rest.applications.ServiceResource.executePost(ServiceResource.java:401)at sun.reflect.GeneratedMethodAccessor135.invoke(Unknown Source)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:601)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:722),1,3,3,1,0,George Reyes,Jeffrey West,Jeffrey West,4,0,0,0,0,0,0,0
USERGRID-461,Bug,83,Closed,Cursor grows as our number of indexes grow,It appears our cursor grows as our index grows. This is causing issues with the request growing too large. To alleviate this issue I think we should perform the following.ON READ# Receive the cursor from ES# Create a new timeUUID# Put the cursor into a map with an expiration equal to the ES expiration time using the new timeUUID string as a key# Return the time UUID as a string to the userON next page# Lookup the the ES cursor from Cassandra# Get the next page of results,5,3,2,1,0,Todd Nine,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-473,Story,83,Closed,Add Dead Letter Queue,null,3,3,2,1,0,Jeffrey West,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-460,Bug,97,Closed,Geospatial/Geolocation query results are not sorted by distance,Geospatial ('within') query results are not sorted by distance.  We should sort by distance ascending by default.  This is now MongoDB handles the $near queries.Please add a test to confirm sorting is done correctly.,3,4,3,0,0,George Reyes,Jeffrey West,Jeffrey West,5,0,1,0,0,0,0,0
USERGRID-485,Story,97,Resolved,2.1 - Rest Tests Must Pass,Our tests take a long time and don't passwe should at least make them pass,null,1,2,1,0,David Johnson,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-482,Story,97,Closed,Change dynamic mapping to static ,Change dynamic mapping to static - we discussed that during the call having a lot of mappings changes may be demanding to Elasticsearch. The change from fully dynamic and changing very often to mostly static mapping would result in way less pressure on Elasticsearch data nodes in general,null,3,2,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-70,Story,97,Closed,Geo-location queries with more than two parameters return only the first page of data,"""User is doing a geolocation query using three parameters. When he does this the first page of data (10 records) is returned but subsequent pages are empty. For example this query returns 19 rows: """"location within 40075160 of 37.33517518 -122.03255055 and bucketId='LosAngels'"""" whereas this query which should only omit one record returns 10 records: """"location within 40075160 of 37.33517518 -122.03255055 and NOT email='test1@ss.com' and bucketId='LosAngels'"""" The order doesn't seem to matter. I tried it with both bucketId before and after email. Also the field doesn't seem to matter because the following query also returns only 10 rows when it should return 18: """"location within 40075160 of 37.33517518 -122.03255055 and NOT name='Fyndher Vtwo' and bucketId='LosAngels'"""" .""",null,4,2,1,0,George Reyes,Rod Simpson,Rod Simpson,1,0,0,0,0,0,0,0
USERGRID-448,Bug,97,Closed,Remove redundant appinfos collections in ManagementServiceImpl,"There is a flaw in the two-dot-o CpEntityManagerFactory.The factory stores a collection of ""appinfo"" type entities but the ManagementServiceImpl stores a redundant collection of ""application_info"" entities. The problem becomes evident when you try to delete an application. The application will only be deleted from the ""appinfos"" collection. When you call the management org/apps end-point you will still see the application because the end-point uses the ""application_infos"". To fix this:- Ensure that only one collection is stored- Add code to migrate the existing app information collections",3,3,2,1,0,David Johnson,David Johnson,David Johnson,8,0,0,0,0,0,0,0
USERGRID-480,Story,97,Closed,Enable doc values in our index writes,Aggregation with large data sets are causing memory pressure.  We need to enable doc values for faster aggregation especially when using SSD ES Nodshttp://www.elastic.co/guide/en/elasticsearch/guide/current/doc-values.html,null,2,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-483,Story,97,Closed,Change index structure to single index for many apps,Change the index architecture - Right now you are using an index per client which is good for small number of clients but doesn't scale well especially considering that Elasticsearch doesn't handle large number of shards well. I need to analyze a few things that I have left and I will come up with a proposition of index architecture.,null,3,1,0,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-371,Technical task,97,Closed,Ensure that all services that use amazon keys are using the same identifier for those amazon keys.,Currently the way notifications looks for access and secret keys is different from the way that export and import services look for keys. This needs to be changed so that we all look for the same name of the keys.,3,3,1,1,0,George Reyes,George Reyes,George Reyes,5,0,0,0,0,0,0,0
USERGRID-484,Story,97,Closed,Introduce doc_values,Introducing doc_values for numeric and not analyzed string fields. Since your queries are using fielddata cache changing this will also lower heap pressure.,null,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-476,Story,97,Closed,Durability of entity writes / Write problem - entities are not necessarily persisted.  Could this be on the unique entity fix?,...,null,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-475,Story,97,Closed,Monitoring Metrics: Add Metrics to low levels of cass and es,null,null,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-466,Bug,97,Closed,Rejected ES Index jobs are dropped.  ,When the index queue is full and ES rejects index requests Usergrid drops them.  The result could be that entities cannot be returned.We should handle this soon.  At a minimum we should put them in an SQS queue or something similar for future handling.,5,1,2,1,0,Todd Nine,Jeffrey West,Jeffrey West,2,0,1,0,0,0,0,0
USERGRID-474,Story,97,Closed,Update cloudformation to use dedicated elasticsearch master nodes,We should update our cloudformation scripts to use a dedicated master node for ES to more closely mirror suggestion production usage during stress testing.,1,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-478,Story,97,Closed,Put entity cleanup and entity delete tasks back to delete by batch.,null,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-396,Story,97,Closed,Create UniqueIndexCleanup tool that works with 2.0,Current instance of tools don't work correctly with 2.0. This should have a RESTful endpoint that is trigged with a PUT.  We should have something like this endpoint.Check all unique values across the entire system => PUT /system/database/unqiuecheckCheck all unique values across a single applications => PUT /system/database/uniquecheck/[appid]Check all unique values in a single collection => PUT /system/database/uniquecheck/[appid]/[collectionname]Check a specific unique value for a collection.PUT=> system/database/uniquecheck/[appid]/[collectionname]/[unique value]The unique check will need to audit the unique index and ensure that the unique value exists for the entity specified. If the entity does not exist they should be removed.I think we should implement specific property cleanup first then implement the other operations as an input of Observables,3,3,2,1,0,George Reyes,George Reyes,George Reyes,3,0,1,1,1,0,0,0
USERGRID-463,Bug,97,Closed,Do not create index if a write alias exists,Users can administer their indexes outside of UG.  When running a re-index an index will be created even if the write alias points to a valid index.  Instead of checking for an index by name at create time we should instead check for the existence of an alias.  If the write alias exists we should not allocate a new index.,null,2,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-472,Story,97,Closed,fix array type index issue when types alternate,null,null,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-479,Story,97,Closed,CLONE - Could not retrieve unique value for field name unable to verify,"2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- java.lang.RuntimeException Server Error (500)java.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:63)        ... 13 more2015-02-16 05:33:23590 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Server Error (500):{""error"":""runtime""""timestamp"":1424064803590""duration"":0""error_description"":""Could not retrieve unique value for field name unable to verify""""exception"":""java.lang.RuntimeException""}2015-02-16 05:33:23600 [http-bio-8080-exec-488] ERROR org.apache.usergrid.rest.exceptions.ThrowableMapper- An uncaught exception occurred during HTTP invocationjava.lang.RuntimeException: Could not retrieve unique value for field name unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:167)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify.call(WriteUniqueVerify.java:58)        at rx.Observable$12.onNext(Observable.java:4036)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:61)        at rx.Observable$3.call(Observable.java:1551)        at rx.Observable$3.call(Observable.java:1546)        at rx.Observable.unsafeSubscribe(Observable.java:6839)        at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:60)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:43)        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:98)",3,3,1,1,0,Shawn Feldman,Rod Simpson,Rod Simpson,0,0,1,0,0,0,0,0
USERGRID-460,Bug,98,Closed,Geospatial/Geolocation query results are not sorted by distance,Geospatial ('within') query results are not sorted by distance.  We should sort by distance ascending by default.  This is now MongoDB handles the $near queries.Please add a test to confirm sorting is done correctly.,3,4,3,0,0,George Reyes,Jeffrey West,Jeffrey West,5,0,1,0,0,0,0,0
USERGRID-509,Story,98,Closed,Cardinality of the EntityCollectionManager is incorrect and may need refactored,An entity can only exist in a single scope. However this makes it impossible to batch fetch entities from multiple scopes in a single network request.  This interface needs changed.  Our EntityCollectionManagerFactory needs to change to return an EntityCollectionManager by ApplicationScope.  Further read/write requests would then need to take an encapsulating CollectionScope.  This would allow us to batch write and batch fetch multiple entities across different collections in a single request.,5,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,1,1,0,0,0
USERGRID-491,Bug,98,Closed,Create app has stopped returning new apps,When creating a new app no error is returned.  However the app never appears in the portal.  Investigate and fix this issue.,3,3,3,0,0,David Johnson,Todd Nine,Todd Nine,10,0,5,2,2,0,0,0
USERGRID-448,Bug,98,Closed,Remove redundant appinfos collections in ManagementServiceImpl,"There is a flaw in the two-dot-o CpEntityManagerFactory.The factory stores a collection of ""appinfo"" type entities but the ManagementServiceImpl stores a redundant collection of ""application_info"" entities. The problem becomes evident when you try to delete an application. The application will only be deleted from the ""appinfos"" collection. When you call the management org/apps end-point you will still see the application because the end-point uses the ""application_infos"". To fix this:- Ensure that only one collection is stored- Add code to migrate the existing app information collections",3,3,2,1,0,David Johnson,David Johnson,David Johnson,8,0,0,0,0,0,0,0
USERGRID-501,Story,98,Closed,Create migration strategy from multiple index to single indexes,null,8,3,1,0,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-494,Bug,98,Closed,More than 10 apps will not be returned for organizations,When we have more than 10 apps we cannot return them due to bugs in the PagingResults Iterator.  Refactor this to work correctly.  In the process we should also refactor the repair logic to work when reading connected entities as well as collections.,1,2,1,0,0,Todd Nine,Todd Nine,Todd Nine,2,0,3,1,1,0,0,0
USERGRID-348,Story,98,Closed,Update ExportResourceIT to new REST test framework,null,3,4,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-480,Story,98,Closed,Enable doc values in our index writes,Aggregation with large data sets are causing memory pressure.  We need to enable doc values for faster aggregation especially when using SSD ES Nodshttp://www.elastic.co/guide/en/elasticsearch/guide/current/doc-values.html,null,2,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-492,Bug,98,Closed,When a newer version of an entity appears before a previous version in candidate results it is not correctly removed,"The following use case causes lazy repair to fail.# Create entity with ""ordinal"":0# Update an entity with ordinal:1# Perform a ""select * order by ordinal desc""The original version with ordinal 0 should be removed from the index.  It will not be in it's current implementation.",null,3,1,0,0,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-490,Story,98,Closed,Update index aliases to be created atomically,Currently we move our index aliases in multiple steps.  This can lead to inconsistent alias state if fail during one of these operations.  Our alias operation should perform a single swap command.  We should perform the following during index allocation.# Create the target index successfully# Issue a single http call that will move the write alias and add the read alias to the new index per this HTTP command equivalent.http://www.elastic.co/guide/en/elasticsearch/reference/current/indices-aliases.html#indices-aliases,1,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,0,0,1,0,0,0,0,0
USERGRID-486,Story,98,Closed,Create a load testing framework for the query module,We need to create a simple stress testing framework for our query module to perform profiling of our indexing scheme.  We can do so easily with the following.Re-use our existing gattling cloud formation and usergrid cloud formationCreate integration tests that can have an overridden URL to elasticsearchRun these via maven and parallel ssh to get performance results.Use metrics to report throughput possibly to graphite so we can compare results.,5,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-493,Story,98,Closed,Refactor jersey resource calls in rest test framework to use generics.,null,3,3,1,0,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-335,Bug,98,Closed,Test Not Passing: CollectionsResourceIT,null,2,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-341,Bug,98,Closed,Fix BrowserCompatibilityTest,null,3,3,1,0,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-414,Story,98,Closed,Set Build Version to Java 8,We're significantly behind our in our RX java implementation.  Before work on the EM/RM refactor work starts we should upgrade to Java 8 to clean up our functional syntax as well as upgrade to the latest RxJava for performance improvements.We should evaluate missing functions we use in RX as Java 8 streams.  If we can re-create our operations as Java 8 streams we should evaluate the performance of RX Java vs Java 8 streams and pick the most performant solution.,3,3,1,1,0,null,Todd Nine,Todd Nine,1,0,3,0,0,0,0,0
USERGRID-345,Bug,98,Closed,Fix RetrieveUsersTest,null,1,3,2,0,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-338,Bug,98,Closed,Fix OwnershipResourceIT,Failing the contextualConnectionOwnership test everytime. The others pass.,1,3,2,0,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-347,Bug,98,Closed,Fix AccessTokenIT,null,3,3,2,0,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-483,Story,98,Closed,Change index structure to single index for many apps,Change the index architecture - Right now you are using an index per client which is good for small number of clients but doesn't scale well especially considering that Elasticsearch doesn't handle large number of shards well. I need to analyze a few things that I have left and I will come up with a proposition of index architecture.,null,3,1,0,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-451,Story,98,Closed,Upgrade rx to latest version,null,3,3,2,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-502,Story,98,Closed,Convert BasicIT over to new rest test framework,Convert,2,3,2,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-510,Story,103,Closed,Write/Review Test Framework Guide,Task for writing up how the current REST test framework behaves and what expectations are for new tests.We should have 90 minutes web conf where we record how we go about doing the tests to review a 'good' test a 'bad' test and a test that is not on the current framework.,1,3,3,0,0,George Reyes,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-509,Story,103,Closed,Cardinality of the EntityCollectionManager is incorrect and may need refactored,An entity can only exist in a single scope. However this makes it impossible to batch fetch entities from multiple scopes in a single network request.  This interface needs changed.  Our EntityCollectionManagerFactory needs to change to return an EntityCollectionManager by ApplicationScope.  Further read/write requests would then need to take an encapsulating CollectionScope.  This would allow us to batch write and batch fetch multiple entities across different collections in a single request.,5,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,1,1,0,0,0
USERGRID-448,Bug,103,Closed,Remove redundant appinfos collections in ManagementServiceImpl,"There is a flaw in the two-dot-o CpEntityManagerFactory.The factory stores a collection of ""appinfo"" type entities but the ManagementServiceImpl stores a redundant collection of ""application_info"" entities. The problem becomes evident when you try to delete an application. The application will only be deleted from the ""appinfos"" collection. When you call the management org/apps end-point you will still see the application because the end-point uses the ""application_infos"". To fix this:- Ensure that only one collection is stored- Add code to migrate the existing app information collections",3,3,2,1,0,David Johnson,David Johnson,David Johnson,8,0,0,0,0,0,0,0
USERGRID-511,Bug,103,Resolved,Refactor current collection and connection code to quickly fix our current read issues,The refactor into our new functional framework is taking longer than anticipated.  We should quickly adapt our current 2.0 implementation to resolve this issue then fix it properly in the USERGRID-494 issue.,3,1,1,0,0,Todd Nine,Todd Nine,Todd Nine,2,0,3,1,1,0,0,0
USERGRID-501,Story,103,Closed,Create migration strategy from multiple index to single indexes,null,8,3,1,0,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-494,Bug,103,Closed,More than 10 apps will not be returned for organizations,When we have more than 10 apps we cannot return them due to bugs in the PagingResults Iterator.  Refactor this to work correctly.  In the process we should also refactor the repair logic to work when reading connected entities as well as collections.,1,2,1,0,0,Todd Nine,Todd Nine,Todd Nine,2,0,3,1,1,0,0,0
USERGRID-536,Story,107,Closed,Change our index structure for static mapping and cleanup api,"Currently our dynamic mapping causes several issues with elastic search.  We should change our mapping to use a static structure and resolve this operational pain.We need to make the following changes.h2. Modify our IndexScopeThis should more closely resemble the elements of an edge since this represents an edge. It will simplify the use of our query module and make development clearer.  This scope should be refactored into the following objects.  * IndexEdge - Id name timestamp edgeType (source or target)* SearchEdge - Id name edgeTypeNote: edgeType is the type of the Id within the edge.  Does this Id represent a source Id or does it represent a targetId?  The entity to be indexed will implicitly be the opposite of the type specified.  I.E if it's a source edge the document is the target.  If it's a target edge the document is the source.These values should also be stored within our document so that we can index our documents.  Note that we perform bidirectional indexing in some cases such was users groups etc.  When we do this we need to ensure that mark the direction of the edge appropriately.h2. Change default sort orderingWhen sorting is unspecified we should order by timestamp descending from our index edge.  This ensures that we retain the correct edge time semantics and will properly order collections and connectionsh2. Remove the legacy query classWe don't need the Query class it has far too many functions to be a well encapsulated object.  Instead we should simply take the string QL the SearchEdge and the limit to return our candidates.  From there we should parse and visit the query internally to the query logic NOT externally.h2. Create a static mappingThe mapping should contains the following static fields.* entityId - The entity id* entityType - The entity type (from the id)* entityVersion - The entity version* edgeId - The edge Id* edgeName - The edge name* edgeTimestamp - The edge timestamp* edgeType - source | target* edgeSearch - edgeId + edgeName + edgeTypeIt will then contain an array of ""fields""  Each of these fields will have the following formation.{code}{ ""name"":""[entity field name as a path]"" ""[field type]"":[field value}{code}We will define a field type for each type of field.  Note that each field tuple will always contain a single field and a single value.  Possible field types are the following.* string - This will be mapped into 2 mapping with multi mappings.  It will be a string unanalyzed and an analyzed string.  The 2 fields will then be ""string_u"" and ""string_a"".  The Query visitor will need to update the field name appropriately* long - An unanalyzed long* double - An unanalyzed double* boolean - An unanalyzed boolean* location - A geolocation field* uuid - A UUID stored as an unanalyzed stringThe entity path will be a flattened path from the root json element to the max json element.  It can be though of as a path through the tree of json elements.  We will use a dot '.' to delimit the fields.  X.Y.Z for nested objects.  Primitive arrays will contain a field object for each element in the array.h2. Indexing  When indexing entities we will no longer modify or prefix field names.  They will be inserted into the value exactly as their path appears after lower case.h2. Querying  When querying the ""contains"" operation for a string will need to use the ""string_a"" data type.  When using = we will need to use the string_u data type.  Each criteria will need to use nested object querying to ensure the property name and property value are both part of the same field tuple.h3. ReferencesMulti Field Mapping: http://www.elastic.co/guide/en/elasticsearch/reference/current/_multi_fields.htmlNested Objects: http://www.elastic.co/guide/en/elasticsearch/guide/current/nested-objects.htmlNested Object Search: http://www.elastic.co/guide/en/elasticsearch/guide/master/nested-sorting.html",2,2,4,1,0,Todd Nine,Todd Nine,Todd Nine,10,0,3,2,2,0,0,0
USERGRID-518,Bug,107,Closed,Update copyright in footer of Portal to 2015,null,1,4,1,0,0,ryan bridges,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-342,Bug,107,Closed,Fix AdminEmailEncodingIT,null,1,3,2,0,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-336,Bug,107,Closed,Fix ContentTypeResourceIT,null,1,3,1,0,0,ryan bridges,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-515,Bug,107,Closed,[SPIKE] Creating collections in the portal throws an error,"The '+' button to create a collection in the UI does not work.  In Chrome dev tools it looks like it is doing a PUT to this URL: https://{host}/{org}/{app}/?access_token={token} with this request data: {""metadata"":{""collections"":{""foo"":{}}}}And the response looks like this:duration: 6error: ""entity_not_found""error_description: ""Cannot restore. Deleted Application not found: 5ab1ef5c-7f4c-11e4-9bb8-0ad113d917ad""exception: ""org.apache.usergrid.persistence.exceptions.EntityNotFoundException""timestamp: 1427291983254Open tickets to do the fixes as necessary",1,3,3,0,0,ryan bridges,Jeffrey West,Jeffrey West,4,0,0,0,0,0,0,0
USERGRID-340,Bug,107,Closed,Fix RegistrationIT,null,1,3,1,0,0,ryan bridges,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-510,Story,107,Closed,Write/Review Test Framework Guide,Task for writing up how the current REST test framework behaves and what expectations are for new tests.We should have 90 minutes web conf where we record how we go about doing the tests to review a 'good' test a 'bad' test and a test that is not on the current framework.,1,3,3,0,0,George Reyes,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-548,Story,107,Closed,Allow Export to output admin password hashes,null,5,3,2,1,1,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-538,Story,107,Closed,Improve uncaught errors' http response,When an uncaught exception happens in stack's rest layer we throw the java error in response to the user. Such responses could just say internal server error. And as [~tnine] suggested we could add a time uuid to the error response so we can correlate the error in logs and track the error down for the user. ,1,4,2,1,0,Senthil Kumar K,Senthil Kumar K,Senthil Kumar K,4,0,1,0,0,0,0,0
USERGRID-550,Story,107,Closed,Create migration for app infos into new format,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-509,Story,107,Closed,Cardinality of the EntityCollectionManager is incorrect and may need refactored,An entity can only exist in a single scope. However this makes it impossible to batch fetch entities from multiple scopes in a single network request.  This interface needs changed.  Our EntityCollectionManagerFactory needs to change to return an EntityCollectionManager by ApplicationScope.  Further read/write requests would then need to take an encapsulating CollectionScope.  This would allow us to batch write and batch fetch multiple entities across different collections in a single request.,5,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,1,1,0,0,0
USERGRID-539,Bug,107,Closed,Test Not Passing: CPHeadEntityNull in Services tests,Tests in error:  EmailFlowIT.testAppUserActivationResetpwdMail:287 ┬╗ IllegalArgument cpHeadEnti...  EmailFlowIT.testAppUserConfirmationMail:376 ┬╗ IllegalArgument cpHeadEntity can...  OrganizationIT.testCreateOrganization:91 ┬╗ IllegalArgument cpHeadEntity cannot...,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-491,Bug,107,Closed,Create app has stopped returning new apps,When creating a new app no error is returned.  However the app never appears in the portal.  Investigate and fix this issue.,3,3,3,0,0,David Johnson,Todd Nine,Todd Nine,10,0,5,2,2,0,0,0
USERGRID-530,Bug,107,Closed,Deleting a connection to an Asset should not delete the Asset's data,Steps to reproduce:1) Create asset entity2) Create entity3) Create connection from entity to asset entity4) Delete connection5) Asset JSON still present Asset data is now gone,1,3,3,1,1,David Johnson,David Johnson,David Johnson,6,0,1,0,0,0,0,0
USERGRID-540,Bug,107,Closed,Test Not Passing: EntityManagerFactoryImplIT.testDeleteApplication ,java.lang.RuntimeException: System App b6768a08-b5d5-11e3-a495-10ddb1de66c3 should never be nullat org.apache.usergrid.corepersistence.CpEntityManagerFactory.getApplications(CpEntityManagerFactory.java:432)at org.apache.usergrid.corepersistence.CpEntityManagerFactory.getDeletedApplications(CpEntityManagerFactory.java:418)at org.apache.usergrid.persistence.cassandra.EntityManagerFactoryImplIT.testDeleteApplication(EntityManagerFactoryImplIT.java:158)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.apache.usergrid.CoreApplication$1.evaluate(CoreApplication.java:138)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.CoreITSetupImpl$1.evaluate(CoreITSetupImpl.java:78)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:363)at org.junit.runner.JUnitCore.run(JUnitCore.java:137)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:140),null,3,1,1,0,David Johnson,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-424,Bug,107,Closed,Change AppInfo lookup to use Cassandra,Current appInfo uses a unique value of name to be looked up when the user makes a request using the org-name/app-name URL. This is searching ES instead of using unique value lookups. This is incorrect and needs fixed. During ES shard rebalancing apps fail to function due to this implementation.See the EMF and EM implementations and fix them to use unique property lookup.,null,3,2,1,0,David Johnson,Todd Nine,Todd Nine,3,0,0,0,0,0,0,0
USERGRID-533,Story,107,Closed,REST Test for Create App not returning,Ensure we create >11 apps and that it works.,2,3,2,1,0,David Johnson,Jeffrey West,Jeffrey West,2,0,1,1,1,0,0,0
USERGRID-535,Story,107,Closed,[SPIKE] Look into broken tests and open tickets,Take a look at REST and CORE tests to see what needs to be cleaned up to stabilize for upcoming release.,3,3,2,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-529,Bug,107,Closed,iOS Push Notification Errors,See the following ticket: https://apigeesc.atlassian.net/browse/APIBAAS-1525.2015-03-31 13:57:37870 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:37872 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:37873 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:37881 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38080 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38084 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38085 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38093 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38292 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38299 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38300 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38304 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38510 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38511 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38513 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38517 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38723 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38724 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38725 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38729 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38935 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38936 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38938 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:38941 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:39146 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connectionjava.nio.channels.ClosedChannelException2015-03-31 13:57:39147 ERROR (pool-525-thread-1) [org.apache.usergrid.services.notifications.apns.RejectedAPNsListener] - Failed to register push connection,3,3,1,0,1,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-542,Story,107,Closed,Have Export output password hashes in 1.0,Make sure that the export process outputs the password hashes. This will allow people who want to import user accounts able to by using the api. ,5,3,1,0,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-549,Story,107,Closed,Refactor Org app relationship to remove app info object and use graph to application object,null,1,3,2,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-551,Bug,109,Open,[SPIKE] Cross-collection / graph filtering does not work,REST calls of this nature do not work: GET /pets;ql=select * where type='cat'/belongsTo/owners;ql=select * where city='Dallas',5,3,1,0,0,null,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-544,Story,109,Closed,[SPIKE] Deadletter - Figure out why some entities are having indexing problems,we have some entities that are having indexing issues with 6011 at this time in a dead letter queue.  we need to understand why these are having indexing issues.,3,4,1,1,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-556,Story,109,Closed,Update Index prefix for management app to use the cassandra keyspace name,We need to replicate and test the reindex oscillation issue in the e2e environment.,1,2,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-536,Story,109,Closed,Change our index structure for static mapping and cleanup api,"Currently our dynamic mapping causes several issues with elastic search.  We should change our mapping to use a static structure and resolve this operational pain.We need to make the following changes.h2. Modify our IndexScopeThis should more closely resemble the elements of an edge since this represents an edge. It will simplify the use of our query module and make development clearer.  This scope should be refactored into the following objects.  * IndexEdge - Id name timestamp edgeType (source or target)* SearchEdge - Id name edgeTypeNote: edgeType is the type of the Id within the edge.  Does this Id represent a source Id or does it represent a targetId?  The entity to be indexed will implicitly be the opposite of the type specified.  I.E if it's a source edge the document is the target.  If it's a target edge the document is the source.These values should also be stored within our document so that we can index our documents.  Note that we perform bidirectional indexing in some cases such was users groups etc.  When we do this we need to ensure that mark the direction of the edge appropriately.h2. Change default sort orderingWhen sorting is unspecified we should order by timestamp descending from our index edge.  This ensures that we retain the correct edge time semantics and will properly order collections and connectionsh2. Remove the legacy query classWe don't need the Query class it has far too many functions to be a well encapsulated object.  Instead we should simply take the string QL the SearchEdge and the limit to return our candidates.  From there we should parse and visit the query internally to the query logic NOT externally.h2. Create a static mappingThe mapping should contains the following static fields.* entityId - The entity id* entityType - The entity type (from the id)* entityVersion - The entity version* edgeId - The edge Id* edgeName - The edge name* edgeTimestamp - The edge timestamp* edgeType - source | target* edgeSearch - edgeId + edgeName + edgeTypeIt will then contain an array of ""fields""  Each of these fields will have the following formation.{code}{ ""name"":""[entity field name as a path]"" ""[field type]"":[field value}{code}We will define a field type for each type of field.  Note that each field tuple will always contain a single field and a single value.  Possible field types are the following.* string - This will be mapped into 2 mapping with multi mappings.  It will be a string unanalyzed and an analyzed string.  The 2 fields will then be ""string_u"" and ""string_a"".  The Query visitor will need to update the field name appropriately* long - An unanalyzed long* double - An unanalyzed double* boolean - An unanalyzed boolean* location - A geolocation field* uuid - A UUID stored as an unanalyzed stringThe entity path will be a flattened path from the root json element to the max json element.  It can be though of as a path through the tree of json elements.  We will use a dot '.' to delimit the fields.  X.Y.Z for nested objects.  Primitive arrays will contain a field object for each element in the array.h2. Indexing  When indexing entities we will no longer modify or prefix field names.  They will be inserted into the value exactly as their path appears after lower case.h2. Querying  When querying the ""contains"" operation for a string will need to use the ""string_a"" data type.  When using = we will need to use the string_u data type.  Each criteria will need to use nested object querying to ensure the property name and property value are both part of the same field tuple.h3. ReferencesMulti Field Mapping: http://www.elastic.co/guide/en/elasticsearch/reference/current/_multi_fields.htmlNested Objects: http://www.elastic.co/guide/en/elasticsearch/guide/current/nested-objects.htmlNested Object Search: http://www.elastic.co/guide/en/elasticsearch/guide/master/nested-sorting.html",2,2,4,1,0,Todd Nine,Todd Nine,Todd Nine,10,0,3,2,2,0,0,0
USERGRID-518,Bug,109,Closed,Update copyright in footer of Portal to 2015,null,1,4,1,0,0,ryan bridges,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-342,Bug,109,Closed,Fix AdminEmailEncodingIT,null,1,3,2,0,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-336,Bug,109,Closed,Fix ContentTypeResourceIT,null,1,3,1,0,0,ryan bridges,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-515,Bug,109,Closed,[SPIKE] Creating collections in the portal throws an error,"The '+' button to create a collection in the UI does not work.  In Chrome dev tools it looks like it is doing a PUT to this URL: https://{host}/{org}/{app}/?access_token={token} with this request data: {""metadata"":{""collections"":{""foo"":{}}}}And the response looks like this:duration: 6error: ""entity_not_found""error_description: ""Cannot restore. Deleted Application not found: 5ab1ef5c-7f4c-11e4-9bb8-0ad113d917ad""exception: ""org.apache.usergrid.persistence.exceptions.EntityNotFoundException""timestamp: 1427291983254Open tickets to do the fixes as necessary",1,3,3,0,0,ryan bridges,Jeffrey West,Jeffrey West,4,0,0,0,0,0,0,0
USERGRID-340,Bug,109,Closed,Fix RegistrationIT,null,1,3,1,0,0,ryan bridges,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-561,Bug,109,Closed,Portal appears to hang when it gets a 401,When logging into the portal it appears to hang when a 401 is returned from https://stage-exchange-prod.apigee.net/appservices/management/users/{email}.  We should catch this error and handle it better.,1,2,3,0,0,ryan bridges,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-578,Bug,109,Closed,ES Cursors not working in 2.1,null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-510,Story,109,Closed,Write/Review Test Framework Guide,Task for writing up how the current REST test framework behaves and what expectations are for new tests.We should have 90 minutes web conf where we record how we go about doing the tests to review a 'good' test a 'bad' test and a test that is not on the current framework.,1,3,3,0,0,George Reyes,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-548,Story,109,Closed,Allow Export to output admin password hashes,null,5,3,2,1,1,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-538,Story,109,Closed,Improve uncaught errors' http response,When an uncaught exception happens in stack's rest layer we throw the java error in response to the user. Such responses could just say internal server error. And as [~tnine] suggested we could add a time uuid to the error response so we can correlate the error in logs and track the error down for the user. ,1,4,2,1,0,Senthil Kumar K,Senthil Kumar K,Senthil Kumar K,4,0,1,0,0,0,0,0
USERGRID-550,Story,109,Closed,Create migration for app infos into new format,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-534,Story,109,Closed, Load Test with 2.1,Test load with the frankenloader in e2e for the upcoming release,3,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-555,Story,109,Closed,Test Migration of Entity Versions,Test migration from v2 to v3 for the upcoming release,3,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-541,Story,109,Closed,Change the current relation manager impl to and create indexing interface,add interface to index appid and entity1. read entity state out of cass.2. read all edges 3. if bidirectional -> index from source to target4. submit batch5. wait for batch -> return future,5,3,2,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,1,0,2,2,2,0,0,0
USERGRID-567,Story,109,Closed,Validate External Token for Usergrid Central SSO,"The requirement is to have multiple Usergrid systems each with its own Cassandra cluster be able to authenticate Admin Users with one central Usergrid system -- giving Admin Users Single-Sign-On (SSO) across all of those systems.We can do this by adding just one new end-point to Usergrid.This Google Doc explains a complete design for ""Usergrid Central SSO"":https://docs.google.com/document/d/12kXgaYcB6L9JoTyRGn0ZHEMg3vL1LJDqvtnltIBDa1Y/edit?usp=sharingThe design is based on earlier work by Ed Anuff and Nate McCall.",5,3,2,1,0,David Johnson,David Johnson,David Johnson,12,0,0,0,0,0,0,0
USERGRID-563,Story,109,Closed,[SPIKE] Ability for one Usergrid instance to delegate authentication to another ,Design forthcoming.,3,3,3,0,0,David Johnson,David Johnson,David Johnson,3,0,0,0,0,0,0,0
USERGRID-568,Story,109,Closed,Fix push issues close connection issues,null,3,3,1,0,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-527,Story,109,Closed,Write external ES test to ensure we get even routing across the ES cluster,One of the problems we have faced is uneven distribution in the ES cluster.  We have made changes for document routing that seemed to help but we are still getting hot nodes in the cluster.  We need to have a test that hits ES directly with load as UG would do to test our cluster distribution.,3,2,3,1,0,Senthil Kumar K,Jeffrey West,Jeffrey West,7,0,1,0,0,0,0,0
USERGRID-593,Story,114,Resolved,Implement Read by Graph Edges for no Query,When no query is specified we should read by graph edges and not read via elasticsearch.  The low level seek logic exists.  The relationManager simply needs to wire this functionality in.  A new Graph I/O interface should be created to cleanly implement and test this.,5,1,2,1,0,Todd Nine,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-536,Story,114,Closed,Change our index structure for static mapping and cleanup api,"Currently our dynamic mapping causes several issues with elastic search.  We should change our mapping to use a static structure and resolve this operational pain.We need to make the following changes.h2. Modify our IndexScopeThis should more closely resemble the elements of an edge since this represents an edge. It will simplify the use of our query module and make development clearer.  This scope should be refactored into the following objects.  * IndexEdge - Id name timestamp edgeType (source or target)* SearchEdge - Id name edgeTypeNote: edgeType is the type of the Id within the edge.  Does this Id represent a source Id or does it represent a targetId?  The entity to be indexed will implicitly be the opposite of the type specified.  I.E if it's a source edge the document is the target.  If it's a target edge the document is the source.These values should also be stored within our document so that we can index our documents.  Note that we perform bidirectional indexing in some cases such was users groups etc.  When we do this we need to ensure that mark the direction of the edge appropriately.h2. Change default sort orderingWhen sorting is unspecified we should order by timestamp descending from our index edge.  This ensures that we retain the correct edge time semantics and will properly order collections and connectionsh2. Remove the legacy query classWe don't need the Query class it has far too many functions to be a well encapsulated object.  Instead we should simply take the string QL the SearchEdge and the limit to return our candidates.  From there we should parse and visit the query internally to the query logic NOT externally.h2. Create a static mappingThe mapping should contains the following static fields.* entityId - The entity id* entityType - The entity type (from the id)* entityVersion - The entity version* edgeId - The edge Id* edgeName - The edge name* edgeTimestamp - The edge timestamp* edgeType - source | target* edgeSearch - edgeId + edgeName + edgeTypeIt will then contain an array of ""fields""  Each of these fields will have the following formation.{code}{ ""name"":""[entity field name as a path]"" ""[field type]"":[field value}{code}We will define a field type for each type of field.  Note that each field tuple will always contain a single field and a single value.  Possible field types are the following.* string - This will be mapped into 2 mapping with multi mappings.  It will be a string unanalyzed and an analyzed string.  The 2 fields will then be ""string_u"" and ""string_a"".  The Query visitor will need to update the field name appropriately* long - An unanalyzed long* double - An unanalyzed double* boolean - An unanalyzed boolean* location - A geolocation field* uuid - A UUID stored as an unanalyzed stringThe entity path will be a flattened path from the root json element to the max json element.  It can be though of as a path through the tree of json elements.  We will use a dot '.' to delimit the fields.  X.Y.Z for nested objects.  Primitive arrays will contain a field object for each element in the array.h2. Indexing  When indexing entities we will no longer modify or prefix field names.  They will be inserted into the value exactly as their path appears after lower case.h2. Querying  When querying the ""contains"" operation for a string will need to use the ""string_a"" data type.  When using = we will need to use the string_u data type.  Each criteria will need to use nested object querying to ensure the property name and property value are both part of the same field tuple.h3. ReferencesMulti Field Mapping: http://www.elastic.co/guide/en/elasticsearch/reference/current/_multi_fields.htmlNested Objects: http://www.elastic.co/guide/en/elasticsearch/guide/current/nested-objects.htmlNested Object Search: http://www.elastic.co/guide/en/elasticsearch/guide/master/nested-sorting.html",2,2,4,1,0,Todd Nine,Todd Nine,Todd Nine,10,0,3,2,2,0,0,0
USERGRID-518,Bug,114,Closed,Update copyright in footer of Portal to 2015,null,1,4,1,0,0,ryan bridges,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-342,Bug,114,Closed,Fix AdminEmailEncodingIT,null,1,3,2,0,0,ryan bridges,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-336,Bug,114,Closed,Fix ContentTypeResourceIT,null,1,3,1,0,0,ryan bridges,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-515,Bug,114,Closed,[SPIKE] Creating collections in the portal throws an error,"The '+' button to create a collection in the UI does not work.  In Chrome dev tools it looks like it is doing a PUT to this URL: https://{host}/{org}/{app}/?access_token={token} with this request data: {""metadata"":{""collections"":{""foo"":{}}}}And the response looks like this:duration: 6error: ""entity_not_found""error_description: ""Cannot restore. Deleted Application not found: 5ab1ef5c-7f4c-11e4-9bb8-0ad113d917ad""exception: ""org.apache.usergrid.persistence.exceptions.EntityNotFoundException""timestamp: 1427291983254Open tickets to do the fixes as necessary",1,3,3,0,0,ryan bridges,Jeffrey West,Jeffrey West,4,0,0,0,0,0,0,0
USERGRID-340,Bug,114,Closed,Fix RegistrationIT,null,1,3,1,0,0,ryan bridges,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-561,Bug,114,Closed,Portal appears to hang when it gets a 401,When logging into the portal it appears to hang when a 401 is returned from https://stage-exchange-prod.apigee.net/appservices/management/users/{email}.  We should catch this error and handle it better.,1,2,3,0,0,ryan bridges,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-582,Bug,114,Closed,Test Not Passing: CollectionIT Tests,null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-578,Bug,114,Closed,ES Cursors not working in 2.1,null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-581,Story,114,Closed,Implement ability to createItemInCollection using the graph.,This should fix the broken test in the EntityManagerIt labeled: ownershipScopeCorrect,3,3,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-527,Story,114,Closed,Write external ES test to ensure we get even routing across the ES cluster,One of the problems we have faced is uneven distribution in the ES cluster.  We have made changes for document routing that seemed to help but we are still getting hot nodes in the cluster.  We need to have a test that hits ES directly with load as UG would do to test our cluster distribution.,3,2,3,1,0,Senthil Kumar K,Jeffrey West,Jeffrey West,7,0,1,0,0,0,0,0
USERGRID-592,Story,114,Closed,[SPIKE] Investigate support for Central Usergrid SSO in the Portal,If Central Usergrid then the Portal should redirect the user to the central Usergrid instance for login/registration.And when the Portal gets an Admin User token from the Central Usergrid SSO system the Portal must validate it against the Usergrid system with which it is configured to work.This is a spike to design a possible solution for SSO support in portal.,3,3,1,0,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-588,Story,114,Closed,Test and confirm Raw Push Notifications on Windows,null,3,3,1,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-572,Story,123,Closed,Add a query parameter to enable the hiding of sensitive information in API resposnes,Please add a setting that can prevent the qparams from being returned in a response and/or add a filter for accessToken and ClientID/ClientSecret to not be returned in a response.,1,2,3,1,0,Senthil Kumar K,Jeffrey West,Jeffrey West,6,0,0,0,0,0,0,0
USERGRID-609,Story,123,Closed,Document the new IO framework,null,2,3,3,0,0,George Reyes,Shawn Feldman,Shawn Feldman,3,0,0,0,0,0,0,0
USERGRID-602,Story,123,Closed,Test Import / Export of Admin Users,null,2,3,1,0,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-601,Story,123,Closed,Test Usergrid Central SSO,null,3,3,1,0,1,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-583,Story,123,Closed,Test Document Routing using External Test,Test routing of documents in ES using external test.,null,3,1,0,0,null,Jeffrey West,Jeffrey West,0,0,1,0,0,0,0,0
USERGRID-606,Story,123,Closed,Implement Async Indexing on New Edge,null,1,3,2,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-527,Story,123,Closed,Write external ES test to ensure we get even routing across the ES cluster,One of the problems we have faced is uneven distribution in the ES cluster.  We have made changes for document routing that seemed to help but we are still getting hot nodes in the cluster.  We need to have a test that hits ES directly with load as UG would do to test our cluster distribution.,3,2,3,1,0,Senthil Kumar K,Jeffrey West,Jeffrey West,7,0,1,0,0,0,0,0
USERGRID-639,Bug,124,Closed,Entity does not return from collection when ql=select *,Entity exists at /{org}/{app}/{collection}/{name} but is not returned from /{org}/{app}/{collection}?ql=select * For reference: https://apigeesc.atlassian.net/browse/APIBAAS-1560,3,3,1,1,0,null,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-616,Story,124,Open,Queries using greater/less than on float fields fail,null,3,4,1,1,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-617,Story,124,Open,Queries using order by on float fields result in incorrect ordering ,null,3,4,1,1,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-618,Story,124,Closed,Additional testing of Usergrid SSO,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-640,Bug,124,Closed,Entities created on the portal during 'create collection' do not get persisted,In the portal when you use the create collection button to create a collection you now must specify the first entity on the form.  It does not appear that the entity gets persisted into the collection.This can be recreated on the Usergrid free version at http://appservices.apigee.com/index.html/#!/login,3,3,2,0,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-607,Story,124,Closed,Implement Deleting Edge out of index,querying es for all edgesdeleting in bulkasync using async index service,1,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,4,0,1,1,1,0,0,0
USERGRID-608,Story,124,Closed,Refactor/Complete Delete Entity in 2.1,can o wormsrefactor cp relation manager into async serviceasync == async event service starts processlook at indexingservice,2,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,12,12,12,0,0,0
USERGRID-632,Bug,124,Closed,Test Not Passing: PerformanceEntityRebuildIndexTest,null,1,3,3,1,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,1,1,1,0,0,0
USERGRID-633,Bug,124,Closed,Test Not Passing: PermissionsIT,null,0,3,2,1,0,ryan bridges,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-634,Bug,124,Closed,Test Not Passing: EntityManagerFactoryImplIT,null,1,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-627,Bug,124,Closed,Test Not Passing: EntityManagerIT,null,0,3,2,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-628,Bug,124,Closed,Test Not Passing: GeoIT,null,1,3,4,1,0,Todd Nine,Jeffrey West,Jeffrey West,4,0,1,1,1,0,0,0
USERGRID-643,Story,124,Closed,Implement Reindex By Collection,PerformanceEntityRebuildIndexTest.rebuildOneCollectionIndex:228 null,3,3,2,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,2,0,1,1,1,0,0,0
USERGRID-641,Story,124,Closed,Implement search by connections in core, EntityConnectionsIT.testEntityConnectionsMembership:271 null  EntityConnectionsIT.testEntityConnectionsSimple:79 nullare failing,3,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-572,Story,124,Closed,Add a query parameter to enable the hiding of sensitive information in API resposnes,Please add a setting that can prevent the qparams from being returned in a response and/or add a filter for accessToken and ClientID/ClientSecret to not be returned in a response.,1,2,3,1,0,Senthil Kumar K,Jeffrey West,Jeffrey West,6,0,0,0,0,0,0,0
USERGRID-614,Story,124,Closed,Refactor compaction operations to be declarative in 2.1,Currently our event system originates from too may points.  Both GraphManager and CollectionManager fire events for compaction.  This is causing issues with our event orchestration when we aggregate events in the core tier. A quick refactor needs to occur.  The following will need to happen.1) Define new compaction interfaces on the EntityCollectionManager and GraphManager2) Refactor the existing code to be invoked on these events3) Invoke the compaction at a higher level.  Mark will sill occur compaction will be deferred to the runtime. This allows a separate distributed subsystem to be created. ,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,1,1,0,0,0
USERGRID-642,Bug,124,Closed,Test Not Passing: StaleIndexCleanup Failing due to old version getting returned from search,java.lang.AssertionError: Expected :e2283e4d-f504-11e4-b4ae-324ce75ff58bActual   :e2150469-f504-11e4-b4ae-324ce75ff58b <Click to see difference>at org.junit.Assert.fail(Assert.java:88)at org.junit.Assert.failNotEquals(Assert.java:834)at org.junit.Assert.assertEquals(Assert.java:118)at org.junit.Assert.assertEquals(Assert.java:144)at org.apache.usergrid.corepersistence.StaleIndexCleanupTest.testUpdateVersionMaxFirst(StaleIndexCleanupTest.java:187)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.CoreApplication$1.evaluate(CoreApplication.java:145)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)at org.apache.usergrid.CoreITSetupImpl$1.evaluate(CoreITSetupImpl.java:76)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:363)at org.junit.runner.JUnitCore.run(JUnitCore.java:137)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:140),3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-621,Bug,124,Closed,Test Not Passing: InMemoryAsyncIndexServiceTest,null,2,3,2,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-622,Bug,124,Closed,Test Not Passing: IndexServiceTest,null,2,3,2,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,2,0,1,1,1,0,0,0
USERGRID-623,Bug,124,Closed,Test Not Passing: AllEntitiesInSystemObservableIT,null,2,3,1,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-624,Bug,124,Closed,Test Not Passing: MessagesIT,null,2,3,2,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-631,Bug,124,Closed,Test Not Passing: PathQueryIT,null,2,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-635,Bug,124,Closed,Test Not Passing: IntersectionTransitivePagingIT,null,2,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-636,Bug,124,Closed,Test Not Passing: IntersectionUnionPagingIT,null,2,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-637,Bug,124,Closed,Test Not Passing: NotSubPropertyIT,null,2,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-625,Bug,124,Closed,Test Not Passing: CountingMutatorIT,null,2,3,1,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-626,Bug,124,Closed,Test Not Passing: EntityDictionaryIT,null,2,3,1,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-644,Bug,124,Closed,Test Not Passing: IteratingQueryIt failing due to bad serializer,"trying to deserialize a markededge into an edgeAbstractCursorSerializer line 472015-05-08 14:33:25926 DEBUG (main) IndexServiceImpl - adding edge IndexEdgeImpl{timestamp=1431117205920001} SearchEdgeImpl{nodeId=SimpleId{uuid=7a1f1c82-f5c1-11e4-9ef9-324ce75ff58b type='application'} name='zzzcollzzz|tests' nodeType=TARGET} to batch for entity Entity{id=SimpleId{uuid=7a69ba0a-f5c1-11e4-ab26-47475f9887d5 type='test'} version=7a69ba63-f5c1-11e4-9ef9-324ce75ff58b}2015-05-08 14:33:25942 DEBUG (main) IndexServiceImpl - adding edge IndexEdgeImpl{timestamp=1431117205934001} SearchEdgeImpl{nodeId=SimpleId{uuid=7a1f1c82-f5c1-11e4-9ef9-324ce75ff58b type='application'} name='zzzcollzzz|tests' nodeType=TARGET} to batch for entity Entity{id=SimpleId{uuid=7a6bdcea-f5c1-11e4-8198-83878cd74a93 type='test'} version=7a6c0456-f5c1-11e4-9ef9-324ce75ff58b}2015-05-08 14:33:25957 DEBUG (main) IndexServiceImpl - adding edge IndexEdgeImpl{timestamp=1431117205949001} SearchEdgeImpl{nodeId=SimpleId{uuid=7a1f1c82-f5c1-11e4-9ef9-324ce75ff58b type='application'} name='zzzcollzzz|tests' nodeType=TARGET} to batch for entity Entity{id=SimpleId{uuid=7a6e26da-f5c1-11e4-8f8d-9b115b1298d8 type='test'} version=7a6e2739-f5c1-11e4-9ef9-324ce75ff58b}2015-05-08 14:33:25970 DEBUG (main) IndexServiceImpl - adding edge IndexEdgeImpl{timestamp=1431117205964001} SearchEdgeImpl{nodeId=SimpleId{uuid=7a1f1c82-f5c1-11e4-9ef9-324ce75ff58b type='application'} name='zzzcollzzz|tests' nodeType=TARGET} to batch for entity Entity{id=SimpleId{uuid=7a7070ca-f5c1-11e4-9deb-7d7bf418ca86 type='test'} version=7a70712c-f5c1-11e4-9ef9-324ce75ff58b}2015-05-08 14:33:25984 DEBUG (main) IndexServiceImpl - adding edge IndexEdgeImpl{timestamp=1431117205978001} SearchEdgeImpl{nodeId=SimpleId{uuid=7a1f1c82-f5c1-11e4-9ef9-324ce75ff58b type='application'} name='zzzcollzzz|tests' nodeType=TARGET} to batch for entity Entity{id=SimpleId{uuid=7a7293aa-f5c1-11e4-8cbc-6b63f058386d type='test'} version=7a72bb1f-f5c1-11e4-9ef9-324ce75ff58b}2015-05-08 14:33:25998 DEBUG (main) IndexServiceImpl - adding edge IndexEdgeImpl{timestamp=1431117205991001} SearchEdgeImpl{nodeId=SimpleId{uuid=7a1f1c82-f5c1-11e4-9ef9-324ce75ff58b type='application'} name='zzzcollzzz|tests' nodeType=TARGET} to batch for entity Entity{id=SimpleId{uuid=7a748f7a-f5c1-11e4-b755-cfcc9cf90313 type='test'} version=7a748fe2-f5c1-11e4-9ef9-324ce75ff58b}2015-05-08 14:33:26013 DEBUG (main) IndexServiceImpl - adding edge IndexEdgeImpl{timestamp=1431117206006001} SearchEdgeImpl{nodeId=SimpleId{uuid=7a1f1c82-f5c1-11e4-9ef9-324ce75ff58b type='application'} name='zzzcollzzz|tests' nodeType=TARGET} to batch for entity Entity{id=SimpleId{uuid=7a76d96a-f5c1-11e4-b6ba-5103774b6f21 type='test'} version=7a7700e5-f5c1-11e4-9ef9-324ce75ff58b}2015-05-08 14:33:26027 DEBUG (main) IndexServiceImpl - adding edge IndexEdgeImpl{timestamp=1431117206021001} SearchEdgeImpl{nodeId=SimpleId{uuid=7a1f1c82-f5c1-11e4-9ef9-324ce75ff58b type='application'} name='zzzcollzzz|tests' nodeType=TARGET} to batch for entity Entity{id=SimpleId{uuid=7a79235a-f5c1-11e4-a640-1f069a6b43c9 type='test'} version=7a7923c8-f5c1-11e4-9ef9-324ce75ff58b}2015-05-08 14:33:26112 INFO (main) IndexRefreshCommandImpl - found record during refresh uuid: 7a7c0980-f5c1-11e4-b2bd-5994708e0639 took ms:75 2015-05-08 14:33:26112 INFO (main) IteratingQueryIT - Writes took 571 msDisconnected from the target VM address: '127.0.0.1:49588' transport: 'socket'2015-05-08 14:34:59660 INFO (main) CoreApplication - Test allInConnectionNoType(org.apache.usergrid.persistence.query.IteratingQueryIT): finish with applicationorg.apache.usergrid.corepersistence.pipeline.cursor.CursorParseException: Unable to deserialize valueat org.apache.usergrid.corepersistence.pipeline.cursor.AbstractCursorSerializer.fromJsonNode(AbstractCursorSerializer.java:51)at org.apache.usergrid.corepersistence.pipeline.cursor.RequestCursor.getCursor(RequestCursor.java:75)at org.apache.usergrid.corepersistence.pipeline.PipelineContext.getCursor(PipelineContext.java:68)at org.apache.usergrid.corepersistence.pipeline.read.AbstractPathFilter.getSeekValue(AbstractPathFilter.java:50)at org.apache.usergrid.corepersistence.pipeline.read.graph.AbstractReadGraphFilter.lambda$call$2(AbstractReadGraphFilter.java:73)at org.apache.usergrid.corepersistence.pipeline.read.graph.AbstractReadGraphFilter$$Lambda$100/1957269967.call(Unknown Source)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:43)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:32)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.subscribe(Observable.java:7585)at rx.internal.operators.BlockingOperatorToIterator.toIterator(BlockingOperatorToIterator.java:53)at rx.observables.BlockingObservable.getIterator(BlockingObservable.java:156)at org.apache.usergrid.corepersistence.results.ObservableQueryExecutor.hasNext(ObservableQueryExecutor.java:114)at org.apache.usergrid.corepersistence.results.ObservableQueryExecutor.next(ObservableQueryExecutor.java:124)at org.apache.usergrid.corepersistence.CpRelationManager.searchConnectedEntities(CpRelationManager.java:948)at org.apache.usergrid.corepersistence.CpEntityManager.searchConnectedEntities(CpEntityManager.java:1546)at org.apache.usergrid.persistence.query.IteratingQueryIT$ConnectionNoTypeHelper.getResults(IteratingQueryIT.java:278)at org.apache.usergrid.persistence.query.IteratingQueryIT.allIn(IteratingQueryIT.java:1130)at org.apache.usergrid.persistence.query.IteratingQueryIT.allInConnectionNoType(IteratingQueryIT.java:71)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.apache.usergrid.CoreApplication$1.evaluate(CoreApplication.java:145)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)at org.apache.usergrid.CoreITSetupImpl$1.evaluate(CoreITSetupImpl.java:76)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.run(ParentRunner.java:363)at org.junit.runner.JUnitCore.run(JUnitCore.java:137)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)Caused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field ""deleted"" (class org.apache.usergrid.persistence.graph.impl.SimpleEdge) not marked as ignorable (4 known properties: ""type"" ""targetNode"" ""sourceNode"" ""timestamp""]) at [Source: N/A; line: -1 column: -1] (through reference chain: org.apache.usergrid.persistence.graph.impl.SimpleEdge[""deleted""])at com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:51)at com.fasterxml.jackson.databind.DeserializationContext.reportUnknownProperty(DeserializationContext.java:671)at com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:773)at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1297)at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1275)at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:247)at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:118)at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:2965)at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:1587)at com.fasterxml.jackson.databind.ObjectMapper.treeToValue(ObjectMapper.java:1931)at org.apache.usergrid.corepersistence.pipeline.cursor.AbstractCursorSerializer.fromJsonNode(AbstractCursorSerializer.java:48)... 74 moreCaused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: org.apache.usergrid.corepersistence.pipeline.read.FilterResult.classat rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:101)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:58)... 68 more",2,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-629,Bug,124,Closed,Test Not Passing: GeoQueryBooleanTest,null,2,3,1,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-630,Bug,124,Closed,Test Not Passing: IndexIT,null,2,3,1,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-527,Story,124,Closed,Write external ES test to ensure we get even routing across the ES cluster,One of the problems we have faced is uneven distribution in the ES cluster.  We have made changes for document routing that seemed to help but we are still getting hot nodes in the cluster.  We need to have a test that hits ES directly with load as UG would do to test our cluster distribution.,3,2,3,1,0,Senthil Kumar K,Jeffrey West,Jeffrey West,7,0,1,0,0,0,0,0
USERGRID-616,Story,125,Open,Queries using greater/less than on float fields fail,null,3,4,1,1,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-617,Story,125,Open,Queries using order by on float fields result in incorrect ordering ,null,3,4,1,1,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-618,Story,125,Closed,Additional testing of Usergrid SSO,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-640,Bug,125,Closed,Entities created on the portal during 'create collection' do not get persisted,In the portal when you use the create collection button to create a collection you now must specify the first entity on the form.  It does not appear that the entity gets persisted into the collection.This can be recreated on the Usergrid free version at http://appservices.apigee.com/index.html/#!/login,3,3,2,0,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-607,Story,125,Closed,Implement Deleting Edge out of index,querying es for all edgesdeleting in bulkasync using async index service,1,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,4,0,1,1,1,0,0,0
USERGRID-608,Story,125,Closed,Refactor/Complete Delete Entity in 2.1,can o wormsrefactor cp relation manager into async serviceasync == async event service starts processlook at indexingservice,2,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,12,12,12,0,0,0
USERGRID-632,Bug,125,Closed,Test Not Passing: PerformanceEntityRebuildIndexTest,null,1,3,3,1,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,1,1,1,0,0,0
USERGRID-664,Bug,125,Closed,Test Not Passing: RolesServiceIT.deleteRoles,null,1,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,1,1,1,0,0,0
USERGRID-662,Bug,125,Closed,Test Not Passing: AppInfoMigrationPluginTest,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-669,Story,125,Closed,Update edge and type naming conventions,null,1,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-643,Story,125,Closed,Implement Reindex By Collection,PerformanceEntityRebuildIndexTest.rebuildOneCollectionIndex:228 null,3,3,2,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,2,0,1,1,1,0,0,0
USERGRID-641,Story,125,Closed,Implement search by connections in core, EntityConnectionsIT.testEntityConnectionsMembership:271 null  EntityConnectionsIT.testEntityConnectionsSimple:79 nullare failing,3,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-672,Bug,125,Closed,Portal stores the password of an app user after it is created in clear-text,After creating an app user their password is stored in clear-text in the portal.  It should not be persisted in the session or displayed in the portal in clear-textIMPORTANT NOTE: the current version of the Portal that we use (at Apigee) is setup to enable the new Usergrid Central SSO so if it is to be deployed before Central SSO is enabled in prod then you will have to disable central SSO in the portal before deploying it.,3,3,2,1,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-572,Story,125,Closed,Add a query parameter to enable the hiding of sensitive information in API resposnes,Please add a setting that can prevent the qparams from being returned in a response and/or add a filter for accessToken and ClientID/ClientSecret to not be returned in a response.,1,2,3,1,0,Senthil Kumar K,Jeffrey West,Jeffrey West,6,0,0,0,0,0,0,0
USERGRID-657,Story,125,Closed,Graph deletes not going through. ,This call returns an empty iteratorstorageEdgeSerialization.getEdgeVersions( scope                        new SimpleSearchByEdge( edge.getSourceNode() edge.getType() edge.getTargetNode()                            Long.MAX_VALUE SearchByEdgeType.Order.ASCENDING Optional.absent() ) ); when we go to delete the edge. So since its empty it returns null and fails the test.         final Edge toBeDeletedEdge = graphManager.deleteEdge( connectionSearch ).toBlocking().firstOrDefault( null );Need to resolve this so we can fix graph tests. ,3,3,1,0,0,George Reyes,George Reyes,George Reyes,0,0,1,1,1,0,0,0
USERGRID-655,Story,125,Closed,More than one connection does not get created when running batch index on connection edges,"When running the following code in indexEntity         final Observable<IndexOperationMessage>  batches =  observable.buffer( indexFig.getIndexBatchSize() )            //map into batches based on our buffer size            .flatMap( buffer -> Observable.from( buffer )                //collect results into a single batch                .collect( () -> ei.createBatch() ( batch indexEdge ) -> {                    logger.debug( ""adding edge {} to batch for entity {}"" indexEdge entity );                    batch.index( indexEdge entity );                } )                    //return the future from the batch execution                .flatMap( batch -> batch.execute() ) );When run with more than one SearchEdge only one SearchEdge is indexed into elasticsearch. Despite both search edges having the same document id. The batch executes but only one connection gets indexed in elasticsearch. ",3,3,1,0,0,George Reyes,George Reyes,George Reyes,0,0,3,3,3,0,0,0
USERGRID-660,Bug,125,Closed,Test Not Passing: GroupServiceIT - Services,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-661,Bug,125,Closed,Test Not Passing: ServiceInvocationIT,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-663,Bug,125,Closed,Test Not Passing: ConnectionsServiceIT,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-659,Bug,125,Closed,Test Not Passing: OrganizationIT Failing,null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-579,Bug,125,Closed,Exception when trying to post/retrieve an asset from Amazon S3,"2015-04-19 13:50:15455 ERROR (http-bio-8080-exec-24) [package org.apache.usergrid.rest.exceptions] - Server Error (500):{""error"":""creation""""timestamp"":1429465815453""duration"":2""exception"":""com.google.inject.CreationException""""error_description"":""Guice creation errors:\n\n1) No implementation for com.google.common.base.Function<java.lang.String com.google.common.base.Optional<java.lang.String>> annotated with @org.jclouds.s3.Bucket() was bound.\n  while locating com.google.common.base.Function<java.lang.String com.google.common.base.Optional<java.lang.String>> annotated with @org.jclouds.s3.Bucket()\n    for parameter 0 at org.jclouds.s3.blobstore.functions.LocationFromBucketName.<init>(LocationFromBucketName.java:52)\n  at org.jclouds.s3.blobstore.config.S3BlobStoreContextModule.configure(S3BlobStoreContextModule.java:60)\n\n2) No implementation for com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>> was bound.\n  while locating com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>>\n    for parameter 7 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:43)\n\n3) No implementation for com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>> was bound.\n  while locating com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>>\n    for parameter 7 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)\n  while locating org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore\n    for parameter 0 at org.jclouds.aws.s3.blobstore.strategy.internal.ParallelMultipartUploadStrategy.<init>(ParallelMultipartUploadStrategy.java:101)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:46)\n\n4) No implementation for com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>> was bound.\n  while locating com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>>\n    for parameter 5 at org.jclouds.aws.s3.blobstore.AWSS3BlobStore.<init>(AWSS3BlobStore.java:77)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:44)\n\n5) No implementation for org.jclouds.blobstore.domain.Blob$Factory was bound.\n  while locating org.jclouds.blobstore.domain.Blob$Factory\n    for parameter 0 at org.jclouds.s3.blobstore.functions.ObjectToBlob.<init>(ObjectToBlob.java:39)\n  while locating org.jclouds.s3.blobstore.functions.ObjectToBlob\n    for parameter 10 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:43)\n\n6) No implementation for org.jclouds.blobstore.domain.Blob$Factory was bound.\n  while locating org.jclouds.blobstore.domain.Blob$Factory\n    for parameter 0 at org.jclouds.s3.blobstore.functions.ObjectToBlob.<init>(ObjectToBlob.java:39)\n  while locating org.jclouds.s3.blobstore.functions.ObjectToBlob\n    for parameter 8 at org.jclouds.aws.s3.blobstore.AWSS3BlobStore.<init>(AWSS3BlobStore.java:77)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:44)\n\n7) No implementation for org.jclouds.blobstore.domain.Blob$Factory was bound.\n  while locating org.jclouds.blobstore.domain.Blob$Factory\n    for parameter 0 at org.jclouds.s3.blobstore.functions.ObjectToBlob.<init>(ObjectToBlob.java:39)\n  while locating org.jclouds.s3.blobstore.functions.ObjectToBlob\n    for parameter 10 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)\n  while locating org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore\n    for parameter 0 at org.jclouds.aws.s3.blobstore.strategy.internal.ParallelMultipartUploadStrategy.<init>(ParallelMultipartUploadStrategy.java:101)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:46)\n\n8) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.\n  while locating org.jclouds.s3.domain.S3Object$Factory\n    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)\n  while locating org.jclouds.s3.blobstore.functions.BlobToObject\n    for parameter 1 at org.jclouds.aws.s3.blobstore.AWSS3BlobRequestSigner.<init>(AWSS3BlobRequestSigner.java:64)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.bindRequestSigner(AWSS3BlobStoreContextModule.java:51)\n\n9) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.\n  while locating org.jclouds.s3.domain.S3Object$Factory\n    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)\n  while locating org.jclouds.s3.blobstore.functions.BlobToObject\n    for parameter 12 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:43)\n\n10) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.\n  while locating org.jclouds.s3.domain.S3Object$Factory\n    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)\n  while locating org.jclouds.s3.blobstore.functions.BlobToObject\n    for parameter 10 at org.jclouds.aws.s3.blobstore.AWSS3BlobStore.<init>(AWSS3BlobStore.java:77)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:44)\n\n11) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.\n  while locating org.jclouds.s3.domain.S3Object$Factory\n    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)\n  while locating org.jclouds.s3.blobstore.functions.BlobToObject\n    for parameter 1 at org.jclouds.aws.s3.blobstore.strategy.internal.SequentialMultipartUploadStrategy.<init>(SequentialMultipartUploadStrategy.java:66)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:45)\n\n12) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.\n  while locating org.jclouds.s3.domain.S3Object$Factory\n    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)\n  while locating org.jclouds.s3.blobstore.functions.BlobToObject\n    for parameter 12 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)\n  while locating org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore\n    for parameter 0 at org.jclouds.aws.s3.blobstore.strategy.internal.ParallelMultipartUploadStrategy.<init>(ParallelMultipartUploadStrategy.java:101)\n  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:46)\n\n13) org.jclouds.rest.config.SyncToAsyncHttpApiProvider<org.jclouds.rest.HttpClient A> cannot be used as a key; It is not fully specified.\n\n14) org.jclouds.rest.config.SyncToAsyncHttpApiProvider<org.jclouds.aws.s3.AWSS3Client A> cannot be used as a key; It is not fully specified.\n\n15) org.jclouds.rest.RestContext<org.jclouds.aws.s3.AWSS3Client A> cannot be used as a key; It is not fully specified.\n\n16) No implementation for org.jclouds.rest.HttpClient was bound.\n  at org.jclouds.rest.config.BinderUtils.bindHttpApiProvider(BinderUtils.java:107)\n\n17) No implementation for org.jclouds.aws.s3.AWSS3Client was bound.\n  at org.jclouds.rest.config.BinderUtils.bindHttpApiProvider(BinderUtils.java:107)\n\n17 errors""}2015-04-19 13:50:19598 ERROR (http-bio-8080-exec-25) [package org.apache.usergrid.rest.exceptions] - com.google.inject.CreationException Server Error (500)com.google.inject.CreationException: Guice creation errors:1) No implementation for com.google.common.base.Function<java.lang.String com.google.common.base.Optional<java.lang.String>> annotated with @org.jclouds.s3.Bucket() was bound.  while locating com.google.common.base.Function<java.lang.String com.google.common.base.Optional<java.lang.String>> annotated with @org.jclouds.s3.Bucket()    for parameter 0 at org.jclouds.s3.blobstore.functions.LocationFromBucketName.<init>(LocationFromBucketName.java:52)  at org.jclouds.s3.blobstore.config.S3BlobStoreContextModule.configure(S3BlobStoreContextModule.java:60)2) No implementation for com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>> was bound.  while locating com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>>    for parameter 7 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:43)3) No implementation for com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>> was bound.  while locating com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>>    for parameter 7 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)  while locating org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore    for parameter 0 at org.jclouds.aws.s3.blobstore.strategy.internal.ParallelMultipartUploadStrategy.<init>(ParallelMultipartUploadStrategy.java:101)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:46)4) No implementation for com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>> was bound.  while locating com.google.common.base.Function<java.util.Set<org.jclouds.s3.domain.BucketMetadata> org.jclouds.blobstore.domain.PageSet<? extends org.jclouds.blobstore.domain.StorageMetadata>>    for parameter 5 at org.jclouds.aws.s3.blobstore.AWSS3BlobStore.<init>(AWSS3BlobStore.java:77)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:44)5) No implementation for org.jclouds.blobstore.domain.Blob$Factory was bound.  while locating org.jclouds.blobstore.domain.Blob$Factory    for parameter 0 at org.jclouds.s3.blobstore.functions.ObjectToBlob.<init>(ObjectToBlob.java:39)  while locating org.jclouds.s3.blobstore.functions.ObjectToBlob    for parameter 10 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:43)6) No implementation for org.jclouds.blobstore.domain.Blob$Factory was bound.  while locating org.jclouds.blobstore.domain.Blob$Factory    for parameter 0 at org.jclouds.s3.blobstore.functions.ObjectToBlob.<init>(ObjectToBlob.java:39)  while locating org.jclouds.s3.blobstore.functions.ObjectToBlob    for parameter 8 at org.jclouds.aws.s3.blobstore.AWSS3BlobStore.<init>(AWSS3BlobStore.java:77)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:44)7) No implementation for org.jclouds.blobstore.domain.Blob$Factory was bound.  while locating org.jclouds.blobstore.domain.Blob$Factory    for parameter 0 at org.jclouds.s3.blobstore.functions.ObjectToBlob.<init>(ObjectToBlob.java:39)  while locating org.jclouds.s3.blobstore.functions.ObjectToBlob    for parameter 10 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)  while locating org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore    for parameter 0 at org.jclouds.aws.s3.blobstore.strategy.internal.ParallelMultipartUploadStrategy.<init>(ParallelMultipartUploadStrategy.java:101)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:46)8) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.  while locating org.jclouds.s3.domain.S3Object$Factory    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)  while locating org.jclouds.s3.blobstore.functions.BlobToObject    for parameter 1 at org.jclouds.aws.s3.blobstore.AWSS3BlobRequestSigner.<init>(AWSS3BlobRequestSigner.java:64)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.bindRequestSigner(AWSS3BlobStoreContextModule.java:51)9) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.  while locating org.jclouds.s3.domain.S3Object$Factory    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)  while locating org.jclouds.s3.blobstore.functions.BlobToObject    for parameter 12 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:43)10) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.  while locating org.jclouds.s3.domain.S3Object$Factory    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)  while locating org.jclouds.s3.blobstore.functions.BlobToObject    for parameter 10 at org.jclouds.aws.s3.blobstore.AWSS3BlobStore.<init>(AWSS3BlobStore.java:77)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:44)11) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.  while locating org.jclouds.s3.domain.S3Object$Factory    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)  while locating org.jclouds.s3.blobstore.functions.BlobToObject    for parameter 1 at org.jclouds.aws.s3.blobstore.strategy.internal.SequentialMultipartUploadStrategy.<init>(SequentialMultipartUploadStrategy.java:66)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:45)12) No implementation for org.jclouds.s3.domain.S3Object$Factory was bound.  while locating org.jclouds.s3.domain.S3Object$Factory    for parameter 1 at org.jclouds.s3.blobstore.functions.BlobToObject.<init>(BlobToObject.java:38)  while locating org.jclouds.s3.blobstore.functions.BlobToObject    for parameter 12 at org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore.<init>(AWSS3AsyncBlobStore.java:85)  while locating org.jclouds.aws.s3.blobstore.AWSS3AsyncBlobStore    for parameter 0 at org.jclouds.aws.s3.blobstore.strategy.internal.ParallelMultipartUploadStrategy.<init>(ParallelMultipartUploadStrategy.java:101)  at org.jclouds.aws.s3.blobstore.config.AWSS3BlobStoreContextModule.configure(AWSS3BlobStoreContextModule.java:46)13) org.jclouds.rest.config.SyncToAsyncHttpApiProvider<org.jclouds.rest.HttpClient A> cannot be used as a key; It is not fully specified.14) org.jclouds.rest.config.SyncToAsyncHttpApiProvider<org.jclouds.aws.s3.AWSS3Client A> cannot be used as a key; It is not fully specified.15) org.jclouds.rest.RestContext<org.jclouds.aws.s3.AWSS3Client A> cannot be used as a key; It is not fully specified.16) No implementation for org.jclouds.rest.HttpClient was bound.  at org.jclouds.rest.config.BinderUtils.bindHttpApiProvider(BinderUtils.java:107)17) No implementation for org.jclouds.aws.s3.AWSS3Client was bound.  at org.jclouds.rest.config.BinderUtils.bindHttpApiProvider(BinderUtils.java:107)17 errorsat com.google.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:435)at com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:154)at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)at com.google.inject.Guice.createInjector(Guice.java:95)at org.jclouds.ContextBuilder.buildInjector(ContextBuilder.java:405)at org.jclouds.ContextBuilder.buildInjector(ContextBuilder.java:329)at org.jclouds.ContextBuilder.buildView(ContextBuilder.java:620)at org.jclouds.ContextBuilder.buildView(ContextBuilder.java:600)at org.apache.usergrid.services.assets.data.S3BinaryStore.getContext(S3BinaryStore.java:87)at org.apache.usergrid.services.assets.data.S3BinaryStore.read(S3BinaryStore.java:190)at org.apache.usergrid.services.assets.data.S3BinaryStore.read(S3BinaryStore.java:208)at org.apache.usergrid.rest.applications.ServiceResource.executeStreamGet(ServiceResource.java:642)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:606)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:380)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:91)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:745)",3,3,3,1,0,David Johnson,Jan Moritz Lindemann,Jan Moritz Lindemann,12,0,0,0,0,0,0,0
USERGRID-616,Story,126,Open,Queries using greater/less than on float fields fail,null,3,4,1,1,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-617,Story,126,Open,Queries using order by on float fields result in incorrect ordering ,null,3,4,1,1,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-618,Story,126,Closed,Additional testing of Usergrid SSO,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-678,Bug,126,Closed,ElasticSearch Type Mapping has _all in wrong place,_all should be moved to a child of 'entity',1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-676,Story,126,Closed,"Update mapping to use ""dynamic"": ""strict"" to prevent new fields from being added dynamically","""dynamic"": ""strict""We should ensure this is not used per https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-dynamic-mapping.html",1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-640,Bug,126,Closed,Entities created on the portal during 'create collection' do not get persisted,In the portal when you use the create collection button to create a collection you now must specify the first entity on the form.  It does not appear that the entity gets persisted into the collection.This can be recreated on the Usergrid free version at http://appservices.apigee.com/index.html/#!/login,3,3,2,0,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-607,Story,126,Closed,Implement Deleting Edge out of index,querying es for all edgesdeleting in bulkasync using async index service,1,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,4,0,1,1,1,0,0,0
USERGRID-608,Story,126,Closed,Refactor/Complete Delete Entity in 2.1,can o wormsrefactor cp relation manager into async serviceasync == async event service starts processlook at indexingservice,2,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,12,12,12,0,0,0
USERGRID-680,Story,126,Closed,Merge master -> two-dot-o: SSO & Assets changes,null,1,3,1,2,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-632,Bug,126,Closed,Test Not Passing: PerformanceEntityRebuildIndexTest,null,1,3,3,1,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,1,1,1,0,0,0
USERGRID-664,Bug,126,Closed,Test Not Passing: RolesServiceIT.deleteRoles,null,1,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,1,1,1,0,0,0
USERGRID-662,Bug,126,Closed,Test Not Passing: AppInfoMigrationPluginTest,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-669,Story,126,Closed,Update edge and type naming conventions,null,1,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-633,Bug,126,Closed,Test Not Passing: PermissionsIT,null,0,3,2,1,0,ryan bridges,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-634,Bug,126,Closed,Test Not Passing: EntityManagerFactoryImplIT,null,1,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-627,Bug,126,Closed,Test Not Passing: EntityManagerIT,null,0,3,2,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-628,Bug,126,Closed,Test Not Passing: GeoIT,null,1,3,4,1,0,Todd Nine,Jeffrey West,Jeffrey West,4,0,1,1,1,0,0,0
USERGRID-589,Story,126,Closed,Complete SNS/SQS async indexing api,Publish to SNSConsume from SQSComplete the SQS indexing impl with the new message endpointadd new interface for sqs vs in memory service ,3,3,3,1,0,Jeffrey West,Todd Nine,Todd Nine,3,0,0,0,0,0,0,0
USERGRID-584,Bug,126,Closed,Test Not Passing: staleIndexCleanup,Seems like all of the stale entities aren't being cleaned up. ,1,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,1,1,1,0,0,0
USERGRID-587,Bug,126,Closed,Test Not Passing: IteratingQueryIT + collectionIT,null,1,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,2,2,2,0,0,0
USERGRID-612,Bug,126,Closed,Test Not Passing:  EntityConnectionsIT,null,3,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-643,Story,126,Closed,Implement Reindex By Collection,PerformanceEntityRebuildIndexTest.rebuildOneCollectionIndex:228 null,3,3,2,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,2,0,1,1,1,0,0,0
USERGRID-641,Story,126,Closed,Implement search by connections in core, EntityConnectionsIT.testEntityConnectionsMembership:271 null  EntityConnectionsIT.testEntityConnectionsSimple:79 nullare failing,3,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-672,Bug,126,Closed,Portal stores the password of an app user after it is created in clear-text,After creating an app user their password is stored in clear-text in the portal.  It should not be persisted in the session or displayed in the portal in clear-textIMPORTANT NOTE: the current version of the Portal that we use (at Apigee) is setup to enable the new Usergrid Central SSO so if it is to be deployed before Central SSO is enabled in prod then you will have to disable central SSO in the portal before deploying it.,3,3,2,1,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-610,Story,126,Closed,Core Tests...,write more stories,null,3,2,0,0,ryan bridges,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-677,Story,126,Closed,Create new parser for Scrolling api,Currently we only do search results and parse those results under the assumption that we will only do one search. As we query elasticsearch we want to be able to use the scrolling api to batch pull all the results we can find from elasticsearch. ,1,3,1,1,0,George Reyes,George Reyes,George Reyes,2,0,1,1,1,0,0,0
USERGRID-616,Story,129,Open,Queries using greater/less than on float fields fail,null,3,4,1,1,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-617,Story,129,Open,Queries using order by on float fields result in incorrect ordering ,null,3,4,1,1,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-652,Story,129,Closed,Index Routing/Location Strategy,We should consider implementing a proxy which provides the index being used for an application.  This proxy should provide both the Index strategy and the entity type mapping strategy.The goal is to provide a point where we can implement a strategy function that could do one (or more) of the following strategies for indexes:- Single index per cluster (static index allocation)- Index per org/app (dynamic index allocation)- Index per org (dynamic index allocation)- Index per cluster (dynamic index allocation)- Index per customer (dynamic index allocation)- Hash/bucketing across a fixed range of indexes (static index allocation)- Per environment (TBD)- Static (for the management app should always match the Cassandra keyspace name as the index)In order to do this we need to update EntityIndexFactory.createApplicationEntityIndex.For Entity Type Mapping the goal is to enable bucketing of entity types (collections) in a manner that can be more optimal for the indexing strategy that is chosen.  For example a single index strategy might have a single entity type but for the index per org/app it might have a separate entity type.  Looking up the management index would have a strategy where the index name matches the cassandra keyspace name,5,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-698,Bug,129,Closed,Test Not Passing: ConnectionResourceTest.connectionsLoopbackTest:103 NullPointer,null,2,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-618,Story,129,Closed,Additional testing of Usergrid SSO,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-678,Bug,129,Closed,ElasticSearch Type Mapping has _all in wrong place,_all should be moved to a child of 'entity',1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-676,Story,129,Closed,"Update mapping to use ""dynamic"": ""strict"" to prevent new fields from being added dynamically","""dynamic"": ""strict""We should ensure this is not used per https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-dynamic-mapping.html",1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-640,Bug,129,Closed,Entities created on the portal during 'create collection' do not get persisted,In the portal when you use the create collection button to create a collection you now must specify the first entity on the form.  It does not appear that the entity gets persisted into the collection.This can be recreated on the Usergrid free version at http://appservices.apigee.com/index.html/#!/login,3,3,2,0,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-607,Story,129,Closed,Implement Deleting Edge out of index,querying es for all edgesdeleting in bulkasync using async index service,1,3,3,1,0,George Reyes,Shawn Feldman,Shawn Feldman,4,0,1,1,1,0,0,0
USERGRID-608,Story,129,Closed,Refactor/Complete Delete Entity in 2.1,can o wormsrefactor cp relation manager into async serviceasync == async event service starts processlook at indexingservice,2,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,12,12,12,0,0,0
USERGRID-680,Story,129,Closed,Merge master -> two-dot-o: SSO & Assets changes,null,1,3,1,2,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-632,Bug,129,Closed,Test Not Passing: PerformanceEntityRebuildIndexTest,null,1,3,3,1,0,ryan bridges,Jeffrey West,Jeffrey West,2,0,1,1,1,0,0,0
USERGRID-664,Bug,129,Closed,Test Not Passing: RolesServiceIT.deleteRoles,null,1,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,1,1,1,0,0,0
USERGRID-662,Bug,129,Closed,Test Not Passing: AppInfoMigrationPluginTest,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-669,Story,129,Closed,Update edge and type naming conventions,null,1,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-633,Bug,129,Closed,Test Not Passing: PermissionsIT,null,0,3,2,1,0,ryan bridges,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-634,Bug,129,Closed,Test Not Passing: EntityManagerFactoryImplIT,null,1,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-627,Bug,129,Closed,Test Not Passing: EntityManagerIT,null,0,3,2,0,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,1,1,1,0,0,0
USERGRID-628,Bug,129,Closed,Test Not Passing: GeoIT,null,1,3,4,1,0,Todd Nine,Jeffrey West,Jeffrey West,4,0,1,1,1,0,0,0
USERGRID-589,Story,129,Closed,Complete SNS/SQS async indexing api,Publish to SNSConsume from SQSComplete the SQS indexing impl with the new message endpointadd new interface for sqs vs in memory service ,3,3,3,1,0,Jeffrey West,Todd Nine,Todd Nine,3,0,0,0,0,0,0,0
USERGRID-584,Bug,129,Closed,Test Not Passing: staleIndexCleanup,Seems like all of the stale entities aren't being cleaned up. ,1,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,1,1,1,0,0,0
USERGRID-587,Bug,129,Closed,Test Not Passing: IteratingQueryIT + collectionIT,null,1,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,2,2,2,0,0,0
USERGRID-612,Bug,129,Closed,Test Not Passing:  EntityConnectionsIT,null,3,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-685,Bug,129,Closed,Test Not Passing: ConnectionsServiceIT.testEntityConnections,null,3,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-686,Bug,129,Closed,Test Not Passing: PagingResourceIT,there are two test failures in intelliJ testCursor: org.junit.ComparisonFailure: Expected :1Actual   :11 <Click to see difference>at org.junit.Assert.assertEquals(Assert.java:115)at org.junit.Assert.assertEquals(Assert.java:144)at org.apache.usergrid.rest.applications.collection.paging.PagingResourceIT.pageAndVerifyEntities(PagingResourceIT.java:305)at org.apache.usergrid.rest.applications.collection.paging.PagingResourceIT.testCursor(PagingResourceIT.java:149)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:82)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)at org.junit.runners.ParentRunner.run(ParentRunner.java:363)at org.junit.runner.JUnitCore.run(JUnitCore.java:137)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)andpagingEntitiesorg.junit.ComparisonFailure: Expected :1Actual   :100 <Click to see difference>at org.junit.Assert.assertEquals(Assert.java:115)at org.junit.Assert.assertEquals(Assert.java:144)at org.apache.usergrid.rest.applications.collection.paging.PagingResourceIT.pageAndVerifyEntities(PagingResourceIT.java:305)at org.apache.usergrid.rest.applications.collection.paging.PagingResourceIT.pagingEntities(PagingResourceIT.java:177)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)at org.apache.usergrid.rest.test.resource2point0.ClientSetup$1.evaluate(ClientSetup.java:82)at org.junit.rules.RunRules.evaluate(RunRules.java:20)at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)at org.junit.runners.ParentRunner.run(ParentRunner.java:363)at org.junit.runner.JUnitCore.run(JUnitCore.java:137)at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at com.intellij.rt.execution.application.AppMain.main(AppMain.java:140),2,3,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-690,Bug,129,Closed,Test Not Passing: OrganizationsIT,null,2,3,1,1,0,George Reyes,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-700,Bug,129,Closed,Test Not Passing: StaleIndexCleanupTests,Results :Failed tests:  StaleIndexCleanupTest.testCleanupOnUpdate:462 Expect candidates without earlier stale entities expected:<10> but was:<60>Tests run: 258 Failures: 1 Errors: 0 Skipped: 25,1,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-702,Story,129,Closed,Rest tests return 403 when run in maven but pass in intelliJ,So I'm getting responses like the following:com.sun.jersey.api.client.UniformInterfaceException: POST http://localhost:10003/management/token returned a response status of 403 Forbiddenat com.sun.jersey.api.client.WebResource.handle(WebResource.java:688)at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570)at org.apache.usergrid.rest.test.resource2point0.endpoints.NamedResource.post(NamedResource.java:192)at org.apache.usergrid.rest.test.resource2point0.AbstractRestIT.getAdminToken(AbstractRestIT.java:167)at org.apache.usergrid.rest.management.OrganizationsIT.testCreateOrgUserAndReturnCorrectUsername(OrganizationsIT.java:332)testCreateDuplicateOrgEmail(org.apache.usergrid.rest.management.OrganizationsIT)  Time elapsed: 0.988 sec  <<< ERROR!com.sun.jersey.api.client.UniformInterfaceException: POST http://localhost:10003/management/token returned a response status of 403 Forbiddenat com.sun.jersey.api.client.WebResource.handle(WebResource.java:688)at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570)at org.apache.usergrid.rest.test.resource2point0.endpoints.NamedResource.post(NamedResource.java:192)at org.apache.usergrid.rest.management.OrganizationsIT.testCreateDuplicateOrgEmail(OrganizationsIT.java:172)testOrgPOSTForm(org.apache.usergrid.rest.management.OrganizationsIT)  Time elapsed: 0.819 sec  <<< ERROR!com.sun.jersey.api.client.UniformInterfaceException: POST http://localhost:10003/management/token returned a response status of 403 Forbiddenat com.sun.jersey.api.client.WebResource.handle(WebResource.java:688)at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570)at org.apache.usergrid.rest.test.resource2point0.endpoints.NamedResource.post(NamedResource.java:192)at org.apache.usergrid.rest.management.OrganizationsIT.testOrgPOSTForm(OrganizationsIT.java:277)createOrgAndOwner(org.apache.usergrid.rest.management.OrganizationsIT)  Time elapsed: 0.774 sec  <<< ERROR!com.sun.jersey.api.client.UniformInterfaceException: POST http://localhost:10003/management/token returned a response status of 403 Forbiddenat com.sun.jersey.api.client.WebResource.handle(WebResource.java:688)at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570)at org.apache.usergrid.rest.test.resource2point0.endpoints.NamedResource.post(NamedResource.java:192)at org.apache.usergrid.rest.management.OrganizationsIT.createOrgAndOwner(OrganizationsIT.java:80)testCreateDuplicateOrgName(org.apache.usergrid.rest.management.OrganizationsIT)  Time elapsed: 0.975 sec  <<< ERROR!com.sun.jersey.api.client.UniformInterfaceException: POST http://localhost:10003/management/token returned a response status of 403 Forbiddenat com.sun.jersey.api.client.WebResource.handle(WebResource.java:688)at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74)at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570)at org.apache.usergrid.rest.test.resource2point0.endpoints.NamedResource.post(NamedResource.java:192)at org.apache.usergrid.rest.management.OrganizationsIT.testCreateDuplicateOrgName(OrganizationsIT.java:118)So Calls to management/token are failing with 403 errors. I suspect it might be due to the new testing framework but further investigation is needed,5,3,1,1,0,George Reyes,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-699,Bug,129,Closed,Test Not Passing:  NotificationsIT.testPaging:90,null,2,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-704,Bug,129,Closed,Test Not Passing: DevicesresourceIT ,seems to be a graph compaction issue DevicesResourceIT.putWithUUIDShouldCreateAfterDelete,1,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-687,Bug,129,Closed,Test Not Passing: AndOrQueryTest,Fix AndOrQueryTest:queryReturnCheckqueryReturnCheckWithShortHand,1,3,1,1,0,George Reyes,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-697,Bug,129,Closed,Test Not Passing: AdminUsersIT,AdminUsersIT.mgmtUserFeed:190 ┬╗ UniformInterface GET http://localhost:10006/ma...,2,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-695,Bug,129,Closed,Test Not Passing: RegistrationIT, RegistrationIT.addExistingAdminUserToOrganization:304 ┬╗ UniformInterface POST ...  RegistrationIT.addNewAdminUserWithNoPwdToOrganization:245->postAddAdminToOrg:90 ┬╗ ClientHandler  RegistrationIT.postAddToOrganization:222->AbstractRestIT.getAdminToken:173 ┬╗ UniformInterface  RegistrationIT.postCreateOrgAndAdmin:134->AbstractRestIT.getAdminToken:173 ┬╗ UniformInterface  RegistrationIT.putAddToOrganizationFail:195->AbstractRestIT.getAdminToken:173 ┬╗ UniformInterface,2,3,2,1,0,George Reyes,Shawn Feldman,Shawn Feldman,3,0,0,0,0,0,0,0
USERGRID-693,Bug,129,Closed,Test Not Passing: ContentTypeResourceIT,ContentTypeResourceIT.formEncodedContentType:152 expected:<200> but was:<500>  ContentTypeResourceIT.noAcceptGet:262 expected:<200> but was:<400>,2,3,1,1,0,George Reyes,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-696,Story,129,Closed,AdminEmailEncodingIT, AdminEmailEncodingIT.getTokenDash:73->doTest:116 ┬╗ UniformInterface POST http:...  AdminEmailEncodingIT.getTokenPlus:53->doTest:116 ┬╗ UniformInterface POST http:...  AdminEmailEncodingIT.getTokenUnderscore:63->doTest:116 ┬╗ UniformInterface POST...,2,3,2,0,0,George Reyes,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-689,Bug,129,Closed,Test Not Passing:  ManagementResourceIT,11 tests failing,2,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-670,Bug,133,Closed,App Credentials do not work when accessing a collection within an app (2.0),In order to access collections it seems the org credentials are required as app credentials do not work.  ,5,3,3,1,0,George Reyes,Jeffrey West,Jeffrey West,7,0,0,0,0,0,0,0
USERGRID-652,Story,133,Closed,Index Routing/Location Strategy,We should consider implementing a proxy which provides the index being used for an application.  This proxy should provide both the Index strategy and the entity type mapping strategy.The goal is to provide a point where we can implement a strategy function that could do one (or more) of the following strategies for indexes:- Single index per cluster (static index allocation)- Index per org/app (dynamic index allocation)- Index per org (dynamic index allocation)- Index per cluster (dynamic index allocation)- Index per customer (dynamic index allocation)- Hash/bucketing across a fixed range of indexes (static index allocation)- Per environment (TBD)- Static (for the management app should always match the Cassandra keyspace name as the index)In order to do this we need to update EntityIndexFactory.createApplicationEntityIndex.For Entity Type Mapping the goal is to enable bucketing of entity types (collections) in a manner that can be more optimal for the indexing strategy that is chosen.  For example a single index strategy might have a single entity type but for the index per org/app it might have a separate entity type.  Looking up the management index would have a strategy where the index name matches the cassandra keyspace name,5,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-698,Bug,133,Closed,Test Not Passing: ConnectionResourceTest.connectionsLoopbackTest:103 NullPointer,null,2,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-688,Story,133,Closed,Fix Graph Compact Operations.  ,when mark node in graph is called the compact needs to be called before you add the same relationship back to the graph.  this should not be the case,5,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-556,Story,133,Closed,Update Index prefix for management app to use the cassandra keyspace name,We need to replicate and test the reindex oscillation issue in the e2e environment.,1,2,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-618,Story,133,Closed,Additional testing of Usergrid SSO,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-678,Bug,133,Closed,ElasticSearch Type Mapping has _all in wrong place,_all should be moved to a child of 'entity',1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-676,Story,133,Closed,"Update mapping to use ""dynamic"": ""strict"" to prevent new fields from being added dynamically","""dynamic"": ""strict""We should ensure this is not used per https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-dynamic-mapping.html",1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-703,Bug,133,Closed,Test Not Passing: ManagementResourceIT,testSuperuserOnlyWhenValidateExternalTokensEnabledand the other external test are broken.,2,3,3,1,0,David Johnson,Shawn Feldman,Shawn Feldman,7,0,0,0,0,0,0,0
USERGRID-692,Bug,133,Closed,Test Not Passing: PermissionsResourceIT,  PermissionsResourceIT.applicationPermissions:262 expected:<[noca]> but was:<[4peaks]>  PermissionsResourceIT.deleteUserGroup:157 null,2,3,1,1,0,George Reyes,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-705,Story,133,Closed,Add organizations to Admin User import/export (usergrid-tools.jar),TBD,3,3,1,1,1,David Johnson,David Johnson,David Johnson,3,0,0,0,0,0,0,0
USERGRID-671,Bug,133,Closed,401 ServiceResourceNotFoundException instead of expected 404,When you do a get by name/uuid of an entity which does not exist a 401 error is returned instead of a 404.,2,3,3,1,0,George Reyes,Jeffrey West,Jeffrey West,5,0,0,0,0,0,0,0
USERGRID-613,Bug,133,Closed,Reindex endpoint should not be case-sensitive,the reindex endpoint: http://localhost:8080/system/index/rebuild/a34ad389-b626-11e4-848f-06b49118d7d0/Storelatlonsdoes not work due to case sensitivity.,1,3,3,1,0,George Reyes,Jeffrey West,Jeffrey West,8,0,0,0,0,0,0,0
USERGRID-666,Story,133,Closed,1.0.2 Release Candidate 1,null,2,3,2,1,1,David Johnson,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-715,Story,133,Closed,Decrease line spacing/padding so that more data is visible in list views,null,1,3,1,1,0,ryan bridges,ryan bridges,ryan bridges,1,0,0,0,0,0,0,0
USERGRID-714,Story,133,Closed,Reorganize the query area on data view so that more of the data is visible,null,2,3,1,1,0,ryan bridges,ryan bridges,ryan bridges,0,0,0,0,0,0,0,0
USERGRID-713,Story,133,Closed,Don't modify the path when an entity is selected in the data view,null,2,3,1,1,0,ryan bridges,ryan bridges,ryan bridges,0,0,0,0,0,0,0,0
USERGRID-709,Story,133,Closed,Notifications disappear too quickly. Increase timeout and have them stay on mouseover,null,2,3,1,1,0,ryan bridges,ryan bridges,ryan bridges,1,0,0,0,0,0,0,0
USERGRID-725,Bug,133,Closed,SNSQueueManagerImpl needs better error handling and messaging,It would be better if this was preceded by a message stating which queue cannot be found.com.amazonaws.services.sqs.model.QueueDoesNotExistException: The specified queue does not exist for this wsdl version. (Service: AmazonSQS; Status Code: 400; Error Code: AWS.SimpleQueueService.NonExistentQueue; Request ID: 70c94af9-7d46-5d2b-9a7e-07155ddd1ed5)at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1160)at com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:748)at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:467)at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:302)at com.amazonaws.services.sqs.AmazonSQSClient.invoke(AmazonSQSClient.java:2422)at com.amazonaws.services.sqs.AmazonSQSClient.receiveMessage(AmazonSQSClient.java:1130)at org.apache.usergrid.persistence.queue.impl.SNSQueueManagerImpl.getMessages(SNSQueueManagerImpl.java:234)at org.apache.usergrid.corepersistence.asyncevents.AmazonAsyncEventService.take(AmazonAsyncEventService.java:153)at org.apache.usergrid.corepersistence.asyncevents.AmazonAsyncEventService.access$300(AmazonAsyncEventService.java:66)at org.apache.usergrid.corepersistence.asyncevents.AmazonAsyncEventService$2.call(AmazonAsyncEventService.java:379)at org.apache.usergrid.corepersistence.asyncevents.AmazonAsyncEventService$2.call(AmazonAsyncEventService.java:366)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:62)at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)at java.util.concurrent.FutureTask.run(FutureTask.java:266)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at java.lang.Thread.run(Thread.java:745),1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-726,Story,133,Closed,Audit and review JMX Metrics for consistency,"JMX Metrics have varying names and formats.  It would be helpful to standardize them.  Lets take a pass and rename them to have an ""x.y"" pattern.  Where x=object/concept and y=attribute/action.  If there is no explicit y y should be 'base'.Here is an example:this.deleteApplicationMeter = metricsFactory.getMeter(EsApplicationEntityIndexImpl.class ""application.delete"");https://github.com/apache/incubator-usergrid/pull/269",2,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-729,Bug,133,Closed,SNS Queue Manager uses ARN to read instead of URL,There is a bug in org.apache.usergrid.persistence.queue.impl.SNSQueueManagerImpl which results in the ARN of the queue being used when the URL should be used.,1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-473,Story,133,Closed,Add Dead Letter Queue,null,3,3,2,1,0,Jeffrey West,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-740,Bug,138,Closed,Temp files from asset upload not removed causing the file system to use all inodes,After running Usergrid 2.0 for over 1 month on a tomcat we have saturated the inodes of the disk on the tomcat machine.  Our temporary files for uploads are not getting removed.  Files of this structure appear in {code} ls -lrt  /var/cache/tomcat7/temp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME377627531473294092.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME2634951521985073318.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME1066361445384372180.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME3554741621747313255.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME1805372544199883785.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME414525331725926400.tmp{code}We need to ensure that all temporary files are removed.  Note that all the files remaining are 0 bytes.  This seems to be caused by an edge case when a 0 byte file is uploaded or possibly the upload is failing.,5,2,3,1,0,George Reyes,Todd Nine,Todd Nine,4,0,1,1,1,0,0,0
USERGRID-724,Story,138,Closed,JMX Metrics/Counters for Cassandra,Would be nice to add metrics and counters at the lower level for bytes in/out Cassandra and latency,1,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-586,Story,138,Closed,Test app_info migration,null,3,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-701,Story,138,Open,Rewrite Registration tests to fully cover the registration flow.,The current set of tests have very few comments and don't logically make sense in some cases. We need more tests to expose the registration flow and possible edge cases when certain properties aren't correctly set. ,3,4,1,1,2,null,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-750,Bug,138,Closed,When setting accesstokenttl to 0 client credentials auth still returns 604800,"If I send a PUT request to set the accesstokenttl to 0 for an app:{code}{    ""accesstokenttl"": 0}{code}And then make a subsequent client_credentials token request the token ttl in the response is still 604800:{code}{    ""client_id"": ""***""    ""client_secret"": ""***""    ""grant_type"": ""client_credentials""    ""ttl"": 0}{code}Response: {code}{    ""access_token"": ""***""    ""expires_in"": 604800    ""application"": ""***""}{code}[~tnine] suggests this may be a response rendering problem and that it is actually setting the expiration correctly in the stack.",3,4,2,1,0,George Reyes,Brandon Shelley,Brandon Shelley,1,0,0,0,0,0,0,0
USERGRID-670,Bug,138,Closed,App Credentials do not work when accessing a collection within an app (2.0),In order to access collections it seems the org credentials are required as app credentials do not work.  ,5,3,3,1,0,George Reyes,Jeffrey West,Jeffrey West,7,0,0,0,0,0,0,0
USERGRID-755,Bug,138,Closed,MVCC serialization error on reindex,2015-06-16 22:06:31223 [http-bio-8080-exec-15] ERROR org.apache.usergrid.persistence.collection.serialization.impl.MvccLogEntrySerializationStrategyImpl- DATA CORRUPTION DETECTED when de-serializing entity with Id SimpleId{uuid=2034290e-109c-11e5-a3f5-06b0ee5388b2 type='user'}.  This means the write was truncated.org.apache.usergrid.persistence.collection.exception.DataCorruptionException: Unable to read entity dataat org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$EntitySerializer.fromByteBuffer(MvccEntitySerializationStrategyV3Impl.java:457)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$EntitySerializer.fromByteBuffer(MvccEntitySerializationStrategyV3Impl.java:365)at com.netflix.astyanax.serializers.AbstractSerializer.fromBytes(AbstractSerializer.java:42)at com.netflix.astyanax.thrift.model.ThriftColumnImpl.getValue(ThriftColumnImpl.java:58)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$MvccColumnParser.parseColumn(MvccEntitySerializationStrategyV3Impl.java:346)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl.lambda$load$13(MvccEntitySerializationStrategyV3Impl.java:210)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$$Lambda$23/1238550786.call(Unknown Source)at rx.Observable$5.call(Observable.java:3534)at rx.internal.operators.OperatorScan$2.onNext(OperatorScan.java:104)at rx.observers.SerializedObserver.onNext(SerializedObserver.java:159)at rx.observers.SerializedSubscriber.onNext(SerializedSubscriber.java:95)at rx.internal.operators.NotificationLite.accept(NotificationLite.java:150)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber.drain(OperatorMergeMaxConcurrent.java:265)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber$MergeItemSubscriber.onNext(OperatorMergeMaxConcurrent.java:325)at rx.internal.operators.OperatorSubscribeOn$1$1$1.onNext(OperatorSubscribeOn.java:76)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:43)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:32)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:62)at rx.schedulers.ImmediateScheduler$InnerImmediateScheduler.schedule(ImmediateScheduler.java:58)at rx.internal.operators.OperatorSubscribeOn$1.onNext(OperatorSubscribeOn.java:57)at rx.internal.operators.OperatorSubscribeOn$1.onNext(OperatorSubscribeOn.java:43)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:43)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:32)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber.subscribeNext(OperatorMergeMaxConcurrent.java:147)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber.onNext(OperatorMergeMaxConcurrent.java:126)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber.onNext(OperatorMergeMaxConcurrent.java:68)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorBufferWithSize$1.onNext(OperatorBufferWithSize.java:103)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.internal.operators.OperatorBufferWithSize$1$1.request(OperatorBufferWithSize.java:88)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.Subscriber.setProducer(Subscriber.java:171)at rx.internal.operators.OperatorBufferWithSize$1.setProducer(OperatorBufferWithSize.java:74)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.subscribe(Observable.java:7585)at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:442)at rx.observables.BlockingObservable.last(BlockingObservable.java:229)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl.load(MvccEntitySerializationStrategyV3Impl.java:215)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyProxyImpl.load(MvccEntitySerializationStrategyProxyImpl.java:95)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:246)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:240)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.subscribe(Observable.java:7585)at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:442)at rx.observables.BlockingObservable.lastOrDefault(BlockingObservable.java:262)at org.apache.usergrid.corepersistence.CpEntityManager.load(CpEntityManager.java:316)at org.apache.usergrid.corepersistence.CpEntityManager.get(CpEntityManager.java:454)at org.apache.usergrid.corepersistence.CpEntityManager.get(CpEntityManager.java:2344)at org.apache.usergrid.management.cassandra.ManagementServiceImpl.getUserEntityByIdentifier(ManagementServiceImpl.java:1060)at org.apache.usergrid.management.cassandra.ManagementServiceImpl.findUserEntity(ManagementServiceImpl.java:1132)at org.apache.usergrid.management.cassandra.ManagementServiceImpl.verifyAdminUserPasswordCredentials(ManagementServiceImpl.java:1277)at org.apache.usergrid.rest.management.ManagementResource.getAccessTokenInternal(ManagementResource.java:256)at org.apache.usergrid.rest.management.ManagementResource.getAccessTokenPostJson(ManagementResource.java:396)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:483)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:745)Caused by: java.io.CharConversionException: Invalid UTF-32 character 0x7d000000(above 10ffff)  at char #1 byte #7)at com.fasterxml.jackson.core.io.UTF32Reader.reportInvalid(UTF32Reader.java:155)at com.fasterxml.jackson.core.io.UTF32Reader.read(UTF32Reader.java:109)at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.loadMore(ReaderBasedJsonParser.java:131)at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._skipWSOrEnd(ReaderBasedJsonParser.java:1688)at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:562)at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:3031)at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:2978)at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2167)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$EntitySerializer.fromByteBuffer(MvccEntitySerializationStrategyV3Impl.java:446)... 145 more,3,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-720,Story,138,Closed,Reconcile default property settings with known-good production settings,Settings which are used in a production environment should be the default in the Figs.  This will simplify the configuration management required when running Usergrid at scale.,2,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-748,Bug,138,Closed,SNS Queueing/Messaging should create RAW subscriptions,SNS wraps messages passed to SQS in an envelope unless you specify a RAW subscription type.  At this time we would prefer a RAW message delivery.,1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-742,Bug,138,Closed,Reindex endpoint returns NPE if a payload is not defined,"Errors running system reindex after deploying a 2.1 build and pointing to a 2.0 keyspace.2015-06-10 22:44:02057 [http-bio-8080-exec-18] INFO  org.apache.usergrid.rest.security.shiro.filters.BasicAuthSecurityFilter- System administrator access allowed2015-06-10 22:44:02058 [http-bio-8080-exec-18] INFO  org.apache.usergrid.rest.IndexResource- Resuming rebuilding all applications2015-06-10 22:44:02059 [http-bio-8080-exec-18] ERROR org.apache.usergrid.rest.exceptions.ThrowableMapper- An uncaught exception occurred during HTTP invocationjava.lang.NullPointerExceptionat org.apache.usergrid.rest.IndexResource.executeResumeAndCreateResponse(IndexResource.java:274)at org.apache.usergrid.rest.IndexResource.rebuildIndexesPut(IndexResource.java:102)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:483)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:745)2015-06-10 22:44:02060 [http-bio-8080-exec-18] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- org.apache.usergrid.rest.exceptions.UncaughtException Server Error (500)org.apache.usergrid.rest.exceptions.UncaughtException: java.lang.NullPointerExceptionat org.apache.usergrid.rest.exceptions.AbstractExceptionMapper.toResponse(AbstractExceptionMapper.java:59)at org.apache.usergrid.rest.exceptions.ThrowableMapper.toResponse(ThrowableMapper.java:37)at com.sun.jersey.spi.container.ContainerResponse.mapException(ContainerResponse.java:480)at com.sun.jersey.spi.container.ContainerResponse.mapMappableContainerException(ContainerResponse.java:417)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1477)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:745)Caused by: java.lang.NullPointerExceptionat org.apache.usergrid.rest.IndexResource.executeResumeAndCreateResponse(IndexResource.java:274)at org.apache.usergrid.rest.IndexResource.rebuildIndexesPut(IndexResource.java:102)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:483)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)... 38 more2015-06-10 22:44:02060 [http-bio-8080-exec-18] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Uncaught Exceptionorg.apache.usergrid.rest.exceptions.UncaughtException: java.lang.NullPointerExceptionat org.apache.usergrid.rest.exceptions.AbstractExceptionMapper.toResponse(AbstractExceptionMapper.java:59)at org.apache.usergrid.rest.exceptions.ThrowableMapper.toResponse(ThrowableMapper.java:37)at com.sun.jersey.spi.container.ContainerResponse.mapException(ContainerResponse.java:480)at com.sun.jersey.spi.container.ContainerResponse.mapMappableContainerException(ContainerResponse.java:417)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1477)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:745)Caused by: java.lang.NullPointerExceptionat org.apache.usergrid.rest.IndexResource.executeResumeAndCreateResponse(IndexResource.java:274)at org.apache.usergrid.rest.IndexResource.rebuildIndexesPut(IndexResource.java:102)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:483)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)... 38 more2015-06-10 22:44:02061 [http-bio-8080-exec-18] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Server Error (500):{""error"":""uncaught""""timestamp"":1433976242060""duration"":1""error_description"":""Internal Server Error""""exception"":""org.apache.usergrid.rest.exceptions.UncaughtException""""error_id"":""30bf8d46-0fc2-11e5-baa5-06b0ee5388b2""}",null,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-652,Story,138,Closed,Index Routing/Location Strategy,We should consider implementing a proxy which provides the index being used for an application.  This proxy should provide both the Index strategy and the entity type mapping strategy.The goal is to provide a point where we can implement a strategy function that could do one (or more) of the following strategies for indexes:- Single index per cluster (static index allocation)- Index per org/app (dynamic index allocation)- Index per org (dynamic index allocation)- Index per cluster (dynamic index allocation)- Index per customer (dynamic index allocation)- Hash/bucketing across a fixed range of indexes (static index allocation)- Per environment (TBD)- Static (for the management app should always match the Cassandra keyspace name as the index)In order to do this we need to update EntityIndexFactory.createApplicationEntityIndex.For Entity Type Mapping the goal is to enable bucketing of entity types (collections) in a manner that can be more optimal for the indexing strategy that is chosen.  For example a single index strategy might have a single entity type but for the index per org/app it might have a separate entity type.  Looking up the management index would have a strategy where the index name matches the cassandra keyspace name,5,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-698,Bug,138,Closed,Test Not Passing: ConnectionResourceTest.connectionsLoopbackTest:103 NullPointer,null,2,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-746,Story,138,Closed,Improve performance of ExportAdmins via multi-threading,null,3,3,1,1,2,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-688,Story,138,Closed,Fix Graph Compact Operations.  ,when mark node in graph is called the compact needs to be called before you add the same relationship back to the graph.  this should not be the case,5,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-744,Bug,138,Closed,Test Not Passing: ApplicationResourceIT,null,2,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-703,Bug,138,Closed,Test Not Passing: ManagementResourceIT,testSuperuserOnlyWhenValidateExternalTokensEnabledand the other external test are broken.,2,3,3,1,0,David Johnson,Shawn Feldman,Shawn Feldman,7,0,0,0,0,0,0,0
USERGRID-667,Story,138,Closed,1.0.2 Release Candidate 2,null,2,3,2,1,1,David Johnson,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-745,Bug,138,Closed,Test Not Passing: AssetResourceIT,null,1,3,2,1,0,David Johnson,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-719,Bug,138,Closed,Pushy creates/leaves too many threads ,Pushy client opens up hundreds of threads and has some failed connection alerts which need to be investigated.,3,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-751,Story,138,Closed,Change MvccEntitySerializationStrategyV3Impl to use native JSON when storing in the column value,"Currently we use SMILE binary serialization to serialize our column values.  During production debugging this makes it extremely difficult to debug.  I propose we remove the SMILE binary serialization and instead use json serialization with the following formation{code}{  ""version"": [serialization implementation version number as an int]  ""entity"": {... entity as a nested json object }}{code}If the entity is present then the entity has not been deleted.  If the entity field is not present then the entity should be read as a marked for deletion.",3,3,2,1,0,Shawn Feldman,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-704,Bug,138,Closed,Test Not Passing: DevicesresourceIT ,seems to be a graph compaction issue DevicesResourceIT.putWithUUIDShouldCreateAfterDelete,1,3,1,1,0,Todd Nine,Shawn Feldman,Shawn Feldman,0,0,1,1,1,0,0,0
USERGRID-757,Bug,138,Closed,Exception on system/database/setup,throws duplicate unique key exception on managementserviceimpl,2,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-604,Story,138,Closed,Spike: Core test suite should complete in Maven,null,1,3,2,0,0,null,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-527,Story,138,Closed,Write external ES test to ensure we get even routing across the ES cluster,One of the problems we have faced is uneven distribution in the ES cluster.  We have made changes for document routing that seemed to help but we are still getting hot nodes in the cluster.  We need to have a test that hits ES directly with load as UG would do to test our cluster distribution.,3,2,3,1,0,Senthil Kumar K,Jeffrey West,Jeffrey West,7,0,1,0,0,0,0,0
USERGRID-739,Story,138,Closed,Implement Bucketing Algorithm for assignment of Application Index Aliases to Physical Indexes,When allocating an index alias to one of the physical indexes a bucketing strategy should be used with ranges based off the number of indexes in elasticsearch.For example if there are 10 physical indexes then there would be 10 buckets based on a hash of the Application ID which would result in the assignment of an app alias to a physical index based on the range in which it falls.,3,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-747,Bug,138,Closed,Error with Push Queue on 2.1,2015-06-11 19:56:06334 [Notifications_Processor8a95f9c7-30e2-4ebe-9a87-62deb1f131c9] ERROR org.apache.usergrid.services.notifications.QueueListener- failed to start pushjava.util.NoSuchElementException: Sequence contains no elementsat rx.internal.operators.OperatorSingle$ParentSubscriber.onCompleted(OperatorSingle.java:116)at rx.internal.operators.NotificationLite.accept(NotificationLite.java:140)at rx.internal.operators.TakeLastQueueProducer.emit(TakeLastQueueProducer.java:100)at rx.internal.operators.TakeLastQueueProducer.startEmitting(TakeLastQueueProducer.java:45)at rx.internal.operators.OperatorTakeLast$1.onCompleted(OperatorTakeLast.java:59)at rx.internal.operators.OperatorDoOnEach$1.onCompleted(OperatorDoOnEach.java:53)at rx.internal.operators.OperatorBufferWithSize$1.onCompleted(OperatorBufferWithSize.java:125)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:79)at rx.internal.operators.OperatorBufferWithSize$1$1.request(OperatorBufferWithSize.java:86)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.Subscriber.setProducer(Subscriber.java:171)at rx.internal.operators.OperatorBufferWithSize$1.setProducer(OperatorBufferWithSize.java:74)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.subscribe(Observable.java:7585)at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:442)at rx.observables.BlockingObservable.last(BlockingObservable.java:229)at org.apache.usergrid.services.notifications.QueueListener.execute(QueueListener.java:240)at org.apache.usergrid.services.notifications.QueueListener.access$000(QueueListener.java:49)at org.apache.usergrid.services.notifications.QueueListener$1.run(QueueListener.java:123)at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)at java.util.concurrent.FutureTask.run(FutureTask.java:266)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at java.lang.Thread.run(Thread.java:745)2015-06-11 19:56:06334 [Notifications_Processorfcf889b3-dcaa-4959-8806-81cc7d767fd0] ERROR org.apache.usergrid.services.notifications.QueueListener- failed to start pushjava.util.NoSuchElementException: Sequence contains no elementsat rx.internal.operators.OperatorSingle$ParentSubscriber.onCompleted(OperatorSingle.java:116)at rx.internal.operators.NotificationLite.accept(NotificationLite.java:140)at rx.internal.operators.TakeLastQueueProducer.emit(TakeLastQueueProducer.java:100)at rx.internal.operators.TakeLastQueueProducer.startEmitting(TakeLastQueueProducer.java:45)at rx.internal.operators.OperatorTakeLast$1.onCompleted(OperatorTakeLast.java:59)at rx.internal.operators.OperatorDoOnEach$1.onCompleted(OperatorDoOnEach.java:53)at rx.internal.operators.OperatorBufferWithSize$1.onCompleted(OperatorBufferWithSize.java:125)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:79)at rx.internal.operators.OperatorBufferWithSize$1$1.request(OperatorBufferWithSize.java:86)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.Subscriber.setProducer(Subscriber.java:171)at rx.internal.operators.OperatorBufferWithSize$1.setProducer(OperatorBufferWithSize.java:74)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.subscribe(Observable.java:7585)at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:442)at rx.observables.BlockingObservable.last(BlockingObservable.java:229)at org.apache.usergrid.services.notifications.QueueListener.execute(QueueListener.java:240)at org.apache.usergrid.services.notifications.QueueListener.access$000(QueueListener.java:49)at org.apache.usergrid.services.notifications.QueueListener$1.run(QueueListener.java:123)at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)at java.util.concurrent.FutureTask.run(FutureTask.java:266)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at java.lang.Thread.run(Thread.java:745),null,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-596,Story,138,Closed,Confirm PUT by Name Does not Fetch/Query ES,We are seeing a large number of fetches/queries when we are doing PUT by name.  This creates load on ES and therefore makes indexing take longer.  We should make sure we're not hitting ES for PUT by name.,1,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-716,Story,140,Closed,Use combo boxes instead of text areas for inputting multiple pieces of data,null,3,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,1,0,0,0,0,0,0,0
USERGRID-764,Story,140,Closed,Instance Validation Script,We need a script which does testing of a Usergrid instance to confirm a set of functionality works.,2,3,2,1,0,Brandon Shelley,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-586,Story,140,Closed,Test app_info migration,null,3,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-681,Story,140,Closed,Support single-region delivery of messages in 2.1,With the introduction of SNS and the default configuration of multi-region push notifications will be sent once-per-region.  We need the queue interface to be updated to support single-region delivery.,0,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-752,Story,140,Closed,Update Usergrid 1.0 search to use concurrent search per shard,Currently we merge all shards together with every page seek in usergrid 1.0. This means we select 20k columns and discard 19k with each page selection.  Instead I propose that we create an AST per shard and execute the iterator on these shards concurrently.  We then merge on the last step greatly reducing the amount of network I/O and discarded data on queries of large data sets.Proposed Changes:1 AST instance per shard evaluated concurrently via some worker pool.Change final gather of concurrent iterators.Change cursor generation to create the cursor from the merged trees.,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-732,Story,140,Closed,Implement SNS-based Queue Provider in 2.0,null,2,3,1,0,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-750,Bug,140,Closed,When setting accesstokenttl to 0 client credentials auth still returns 604800,"If I send a PUT request to set the accesstokenttl to 0 for an app:{code}{    ""accesstokenttl"": 0}{code}And then make a subsequent client_credentials token request the token ttl in the response is still 604800:{code}{    ""client_id"": ""***""    ""client_secret"": ""***""    ""grant_type"": ""client_credentials""    ""ttl"": 0}{code}Response: {code}{    ""access_token"": ""***""    ""expires_in"": 604800    ""application"": ""***""}{code}[~tnine] suggests this may be a response rendering problem and that it is actually setting the expiration correctly in the stack.",3,4,2,1,0,George Reyes,Brandon Shelley,Brandon Shelley,1,0,0,0,0,0,0,0
USERGRID-670,Bug,140,Closed,App Credentials do not work when accessing a collection within an app (2.0),In order to access collections it seems the org credentials are required as app credentials do not work.  ,5,3,3,1,0,George Reyes,Jeffrey West,Jeffrey West,7,0,0,0,0,0,0,0
USERGRID-755,Bug,140,Closed,MVCC serialization error on reindex,2015-06-16 22:06:31223 [http-bio-8080-exec-15] ERROR org.apache.usergrid.persistence.collection.serialization.impl.MvccLogEntrySerializationStrategyImpl- DATA CORRUPTION DETECTED when de-serializing entity with Id SimpleId{uuid=2034290e-109c-11e5-a3f5-06b0ee5388b2 type='user'}.  This means the write was truncated.org.apache.usergrid.persistence.collection.exception.DataCorruptionException: Unable to read entity dataat org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$EntitySerializer.fromByteBuffer(MvccEntitySerializationStrategyV3Impl.java:457)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$EntitySerializer.fromByteBuffer(MvccEntitySerializationStrategyV3Impl.java:365)at com.netflix.astyanax.serializers.AbstractSerializer.fromBytes(AbstractSerializer.java:42)at com.netflix.astyanax.thrift.model.ThriftColumnImpl.getValue(ThriftColumnImpl.java:58)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$MvccColumnParser.parseColumn(MvccEntitySerializationStrategyV3Impl.java:346)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl.lambda$load$13(MvccEntitySerializationStrategyV3Impl.java:210)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$$Lambda$23/1238550786.call(Unknown Source)at rx.Observable$5.call(Observable.java:3534)at rx.internal.operators.OperatorScan$2.onNext(OperatorScan.java:104)at rx.observers.SerializedObserver.onNext(SerializedObserver.java:159)at rx.observers.SerializedSubscriber.onNext(SerializedSubscriber.java:95)at rx.internal.operators.NotificationLite.accept(NotificationLite.java:150)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber.drain(OperatorMergeMaxConcurrent.java:265)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber$MergeItemSubscriber.onNext(OperatorMergeMaxConcurrent.java:325)at rx.internal.operators.OperatorSubscribeOn$1$1$1.onNext(OperatorSubscribeOn.java:76)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:43)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:32)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:62)at rx.schedulers.ImmediateScheduler$InnerImmediateScheduler.schedule(ImmediateScheduler.java:58)at rx.internal.operators.OperatorSubscribeOn$1.onNext(OperatorSubscribeOn.java:57)at rx.internal.operators.OperatorSubscribeOn$1.onNext(OperatorSubscribeOn.java:43)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:43)at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:32)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber.subscribeNext(OperatorMergeMaxConcurrent.java:147)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber.onNext(OperatorMergeMaxConcurrent.java:126)at rx.internal.operators.OperatorMergeMaxConcurrent$SourceSubscriber.onNext(OperatorMergeMaxConcurrent.java:68)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorBufferWithSize$1.onNext(OperatorBufferWithSize.java:103)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.internal.operators.OperatorBufferWithSize$1$1.request(OperatorBufferWithSize.java:88)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.Subscriber.setProducer(Subscriber.java:171)at rx.internal.operators.OperatorBufferWithSize$1.setProducer(OperatorBufferWithSize.java:74)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.subscribe(Observable.java:7585)at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:442)at rx.observables.BlockingObservable.last(BlockingObservable.java:229)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl.load(MvccEntitySerializationStrategyV3Impl.java:215)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyProxyImpl.load(MvccEntitySerializationStrategyProxyImpl.java:95)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:246)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:240)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.subscribe(Observable.java:7585)at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:442)at rx.observables.BlockingObservable.lastOrDefault(BlockingObservable.java:262)at org.apache.usergrid.corepersistence.CpEntityManager.load(CpEntityManager.java:316)at org.apache.usergrid.corepersistence.CpEntityManager.get(CpEntityManager.java:454)at org.apache.usergrid.corepersistence.CpEntityManager.get(CpEntityManager.java:2344)at org.apache.usergrid.management.cassandra.ManagementServiceImpl.getUserEntityByIdentifier(ManagementServiceImpl.java:1060)at org.apache.usergrid.management.cassandra.ManagementServiceImpl.findUserEntity(ManagementServiceImpl.java:1132)at org.apache.usergrid.management.cassandra.ManagementServiceImpl.verifyAdminUserPasswordCredentials(ManagementServiceImpl.java:1277)at org.apache.usergrid.rest.management.ManagementResource.getAccessTokenInternal(ManagementResource.java:256)at org.apache.usergrid.rest.management.ManagementResource.getAccessTokenPostJson(ManagementResource.java:396)at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:483)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:745)Caused by: java.io.CharConversionException: Invalid UTF-32 character 0x7d000000(above 10ffff)  at char #1 byte #7)at com.fasterxml.jackson.core.io.UTF32Reader.reportInvalid(UTF32Reader.java:155)at com.fasterxml.jackson.core.io.UTF32Reader.read(UTF32Reader.java:109)at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.loadMore(ReaderBasedJsonParser.java:131)at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._skipWSOrEnd(ReaderBasedJsonParser.java:1688)at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:562)at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:3031)at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:2978)at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2167)at org.apache.usergrid.persistence.collection.serialization.impl.MvccEntitySerializationStrategyV3Impl$EntitySerializer.fromByteBuffer(MvccEntitySerializationStrategyV3Impl.java:446)... 145 more,3,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-720,Story,140,Closed,Reconcile default property settings with known-good production settings,Settings which are used in a production environment should be the default in the Figs.  This will simplify the configuration management required when running Usergrid at scale.,2,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-748,Bug,140,Closed,SNS Queueing/Messaging should create RAW subscriptions,SNS wraps messages passed to SQS in an envelope unless you specify a RAW subscription type.  At this time we would prefer a RAW message delivery.,1,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-759,Bug,140,Closed,SNS Topic/Queue Implementation should use the Topics.subscribe helper methid,There is a helper method which should be used to subscribe SQS queues to SNS topics.,2,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-758,Story,140,Closed,Introduce Semantic Versioning in Build Artifacts,We should include in the WAR manifests a version number to be able to identify a version of a build and which branch it belongs to.  For example right now we have 1.0 2.0 and 2.1 branches and nothing about the artifact filenames differentiates them.  This results to mistakes and builds of the wrong version getting deployed and mistaken.,null,3,4,1,0,David Johnson,Jeffrey West,Jeffrey West,5,0,0,0,0,0,0,0
USERGRID-708,Story,140,Closed,cursor in username field on login jumps to the end with update,null,1,3,1,1,0,ryan bridges,ryan bridges,ryan bridges,0,0,0,0,0,0,0,0
USERGRID-228,Story,140,Closed,Portal should not give username/password error when error was due to some other problem,Sometimes when Usergrid starts it errors gracefully if one of the ports is in use (7000) sometimes it gives a timeout (8080) and sometimes it works (8080) even though the port is used but then when you try the portal it tells you the username/password was not valid when in fact the error is a 501 on ΓÇÿOPTIONSΓÇÖ though it could be a different error depending on what is already using the port (screenshot below).  This same behavior happens if the port cannot be reached.  So the questions are:1) Can we configure all the different ports using the Launcher JAR?  Including Cassandra?2) Can we update the portal to display something other than invalid user/name when this happens?,null,3,2,1,0,ryan bridges,Rod Simpson,Rod Simpson,0,1,0,0,0,0,0,0
USERGRID-615,Bug,140,Closed,Inaccurate (or lack of) error message when logging into BaaS,In some cases the following error is uncaught and the portal fails to load:Uncaught TypeError: Cannot read property 'applications' of undefinedUsergrid.Client.parseApplicationsArray @ usergrid-libs.min.js:14(anonymous function) @ usergrid-libs.min.js:14Usergrid.Client.request.xhr.onload @ usergrid-libs.min.js:13,null,3,1,1,0,ryan bridges,Jeffrey West,Jeffrey West,0,0,1,0,0,0,0,0
USERGRID-760,Story,140,Closed,Merge master to two-dot-o branches & rewrite tests to use new framework,There's one new test from master that needs to be rewritten using the new framework: ApplicationResourceIT.applicationCollectionWithAppToken(),2,3,1,1,1,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-703,Bug,140,Closed,Test Not Passing: ManagementResourceIT,testSuperuserOnlyWhenValidateExternalTokensEnabledand the other external test are broken.,2,3,3,1,0,David Johnson,Shawn Feldman,Shawn Feldman,7,0,0,0,0,0,0,0
USERGRID-667,Story,140,Closed,1.0.2 Release Candidate 2,null,2,3,2,1,1,David Johnson,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-745,Bug,140,Closed,Test Not Passing: AssetResourceIT,null,1,3,2,1,0,David Johnson,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-766,Story,140,Closed,Deploy 2.1 Branch into an End-to-End (e2e) testing environment,Deploy 2.1 Branch into an End-to-End (e2e) testing environment including:1) Cassandra2) ElasticSearch3) Tomcat4) Portal,5,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-761,Bug,140,Closed,Messages not getting ACK'd to SQS Queue for Indexing,With this pull request SNS messages are being consumed and entities indexed.  However the messages are not getting ack'd.https://github.com/apache/incubator-usergrid/pull/288indexEntity is getting called but the ack(message) is not getting called:        ecm.load(entityIdScope.getId())                .first()                .flatMap(entity -> indexService.indexEntity(applicationScope entity))                .doOnNext(ignore -> ack(message)).subscribe();,null,3,1,1,0,null,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-785,Bug,146,Closed,Unable to run 2.0 to 2.1 data migration on large data set.,Attempted to run entity data migration in (UG 2.0 to UG 2.1 ) with a instance having 1.1 million entities in a single collection within a single application.  This causes the following exception on cassandra:{code}ERROR [ReadStage:16] 2015-07-02 23:33:29720 SliceQueryFilter.java (line 206) Scanned over 100000 tombstones in ug_migrate_test.Graph_Source_Node_Edges; query aborted (see tombstone_failure_threshold)ERROR [ReadStage:27] 2015-07-02 23:33:39723 SliceQueryFilter.java (line 206) Scanned over 100000 tombstones in ug_migrate_test.Graph_Source_Node_Edges; query aborted (see tombstone_failure_threshold)ERROR [ReadStage:27] 2015-07-02 23:33:39723 CassandraDaemon.java (line 258) Exception in thread Thread[ReadStage:275main]java.lang.RuntimeException: org.apache.cassandra.db.filter.TombstoneOverwhelmingExceptionat org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2016)at {code}which results in the following exception in usergrid:{code}2015-07-02 23:33:59680 [Index migrate data formats] ERROR org.apache.usergrid.rest.MigrateResource- Unable to migrate datajava.lang.RuntimeException: Unable to connect to casandraat org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:190)at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.hasNext(MultiRowColumnIterator.java:122)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardsColumnIterator.hasNext(ShardsColumnIterator.java:65)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupColumnIterator.advance(ShardGroupColumnIterator.java:120)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupColumnIterator.hasNext(ShardGroupColumnIterator.java:68)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:66)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:71)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorFilter$1.onNext(OperatorFilter.java:54)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleScalarSynchronousObservableWithRequestLimits(OperatorMerge.java:280)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleScalarSynchronousObservable(OperatorMerge.java:243)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:176)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:248)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:240)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorFilter$1.onNext(OperatorFilter.java:54)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.Subscriber.setProducer(Subscriber.java:171)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorBufferWithSize$1.onCompleted(OperatorBufferWithSize.java:119)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:75)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:62)at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)at java.util.concurrent.FutureTask.run(FutureTask.java:266)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at java.lang.Thread.run(Thread.java:745)Caused by: com.netflix.astyanax.connectionpool.exceptions.OperationTimeoutException: OperationTimeoutException: [host=10.16.4.135(10.16.4.135):9160 latency=5001(30012) attempts=6]TimedOutException()at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:171)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:65)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:28)at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$ThriftConnection.execute(ThriftSyncConnectionFactoryImpl.java:151)at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:119)at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:338)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4.execute(ThriftColumnFamilyQueryImpl.java:532)at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:187)... 146 moreCaused by: TimedOutException()at org.apache.cassandra.thrift.Cassandra$multiget_slice_result.read(Cassandra.java:10480)at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)at org.apache.cassandra.thrift.Cassandra$Client.recv_multiget_slice(Cassandra.java:673)at org.apache.cassandra.thrift.Cassandra$Client.multiget_slice(Cassandra.java:657)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:538)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:535)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)... 152 more{code},3,1,2,1,0,Todd Nine,Michael Russo,Michael Russo,4,0,2,1,1,0,0,0
USERGRID-765,Story,146,Closed,Validate JMX Meters / Timers are the ones we want to be in place for measuring/monitoring performance,Validate JMS Meters / Timers are the ones we want to be in place for measuring/monitoring performance,3,3,2,1,0,Todd Nine,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-716,Story,146,Closed,Use combo boxes instead of text areas for inputting multiple pieces of data,null,3,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,1,0,0,0,0,0,0,0
USERGRID-724,Story,146,Closed,JMX Metrics/Counters for Cassandra,Would be nice to add metrics and counters at the lower level for bytes in/out Cassandra and latency,1,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-764,Story,146,Closed,Instance Validation Script,We need a script which does testing of a Usergrid instance to confirm a set of functionality works.,2,3,2,1,0,Brandon Shelley,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-777,Bug,146,Closed,Refactor App Info Migration to make it functional,null,3,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-586,Story,146,Closed,Test app_info migration,null,3,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-779,Story,146,Closed,Convert SNS client to use the SNSAsyncClient,null,1,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-780,Story,146,Closed,Implement buffer for re-index events,Create configurable re-index buffer property and implement in ReIndexService.,1,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-770,Bug,146,Closed,Tokens generated with app-level credentials cannot be used successfully in Header,They can be used in the access_token qparam but not a header.  They need to work in the header as well.,0,1,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-778,Bug,146,Closed,Limit on Queries results in a highly variable number of results,"This behavior is observed on a build from the two-dot-o branch with commit ID 2d1c8b8ac7b20b63a11d83adca56839d8b409cca.For example limit=2 gives you 1 sometimes limit=750 gives anywhere from 625 to 749.  For example this script:{code}#!/bin/bashfor count in `seq 1 10`do     curl -s ""https://example.com/appservices/testorg/sandbox/scmocks?limit=750"" > file${count}    grep uuid file${count} | wc    rm file${count}done{code}Produces these results:     685    2055   36305     750    2250   39750     749    2247   39697     742    2226   39326     750    2250   39750     749    2247   39697     747    2241   39591     744    2232   39432     750    2250   39750     749    2247   39697A different count every time.",3,3,2,1,0,David Johnson,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-752,Story,146,Closed,Update Usergrid 1.0 search to use concurrent search per shard,Currently we merge all shards together with every page seek in usergrid 1.0. This means we select 20k columns and discard 19k with each page selection.  Instead I propose that we create an AST per shard and execute the iterator on these shards concurrently.  We then merge on the last step greatly reducing the amount of network I/O and discarded data on queries of large data sets.Proposed Changes:1 AST instance per shard evaluated concurrently via some worker pool.Change final gather of concurrent iterators.Change cursor generation to create the cursor from the merged trees.,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-732,Story,146,Closed,Implement SNS-based Queue Provider in 2.0,null,2,3,1,0,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-706,Story,146,Closed,Test re-index system,The first pass of the re-index with is complete.  Testing in a system to ensure that re-index works as expected still needs to be completed.,5,3,2,1,0,Michael Russo,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-555,Story,146,Closed,Test Migration of Entity Versions,Test migration from v2 to v3 for the upcoming release,3,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-585,Story,146,Closed,Test migration from old index format to new,Test migration from old index format to new,3,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-765,Story,152,Closed,Validate JMX Meters / Timers are the ones we want to be in place for measuring/monitoring performance,Validate JMS Meters / Timers are the ones we want to be in place for measuring/monitoring performance,3,3,2,1,0,Todd Nine,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-772,Story,152,Closed,Characterize the performance of 2.1,We need to characterize the performance of 2.1.  This will involve using:- Varying numbers of tomcats-- we can start with 20 and progressively add more into a load balancer to see the performance impact- Varying ES cluster size - starting with 6 and going up to 20-- we can start with 20 nodes and only have the indexes targeted to a subset- Varying ES bucket/shard counts - starting with 10- Varying Cassandra sizes - starting with 6 and going up to 12General approach should be:1) Start with 2 tomcats 6 ES and 6 C*2) Add +2 Tomcats iteratively until the performance starts to not increase (implying that either ES or C* is the limiting factor)3) Add +3 ES nodes and test again.  Document impact.4) Add +3 C* nodes remove -3 ES nodes and test again.  Document impact.5) Add +3 C* nodes and +3 ES nodes and test again.  Document impact.6) Add +2 Tomcats and see the slope of the TPS graph7) Add +3 C* - (now at 12) and test again8) Test iteratively with +2 Tomcats until performance plateaus up to 20 Tomcats,8,2,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-716,Story,152,Closed,Use combo boxes instead of text areas for inputting multiple pieces of data,null,3,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,1,0,0,0,0,0,0,0
USERGRID-869,Story,152,Closed,Asset creation when using S3BinaryStore doesn't function,"When creating an asset the following call works in 1.0 usergrid.curl -X POST -F name='example' -F file=@example.jpg 'https://localhost:8080/temp/test?access_token=<token>'properly uploading the asset. In 2.1 however the following gets returned. {""error"":""uncaught""""timestamp"":1437415007666""duration"":0""error_description"":""Internal Server Error""""exception"":""org.apache.usergrid.rest.exceptions.UncaughtException""""error_id"":""b0c5930c-2f08-11e5-818e-060beb1b9051""}%",5,3,1,1,1,George Reyes,George Reyes,George Reyes,2,0,1,1,1,0,0,0
USERGRID-771,Story,152,Closed,Add a separate email address for approving new Org Admin users which can be different from approving new Orgs,Currently the email address appears to be the same for approving new orgs and new admins.  We need a separate configurable email address for each.If this setting is blank the admin email can be used instead.This needs to be fixed in 2.0 as well as 2.1.  2.0 first please :),3,3,3,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-740,Bug,152,Closed,Temp files from asset upload not removed causing the file system to use all inodes,After running Usergrid 2.0 for over 1 month on a tomcat we have saturated the inodes of the disk on the tomcat machine.  Our temporary files for uploads are not getting removed.  Files of this structure appear in {code} ls -lrt  /var/cache/tomcat7/temp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME377627531473294092.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME2634951521985073318.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME1066361445384372180.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME3554741621747313255.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME1805372544199883785.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME414525331725926400.tmp{code}We need to ensure that all temporary files are removed.  Note that all the files remaining are 0 bytes.  This seems to be caused by an edge case when a 0 byte file is uploaded or possibly the upload is failing.,5,2,3,1,0,George Reyes,Todd Nine,Todd Nine,4,0,1,1,1,0,0,0
USERGRID-724,Story,152,Closed,JMX Metrics/Counters for Cassandra,Would be nice to add metrics and counters at the lower level for bytes in/out Cassandra and latency,1,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-764,Story,152,Closed,Instance Validation Script,We need a script which does testing of a Usergrid instance to confirm a set of functionality works.,2,3,2,1,0,Brandon Shelley,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-778,Bug,152,Closed,Limit on Queries results in a highly variable number of results,"This behavior is observed on a build from the two-dot-o branch with commit ID 2d1c8b8ac7b20b63a11d83adca56839d8b409cca.For example limit=2 gives you 1 sometimes limit=750 gives anywhere from 625 to 749.  For example this script:{code}#!/bin/bashfor count in `seq 1 10`do     curl -s ""https://example.com/appservices/testorg/sandbox/scmocks?limit=750"" > file${count}    grep uuid file${count} | wc    rm file${count}done{code}Produces these results:     685    2055   36305     750    2250   39750     749    2247   39697     742    2226   39326     750    2250   39750     749    2247   39697     747    2241   39591     744    2232   39432     750    2250   39750     749    2247   39697A different count every time.",3,3,2,1,0,David Johnson,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-752,Story,152,Closed,Update Usergrid 1.0 search to use concurrent search per shard,Currently we merge all shards together with every page seek in usergrid 1.0. This means we select 20k columns and discard 19k with each page selection.  Instead I propose that we create an AST per shard and execute the iterator on these shards concurrently.  We then merge on the last step greatly reducing the amount of network I/O and discarded data on queries of large data sets.Proposed Changes:1 AST instance per shard evaluated concurrently via some worker pool.Change final gather of concurrent iterators.Change cursor generation to create the cursor from the merged trees.,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-833,Story,152,Open,Implement script for configuring Grafana dashboards based on new JMX counters,null,3,4,1,0,0,Jeffrey West,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-800,Story,152,Closed,Test and Confirm cross-region message delivery for 2.0 in an execution environment,null,2,3,1,1,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-732,Story,152,Closed,Implement SNS-based Queue Provider in 2.0,null,2,3,1,0,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-534,Story,152,Closed, Load Test with 2.1,Test load with the frankenloader in e2e for the upcoming release,3,3,1,1,0,Jeffrey West,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-860,Story,152,Resolved,QL for contains 'text*' does not appear to work,select * where title contains 'ta*' does not work (at all) as documented here:http://apigee.com/docs/app-services/content/working-queries,3,1,1,1,1,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-840,Story,152,Closed,Complete Multi Region ES management implementation,When indexes are created on setup as well as aliases assigned on application creation this is only performed in the local region.  We need to create indexes in all regions during an index administration operation as well as create aliases. We will also probably want to make our aliases and underlying indexes identical in order to allow for ease of administration regardless of region.We need to account for two cases:1) Secondary region does not already have ES indexes configured - need to create the indexes and aliases2) Secondary region already has ES installed and configured (indexes existing) - only need to create aliases,1,3,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-788,Story,152,Closed,New ExportApp tool,Provide new tool that exports an app:1. Writes two types of files: entities and connections2. Each line of output files will be one complete JSON object3. Use RxJava for multithreading of reads and of writes,1,3,2,1,1,David Johnson,David Johnson,David Johnson,4,0,0,0,0,0,0,0
USERGRID-851,Story,152,Closed,ImportAdmins tool should merge organizations of duplicate users,"Some older Usergrid systems may have multiple accounts with the same username or email address something which is not allowed and problematic now. When such users are imported into a new system by the ImportAdmins program we can ""repair"" such users by merging the duplicates and ensure that the resulting single user account has the union of organization in the one or more duplicate users.",3,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-596,Story,152,Closed,Confirm PUT by Name Does not Fetch/Query ES,We are seeing a large number of fetches/queries when we are doing PUT by name.  This creates load on ES and therefore makes indexing take longer.  We should make sure we're not hitting ES for PUT by name.,1,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-854,Story,152,Closed,[SPIKE] Look at 'Fix X test' and close if needed,null,2,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-861,Story,152,Closed,Test and Profile performance of ExportApp tool,This tool is designed to export from 1.0 with the intent of using the resulting entities and collections in 2.x and higher.  However this data will be imported using the API so it is not import-to-2.x specific.,5,3,2,2,0,David Johnson,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-870,Bug,152,Closed,Inconsistent results returned while adding another data center to the Cassandra cluster.,During the addition of a new data center to the Cassandra cluster being used by Usergrid 2.1 inconsistent results were returned:-no entities in response-unable to find application,null,3,2,1,0,Michael Russo,Michael Russo,Michael Russo,3,0,0,0,0,0,0,0
USERGRID-754,Story,152,Closed,External Set of REST Tests that confirms Usergrid functionality in an execution environment,We need a script which executes API calls to test an installation given a set of test cases to confirm that it 'works' with a bare minimum of functionality.- CRUD on entity- Query entities - CRUD on connectionsAdd queries from here: http://apigee.com/docs/app-services/content/working-queries as test cases.,1,3,1,1,0,Brandon Shelley,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-765,Story,153,Closed,Validate JMX Meters / Timers are the ones we want to be in place for measuring/monitoring performance,Validate JMS Meters / Timers are the ones we want to be in place for measuring/monitoring performance,3,3,2,1,0,Todd Nine,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-772,Story,153,Closed,Characterize the performance of 2.1,We need to characterize the performance of 2.1.  This will involve using:- Varying numbers of tomcats-- we can start with 20 and progressively add more into a load balancer to see the performance impact- Varying ES cluster size - starting with 6 and going up to 20-- we can start with 20 nodes and only have the indexes targeted to a subset- Varying ES bucket/shard counts - starting with 10- Varying Cassandra sizes - starting with 6 and going up to 12General approach should be:1) Start with 2 tomcats 6 ES and 6 C*2) Add +2 Tomcats iteratively until the performance starts to not increase (implying that either ES or C* is the limiting factor)3) Add +3 ES nodes and test again.  Document impact.4) Add +3 C* nodes remove -3 ES nodes and test again.  Document impact.5) Add +3 C* nodes and +3 ES nodes and test again.  Document impact.6) Add +2 Tomcats and see the slope of the TPS graph7) Add +3 C* - (now at 12) and test again8) Test iteratively with +2 Tomcats until performance plateaus up to 20 Tomcats,8,2,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-875,Story,153,Closed,Test and Validate Multi-Region Indexing,1) Ensure that the indexes (including buckets) can get created in region n+12) Ensure that read/write aliases get created in region n+13) Ensure that queries in both regions return the same data4) Attempt to quantify the latency of a PUT in region A making it to Region B and being indexed in region BComing out of this we need a guide for setting up region N+1,1,3,2,1,1,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-882,Story,153,Closed,Release 2.0 with Admin email fixes,null,3,3,1,0,1,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-831,Story,153,Closed,Confirm 2.1 LICENSE file has requisite versions and module names,null,3,3,2,1,0,George Reyes,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-716,Story,153,Closed,Use combo boxes instead of text areas for inputting multiple pieces of data,null,3,3,2,1,0,ryan bridges,ryan bridges,ryan bridges,1,0,0,0,0,0,0,0
USERGRID-869,Story,153,Closed,Asset creation when using S3BinaryStore doesn't function,"When creating an asset the following call works in 1.0 usergrid.curl -X POST -F name='example' -F file=@example.jpg 'https://localhost:8080/temp/test?access_token=<token>'properly uploading the asset. In 2.1 however the following gets returned. {""error"":""uncaught""""timestamp"":1437415007666""duration"":0""error_description"":""Internal Server Error""""exception"":""org.apache.usergrid.rest.exceptions.UncaughtException""""error_id"":""b0c5930c-2f08-11e5-818e-060beb1b9051""}%",5,3,1,1,1,George Reyes,George Reyes,George Reyes,2,0,1,1,1,0,0,0
USERGRID-771,Story,153,Closed,Add a separate email address for approving new Org Admin users which can be different from approving new Orgs,Currently the email address appears to be the same for approving new orgs and new admins.  We need a separate configurable email address for each.If this setting is blank the admin email can be used instead.This needs to be fixed in 2.0 as well as 2.1.  2.0 first please :),3,3,3,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-740,Bug,153,Closed,Temp files from asset upload not removed causing the file system to use all inodes,After running Usergrid 2.0 for over 1 month on a tomcat we have saturated the inodes of the disk on the tomcat machine.  Our temporary files for uploads are not getting removed.  Files of this structure appear in {code} ls -lrt  /var/cache/tomcat7/temp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME377627531473294092.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME2634951521985073318.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME1066361445384372180.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME3554741621747313255.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME1805372544199883785.tmp-rw-r--r-- 1 tomcat tomcat 0 Jun  9 23:23 MIME414525331725926400.tmp{code}We need to ensure that all temporary files are removed.  Note that all the files remaining are 0 bytes.  This seems to be caused by an edge case when a 0 byte file is uploaded or possibly the upload is failing.,5,2,3,1,0,George Reyes,Todd Nine,Todd Nine,4,0,1,1,1,0,0,0
USERGRID-778,Bug,153,Closed,Limit on Queries results in a highly variable number of results,"This behavior is observed on a build from the two-dot-o branch with commit ID 2d1c8b8ac7b20b63a11d83adca56839d8b409cca.For example limit=2 gives you 1 sometimes limit=750 gives anywhere from 625 to 749.  For example this script:{code}#!/bin/bashfor count in `seq 1 10`do     curl -s ""https://example.com/appservices/testorg/sandbox/scmocks?limit=750"" > file${count}    grep uuid file${count} | wc    rm file${count}done{code}Produces these results:     685    2055   36305     750    2250   39750     749    2247   39697     742    2226   39326     750    2250   39750     749    2247   39697     747    2241   39591     744    2232   39432     750    2250   39750     749    2247   39697A different count every time.",3,3,2,1,0,David Johnson,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-752,Story,153,Closed,Update Usergrid 1.0 search to use concurrent search per shard,Currently we merge all shards together with every page seek in usergrid 1.0. This means we select 20k columns and discard 19k with each page selection.  Instead I propose that we create an AST per shard and execute the iterator on these shards concurrently.  We then merge on the last step greatly reducing the amount of network I/O and discarded data on queries of large data sets.Proposed Changes:1 AST instance per shard evaluated concurrently via some worker pool.Change final gather of concurrent iterators.Change cursor generation to create the cursor from the merged trees.,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-682,Story,153,Open,Soak Testing Scripts,Create scripts that will run for a period of time and generate data/load.  Start scripts and run for a week.,3,4,1,0,0,Mike Dunker,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-833,Story,153,Open,Implement script for configuring Grafana dashboards based on new JMX counters,null,3,4,1,0,0,Jeffrey West,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-800,Story,153,Closed,Test and Confirm cross-region message delivery for 2.0 in an execution environment,null,2,3,1,1,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-732,Story,153,Closed,Implement SNS-based Queue Provider in 2.0,null,2,3,1,0,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-756,Bug,153,Resolved,[FIXED?] NPE in CpEntityManager.validate,Need to be investigated before 2.1 release.2015-06-16 22:47:20361 [http-bio-8080-exec-7] ERROR org.apache.usergrid.corepersistence.CpEntityManager- Unable to load entity saparticles-fixed:e466f39a-cb97-11e4-b30c-f7cc05dca022java.lang.NullPointerExceptionat org.apache.usergrid.corepersistence.CpEntityManager.validate(CpEntityManager.java:956)at org.apache.usergrid.corepersistence.CpEntityManager.validate(CpEntityManager.java:942)at org.apache.usergrid.corepersistence.CpEntityManager.updateProperties(CpEntityManager.java:1030)at org.apache.usergrid.services.AbstractService.updateEntity(AbstractService.java:456)at org.apache.usergrid.services.AbstractService.updateEntity(AbstractService.java:444)at org.apache.usergrid.services.AbstractCollectionService.putItemByName(AbstractCollectionService.java:305)at org.apache.usergrid.services.AbstractService.invokeItemWithName(AbstractService.java:677)at org.apache.usergrid.services.AbstractService.invoke(AbstractService.java:628)at org.apache.usergrid.services.AbstractService.invoke(AbstractService.java:544)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:226)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:193)at org.apache.usergrid.rest.applications.ServiceResource.executeServiceRequest(ServiceResource.java:251)at org.apache.usergrid.rest.applications.ServiceResource.executePutWithMap(ServiceResource.java:371)at org.apache.usergrid.rest.applications.ServiceResource.executePut(ServiceResource.java:420)at sun.reflect.GeneratedMethodAccessor167.invoke(Unknown Source)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:497)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:745),3,1,1,1,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-546,Bug,153,Resolved,Ensure SQS Consumers are robust and do not stop consuming messages,In the past: For some reason the SQS queue consumers stop processing messages.  Please investigate ensure that the code is robust and add log messages.Current: Test and confirm review with Jeff and/or Todd that the loop for processing SQS messages is robust.,3,1,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-679,Story,153,Closed,Update SQS provider implementation to use Observable,SQS Queue Manager should be updated to use Observable and emit a stream of messages.,2,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-469,Story,153,Closed,[FIXED?] Investigate using a new TimeUUID as our routing value,We have been using our entityId as our routing value.  This gives us a much better distribution than our documentId format.  However when a node will be heavily connected it will introduce a hotspot in our ES cluster.  Instead we should either route based a new time UUID a new time uuid just for routing.  This way we can put each de-normalized document on it's own shard regardless of collection membership or connections.,null,3,1,1,0,null,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-874,Story,153,Closed,[SPIKE] Review Usergrid Documentation,We need to make sure docs are updated for 2.1,null,3,2,1,0,David Johnson,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-877,Story,153,Closed,Start Usergrid graduation process,1. update status page to include all users2. create DRAFT Top Level Project resolution3. start discussion on dev list,3,3,1,0,1,David Johnson,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-598,Story,153,Closed,Merge two-dot-o-dev into two-dot-o,null,3,3,2,2,0,David Johnson,Shawn Feldman,Shawn Feldman,2,0,0,0,0,0,0,0
USERGRID-878,Story,153,Closed,Investigate Serialization issue for Notifications,null,3,3,2,0,1,Shawn Feldman,Shawn Feldman,Shawn Feldman,4,0,0,0,0,0,0,0
USERGRID-880,Story,153,Closed,Refactor Serialization in Core and move it down to corepersistence,move all serialization down to low levels,5,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-754,Story,153,Closed,External Set of REST Tests that confirms Usergrid functionality in an execution environment,We need a script which executes API calls to test an installation given a set of test cases to confirm that it 'works' with a bare minimum of functionality.- CRUD on entity- Query entities - CRUD on connectionsAdd queries from here: http://apigee.com/docs/app-services/content/working-queries as test cases.,1,3,1,1,0,Brandon Shelley,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-558,Story,153,Closed,[FIXED?] Add resume to entity migration,We need to build resume into entity migration.  To do this we should make the AllEntitiesObservable allow for resume by default.  This way if the node performing the migration fails it can be restarted on another node.Note that we also need a way to clear state via REST so that we can restart our migration.,null,3,2,1,0,Todd Nine,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-765,Story,157,Closed,Validate JMX Meters / Timers are the ones we want to be in place for measuring/monitoring performance,Validate JMS Meters / Timers are the ones we want to be in place for measuring/monitoring performance,3,3,2,1,0,Todd Nine,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-772,Story,157,Closed,Characterize the performance of 2.1,We need to characterize the performance of 2.1.  This will involve using:- Varying numbers of tomcats-- we can start with 20 and progressively add more into a load balancer to see the performance impact- Varying ES cluster size - starting with 6 and going up to 20-- we can start with 20 nodes and only have the indexes targeted to a subset- Varying ES bucket/shard counts - starting with 10- Varying Cassandra sizes - starting with 6 and going up to 12General approach should be:1) Start with 2 tomcats 6 ES and 6 C*2) Add +2 Tomcats iteratively until the performance starts to not increase (implying that either ES or C* is the limiting factor)3) Add +3 ES nodes and test again.  Document impact.4) Add +3 C* nodes remove -3 ES nodes and test again.  Document impact.5) Add +3 C* nodes and +3 ES nodes and test again.  Document impact.6) Add +2 Tomcats and see the slope of the TPS graph7) Add +3 C* - (now at 12) and test again8) Test iteratively with +2 Tomcats until performance plateaus up to 20 Tomcats,8,2,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-875,Story,157,Closed,Test and Validate Multi-Region Indexing,1) Ensure that the indexes (including buckets) can get created in region n+12) Ensure that read/write aliases get created in region n+13) Ensure that queries in both regions return the same data4) Attempt to quantify the latency of a PUT in region A making it to Region B and being indexed in region BComing out of this we need a guide for setting up region N+1,1,3,2,1,1,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-882,Story,157,Closed,Release 2.0 with Admin email fixes,null,3,3,1,0,1,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-831,Story,157,Closed,Confirm 2.1 LICENSE file has requisite versions and module names,null,3,3,2,1,0,George Reyes,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-216,Story,157,Closed,GET an non-exists entity by ID or Name throws 401 if no authorisation is required,for exampleget /sandbox/users/non-exist-username throws 401 error codethis is because below code{code}@Providerpublic class ServiceResourceNotFoundExceptionMapper extends AbstractExceptionMapper<ServiceResourceNotFoundException> {    @Override    public Response toResponse( ServiceResourceNotFoundException e ) {        if ( SubjectUtils.getSubjectUserId() == null ) {            return toResponse( UNAUTHORIZED e );        }        else {            return toResponse( NOT_FOUND e );        }    }}{code},2,3,3,1,0,George Reyes,Strong Liu,Strong Liu,1,0,0,0,0,0,0,0
USERGRID-411,Bug,157,Closed,[FIXED?] Fix default index routing rules,When allocating indexes we've seen issues with unbalanced shard allocation within our cluster.  To get around this we need to set the following setting in each index.  http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/index-modules-allocation.html#_total_shards_per_nodeWe should allow this to be a configurable value via properties.  During new index allocation we'll also need to take this parameter in the payload of index allocation. We need to document this to be set asmax shards = # primaries + (# primaries * replicas) / number of nodes,null,3,3,1,0,null,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-559,Story,157,Closed,[FIXED?] Add re-index resume,We need the ability to resume re-indexing.  To do this we should make the AllEntitiesObservable allow for resume by default.  This way if the node performing the migration fails it can be restarted on another node.Note that we also need a way to clear state via REST so that we can restart our indexing.,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-370,Story,157,Closed,[FIXED?] Use ElasticSearch Filters instead of Term Query for exact matches,"This is something recommended in the O'Reilly ElasticSearch book.""For exact value searches you probably want to use a filter instead of a query as a filter will be cached.""Page 107 Chapter 7 ""Full Body Search""",null,3,2,1,1,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-457,Bug,157,Closed,Content length headers are not being sent on POSTS for ping identity,null,3,3,4,1,0,Michael Russo,Rod Simpson,Rod Simpson,9,0,0,0,0,0,0,0
USERGRID-560,Story,157,Closed,Ensure USERGRID-530 is addressed in two-dot-o(-dev),https://issues.apache.org/jira/browse/USERGRID-530.  Make sure it gets in 2.0,3,3,2,1,0,George Reyes,Jeffrey West,Jeffrey West,1,0,1,0,0,0,0,0
USERGRID-898,Story,157,Closed,Add proper error checking to Asset Code along with error checking tests.,null,3,3,1,1,0,George Reyes,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-754,Story,157,Closed,External Set of REST Tests that confirms Usergrid functionality in an execution environment,We need a script which executes API calls to test an installation given a set of test cases to confirm that it 'works' with a bare minimum of functionality.- CRUD on entity- Query entities - CRUD on connectionsAdd queries from here: http://apigee.com/docs/app-services/content/working-queries as test cases.,1,3,1,1,0,Brandon Shelley,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-890,Story,157,Closed,Convert Usergrid docs & Update for 2.0: Data Storage Queries and Connections,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-889,Story,157,Closed,Convert Usergrid docs & Update for 2.0: Introduction & Getting Started,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-892,Story,157,Closed,Convert Usergrid docs & Update for 2.0: Security & Auth and User Mgmt,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-895,Story,157,Closed,Convert Usergrid docs & Update for 2.0: Org & App Management User Management,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-894,Story,157,Closed,Convert Usergrid docs & Update for 2.0: Counters & Events,null,3,3,1,1,0,David Johnson,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-899,Story,157,Closed,Validate migrate_entity_data script produces consistent migrations.,Validate that https://github.com/apache/incubator-usergrid/blob/two-dot-o-dev/stack/scripts/migrate_entity_data.py produces consistent entity data migrations. 1) put data into UG build from latest in two-dot-o2) stand up UG build from two-dot-o-dev pointing to same keyspace (different queue names) and run /system/database/setup3) from UG running two-dot-o-dev run migrate_entity_data.py4) read data from UG two-dot-4) once finished  read entities from UG two-dot-o and UG two-dot-o-dev and ensure there is an exact match,1,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-900,Bug,157,Closed,Re-index using AmazonAsyncEventService should support updated date,see implemented example for InMemoryAsyncEventServiceorg/apache/usergrid/corepersistence/asyncevents/EventBuilderImpl.java:166This filters out based on modified/updated date for the events to be indexed.  Need to ensure AmazonAsyncEventService consumers implement something similar OR look to have the producer filter out the events and not even drop on the AWS queues.,3,3,2,1,0,Todd Nine,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-907,Bug,157,Closed,Batch interval in seconds not honored,The following property is present in the configuration of counter batch submits.{code}usergrid.counter.batch.interval=30{code}This is not honored.  This needs fixed in the 2.0 and 2.1 branch.,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-543,Story,157,Closed,Add Queue Length to /status page,Add queue length (SQS akka etc.) to the data returned by /status,3,3,2,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-558,Story,157,Closed,[FIXED?] Add resume to entity migration,We need to build resume into entity migration.  To do this we should make the AllEntitiesObservable allow for resume by default.  This way if the node performing the migration fails it can be restarted on another node.Note that we also need a way to clear state via REST so that we can restart our migration.,null,3,2,1,0,Todd Nine,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-908,Story,157,Closed,run specific migration,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-103,Improvement,176,Closed,Upgrade to latest Jersey 2.x release,JAX-RS 2.0 brings lots of new features much better extensible and async support are ones I think most useful ,5,3,8,1,0,David Johnson,Strong Liu,Strong Liu,17,0,1,1,1,0,0,0
USERGRID-941,Story,176,Closed,Spike: Investigate using Java Annotations to generate Swagger,null,5,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-909,Story,176,Closed,Evaluate removing cache from edge shard management,Currently using caches with the proposal phase for new shards has caused large numbers of tombstones.  Review the algorithm and determine the cause of the additional shard proposals.Usergrid currently performs 5 shard lookups on write and most miss the cache.  We'll change the following*Shard allocation*Shard allocation will not perform a propose + check phase. The following algorithm will occur.  This must occur at EACH_QUORUM to ensure that we have consensus across regions.  Any node will propose a new shard pivot.  This pivot will have compacted set to false and will have a column timestamp of a new timeuuid in microsThe proposing node will then read back all compacted = false shard pivots.  The shard pivot with the minimum timestamp will be retained all others will be deleted as proposals.  This will function similarly to distributed read locks in Cassandra.  Lowest proposed value always wins. Allocation is complete*Shard compaction*After a successful proposal allocation the allocating node will copy all edges from the previously compacted shard into the new shard.  It will continue to copy until no new edges are returned on read.Once read has been completed all edges that were copied can be deleted from the previous shard.  This target shard will be marked as compacted*Consistency*When performing consistency we will need a higher consistency level.  To ensure that shards exist worldwide proposal + selection should occur at EACH_QUORUM.  Standard reads can occur as LOCAL_QUORUM,5,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,0,0,2,1,1,0,0,0
USERGRID-944,Story,176,Open,Prototype using Spark to perform functions on data in Cassandra,As we discussed we'd like to see about using Spark for things such as:1) migrating orgs from one keyspace to another2) deleting all records for an app from Cassandra,3,4,1,0,0,null,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-950,Story,176,Closed,Remove Cassandra Keyspace name from Index Naming Strategy,null,1,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-918,Story,176,Closed,Add qparam to skip retrieving metadata and graph edges,If the qparam is not there use current/default behavior.  If the qparam is there then skip pulling the extra data which will result in better performance.,8,2,3,1,0,Mike Dunker,Jeffrey West,Jeffrey West,8,0,0,0,0,0,0,0
USERGRID-929,Story,176,Closed,Test the creation of entities which have an OldUUID to migrate from 1.0 to 2.1,null,1,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-816,Story,176,Closed,Implement the ability to track the storage used by an app,Depends on counters getting fixed,3,3,1,1,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-545,Story,176,Closed,Endpoint for checking storage consumed,As we move to separate keyspaces for each tenant we need to have an endpoint to monitor storage consumed for the keyspace.  This will be followed by the ability to show data consumed in the console and notifications when storage consumed is at X%.1. add size to entities2. add size to index.3. migrate field mapping in index4. add endpoint for getting storage by appapi is management/orgs/orgname/applications/appname/sizeor management/orgs/orgname/applications/appname/size/collectionName,3,3,3,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,5,0,0,0,0,0,0,0
USERGRID-912,Story,176,Closed,Upgrade Shiro to be current version,In order to support NIO.  Current version is ancient.,1,3,1,1,0,David Johnson,Jeffrey West,Jeffrey West,0,0,1,1,1,0,0,0
USERGRID-937,Story,176,Closed,Nested Arrays in documents result in infinite loop / stack overflow,Need to investigate and decide on an approach.  In addition do we support arrays with elements of varying types?at org.apache.usergrid.persistence.model.entity.MapToEntityConverter.processListForField(MapToEntityConverter.java:148),1,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-914,Story,176,Closed,Blog post for 10k TPS and horizontal scalability,null,2,3,1,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-945,Story,177,Closed,Perform load testing of new shard management impl,We'll want to load test this with our existing entity writes during heavy load.  We need to ensure shard allocation can keep up and that we have a consistent view of the shards.  We need to test the following scenarios# Write over 10 million entities in a single collection single region only# Write over 10 million entities concurrently in 2 regions# Write over 10 million entities concurrently in 2 regions and fail 1 of the regions.  The system should still function just not allocate new shards.,5,2,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,0,0,0,0,0
USERGRID-785,Bug,177,Closed,Unable to run 2.0 to 2.1 data migration on large data set.,Attempted to run entity data migration in (UG 2.0 to UG 2.1 ) with a instance having 1.1 million entities in a single collection within a single application.  This causes the following exception on cassandra:{code}ERROR [ReadStage:16] 2015-07-02 23:33:29720 SliceQueryFilter.java (line 206) Scanned over 100000 tombstones in ug_migrate_test.Graph_Source_Node_Edges; query aborted (see tombstone_failure_threshold)ERROR [ReadStage:27] 2015-07-02 23:33:39723 SliceQueryFilter.java (line 206) Scanned over 100000 tombstones in ug_migrate_test.Graph_Source_Node_Edges; query aborted (see tombstone_failure_threshold)ERROR [ReadStage:27] 2015-07-02 23:33:39723 CassandraDaemon.java (line 258) Exception in thread Thread[ReadStage:275main]java.lang.RuntimeException: org.apache.cassandra.db.filter.TombstoneOverwhelmingExceptionat org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2016)at {code}which results in the following exception in usergrid:{code}2015-07-02 23:33:59680 [Index migrate data formats] ERROR org.apache.usergrid.rest.MigrateResource- Unable to migrate datajava.lang.RuntimeException: Unable to connect to casandraat org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:190)at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.hasNext(MultiRowColumnIterator.java:122)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardsColumnIterator.hasNext(ShardsColumnIterator.java:65)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupColumnIterator.advance(ShardGroupColumnIterator.java:120)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupColumnIterator.hasNext(ShardGroupColumnIterator.java:68)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:66)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:71)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorFilter$1.onNext(OperatorFilter.java:54)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleScalarSynchronousObservableWithRequestLimits(OperatorMerge.java:280)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleScalarSynchronousObservable(OperatorMerge.java:243)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:176)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:248)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:240)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorFilter$1.onNext(OperatorFilter.java:54)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.Subscriber.setProducer(Subscriber.java:171)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorBufferWithSize$1.onCompleted(OperatorBufferWithSize.java:119)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:75)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:62)at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)at java.util.concurrent.FutureTask.run(FutureTask.java:266)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at java.lang.Thread.run(Thread.java:745)Caused by: com.netflix.astyanax.connectionpool.exceptions.OperationTimeoutException: OperationTimeoutException: [host=10.16.4.135(10.16.4.135):9160 latency=5001(30012) attempts=6]TimedOutException()at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:171)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:65)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:28)at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$ThriftConnection.execute(ThriftSyncConnectionFactoryImpl.java:151)at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:119)at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:338)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4.execute(ThriftColumnFamilyQueryImpl.java:532)at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:187)... 146 moreCaused by: TimedOutException()at org.apache.cassandra.thrift.Cassandra$multiget_slice_result.read(Cassandra.java:10480)at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)at org.apache.cassandra.thrift.Cassandra$Client.recv_multiget_slice(Cassandra.java:673)at org.apache.cassandra.thrift.Cassandra$Client.multiget_slice(Cassandra.java:657)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:538)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:535)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)... 152 more{code},3,1,2,1,0,Todd Nine,Michael Russo,Michael Russo,4,0,2,1,1,0,0,0
USERGRID-1017,Story,177,Closed,Create a job to clean unused edges,We need a system job that audits edges and ensures they point to an entity.  If not the edge should be removed.,3,3,1,0,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,0,0,0,0,0
USERGRID-103,Improvement,177,Closed,Upgrade to latest Jersey 2.x release,JAX-RS 2.0 brings lots of new features much better extensible and async support are ones I think most useful ,5,3,8,1,0,David Johnson,Strong Liu,Strong Liu,17,0,1,1,1,0,0,0
USERGRID-941,Story,177,Closed,Spike: Investigate using Java Annotations to generate Swagger,null,5,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1018,Story,177,Closed,Create a job to remove duplicate connections and fix connection write logic,A bug in 2.0 has led to multiple edges on a connection.  We need a job that scans all connections and keeps the lowest timestamp on the connection.  Other edges should be deleted.,3,3,1,1,1,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-992,Story,177,Closed,Enable Org-level properties,null,5,3,2,1,0,Mike Dunker,Jeffrey West,Jeffrey West,4,0,0,0,0,0,0,0
USERGRID-1015,Story,177,Closed,Test Notification Migration ,null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-993,Story,177,Closed,Separate database system and system bootstrap,A call to /system/database/setup currently performs a database setup ES setup and then proceeds to migrate data.  This should be split into 2 separate events.  They should be the following. /system/database/setup creates all column families and ES indexes/system/database/bootstrap runs a datamigration manager then  creates all bootstrap data required for usergrid to function,3,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-989,Story,177,Closed,Create a multi region lock ability for shard allocation,With the new shard proposal algorithm we need the ability to either 1)  Perform routing aware shard allocation across multi regions.  This ensures that we ,5,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-909,Story,177,Closed,Evaluate removing cache from edge shard management,Currently using caches with the proposal phase for new shards has caused large numbers of tombstones.  Review the algorithm and determine the cause of the additional shard proposals.Usergrid currently performs 5 shard lookups on write and most miss the cache.  We'll change the following*Shard allocation*Shard allocation will not perform a propose + check phase. The following algorithm will occur.  This must occur at EACH_QUORUM to ensure that we have consensus across regions.  Any node will propose a new shard pivot.  This pivot will have compacted set to false and will have a column timestamp of a new timeuuid in microsThe proposing node will then read back all compacted = false shard pivots.  The shard pivot with the minimum timestamp will be retained all others will be deleted as proposals.  This will function similarly to distributed read locks in Cassandra.  Lowest proposed value always wins. Allocation is complete*Shard compaction*After a successful proposal allocation the allocating node will copy all edges from the previously compacted shard into the new shard.  It will continue to copy until no new edges are returned on read.Once read has been completed all edges that were copied can be deleted from the previous shard.  This target shard will be marked as compacted*Consistency*When performing consistency we will need a higher consistency level.  To ensure that shards exist worldwide proposal + selection should occur at EACH_QUORUM.  Standard reads can occur as LOCAL_QUORUM,5,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,0,0,2,1,1,0,0,0
USERGRID-1016,Story,177,Closed,Remove UUID field encoding in our ES fields,We shouldn't encode a UUID as a specific UUID field type since we're encoding it as a string.  To keep our index tuples simple and support both queries we should store it as a string type.  We should support the following formats.{code}select * where myUuid = 'aaa65d8a-16a6-11e5-86ea-7b4f7ff44431'{code}As well as {code}select * where myUuid = aaa65d8a-16a6-11e5-86ea-7b4f7ff44431{code}Notice the addition of single quotes in the first query vs the parsing as a UUID type in the second query.  This will enable users to use both versions but does not affect performance.,3,3,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-1005,Story,177,Closed,Add Background processing for delete application,null,2,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-991,Story,177,Closed,Fix tests after Jersey 2.0 upgrade,null,5,3,2,1,0,David Johnson,Jeffrey West,Jeffrey West,2,0,1,1,1,0,0,0
USERGRID-857,Story,177,Closed,"Portal page shows ""Thanks for signing up for a spot on our private beta"" when registering",The portal has the following text when someone registers.  We need to change it to be more meaningful and remove 'beta'.We're holding a seat for you! Thanks for signing up for a spot on our private beta. We will send you an email as soon as we're ready for you!In the mean time you can stay up to date with App Services on our GoogleGroup.Back to login,null,3,1,1,0,ryan bridges,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-54,Story,177,Closed,Remove old dead code and fully utilize guicy fig,In the CollecitonModule for Guice there appears to be old configuration code.  Can we remove and consolidate this to fully utilize the GuicyFig configurations?,null,3,1,0,0,null,Todd Nine,Todd Nine,0,0,1,0,0,0,0,0
USERGRID-737,Story,177,Closed,[SPIKE] Identify code/modules which need to be updated from Spring to Guice,We need to move everything to one wiring approach and it seems Guice is the choice.  Therefore we need to identify which components need to be updated to use Guice instead of Spring.,null,3,1,1,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-938,Story,177,Closed,Create a tool with the capability to wipe an application from Cassandra,Given an App ID we need to be able to wipe the data from Cassandra.  This can be standalone.,3,1,3,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-914,Story,177,Closed,Blog post for 10k TPS and horizontal scalability,null,2,3,1,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1000,Story,177,Closed,get apm/apigeeMobileConfig throws exception when its not set,2015-09-04 22:34:01420 [http-bio-8080-exec-22] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Uncaught Exceptionjava.lang.IllegalArgumentException: JSON source MUST not be null        at com.sun.jersey.api.json.JSONWithPadding.<init>(JSONWithPadding.java:90)        at org.apache.usergrid.rest.applications.ApplicationResource.getAPMConfig(ApplicationResource.java:613)        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)        at java.lang.reflect.Method.invoke(Method.java:483)        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)        at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)        at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:927)        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:875)        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:829)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)        at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)        at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)        at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)        at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)        at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61),3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-1014,Bug,177,Closed,Push Notification Delivery Expiration Not Working,"When setting the ""expire"" property on notification entities the notification delivery attempts are not expiring (will the notification provider is re-trying the delivery even past the notification expiration).",null,3,1,0,1,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-785,Bug,178,Closed,Unable to run 2.0 to 2.1 data migration on large data set.,Attempted to run entity data migration in (UG 2.0 to UG 2.1 ) with a instance having 1.1 million entities in a single collection within a single application.  This causes the following exception on cassandra:{code}ERROR [ReadStage:16] 2015-07-02 23:33:29720 SliceQueryFilter.java (line 206) Scanned over 100000 tombstones in ug_migrate_test.Graph_Source_Node_Edges; query aborted (see tombstone_failure_threshold)ERROR [ReadStage:27] 2015-07-02 23:33:39723 SliceQueryFilter.java (line 206) Scanned over 100000 tombstones in ug_migrate_test.Graph_Source_Node_Edges; query aborted (see tombstone_failure_threshold)ERROR [ReadStage:27] 2015-07-02 23:33:39723 CassandraDaemon.java (line 258) Exception in thread Thread[ReadStage:275main]java.lang.RuntimeException: org.apache.cassandra.db.filter.TombstoneOverwhelmingExceptionat org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2016)at {code}which results in the following exception in usergrid:{code}2015-07-02 23:33:59680 [Index migrate data formats] ERROR org.apache.usergrid.rest.MigrateResource- Unable to migrate datajava.lang.RuntimeException: Unable to connect to casandraat org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:190)at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.hasNext(MultiRowColumnIterator.java:122)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardsColumnIterator.hasNext(ShardsColumnIterator.java:65)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupColumnIterator.advance(ShardGroupColumnIterator.java:120)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupColumnIterator.hasNext(ShardGroupColumnIterator.java:68)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:66)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:71)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorFilter$1.onNext(OperatorFilter.java:54)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleScalarSynchronousObservableWithRequestLimits(OperatorMerge.java:280)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleScalarSynchronousObservable(OperatorMerge.java:243)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:176)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:248)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:240)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorFilter$1.onNext(OperatorFilter.java:54)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.Subscriber.setProducer(Subscriber.java:171)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorBufferWithSize$1.onCompleted(OperatorBufferWithSize.java:119)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:75)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:62)at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)at java.util.concurrent.FutureTask.run(FutureTask.java:266)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at java.lang.Thread.run(Thread.java:745)Caused by: com.netflix.astyanax.connectionpool.exceptions.OperationTimeoutException: OperationTimeoutException: [host=10.16.4.135(10.16.4.135):9160 latency=5001(30012) attempts=6]TimedOutException()at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:171)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:65)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:28)at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$ThriftConnection.execute(ThriftSyncConnectionFactoryImpl.java:151)at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:119)at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:338)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4.execute(ThriftColumnFamilyQueryImpl.java:532)at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:187)... 146 moreCaused by: TimedOutException()at org.apache.cassandra.thrift.Cassandra$multiget_slice_result.read(Cassandra.java:10480)at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)at org.apache.cassandra.thrift.Cassandra$Client.recv_multiget_slice(Cassandra.java:673)at org.apache.cassandra.thrift.Cassandra$Client.multiget_slice(Cassandra.java:657)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:538)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:535)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)... 152 more{code},3,1,2,1,0,Todd Nine,Michael Russo,Michael Russo,4,0,2,1,1,0,0,0
USERGRID-1017,Story,178,Closed,Create a job to clean unused edges,We need a system job that audits edges and ensures they point to an entity.  If not the edge should be removed.,3,3,1,0,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,0,0,0,0,0
USERGRID-103,Improvement,178,Closed,Upgrade to latest Jersey 2.x release,JAX-RS 2.0 brings lots of new features much better extensible and async support are ones I think most useful ,5,3,8,1,0,David Johnson,Strong Liu,Strong Liu,17,0,1,1,1,0,0,0
USERGRID-941,Story,178,Closed,Spike: Investigate using Java Annotations to generate Swagger,null,5,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1025,Bug,178,Closed,Cass status fails in a 2.0 cluster,When the /status page is called in a UG 2.0 cluster running against a 2.0 cassandra the following stack is generated and the status incorrectly reports RED.{code}2015-09-16 22:25:57065 [http-bio-8080-exec-10] WARN  com.netflix.astyanax.connectionpool.impl.Slf4jConnectionPoolMonitorImpl- TokenRangeOfflineException: [host=ruc017sy.ap-sy.4.apigee.com(10.10.30.26):9160 latency=2(2) attempts=1]UnavailableException()2015-09-16 22:25:57065 [http-bio-8080-exec-10] ERROR org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl- Error connecting to Cassandracom.netflix.astyanax.connectionpool.exceptions.TokenRangeOfflineException: TokenRangeOfflineException: [host=ruc017sy.ap-sy.4.apigee.com(10.10.30.26):9160 latency=2(2) attempts=1]UnavailableException()        at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:165)        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:65)        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:28)        at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$ThriftConnection.execute(ThriftSyncConnectionFactoryImpl.java:151)        at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:119)        at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:338)        at com.netflix.astyanax.thrift.AbstractThriftCqlQuery.execute(AbstractThriftCqlQuery.java:41)        at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl.getHealth(EntityCollectionManagerImpl.java:439)        at org.apache.usergrid.corepersistence.CpEntityManagerFactory.getEntityStoreHealth(CpEntityManagerFactory.java:730)        at org.apache.usergrid.rest.RootResource.getStatus(RootResource.java:199)        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)        at java.lang.reflect.Method.invoke(Method.java:497)        at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:144)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:161)        at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$TypeOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:205)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:99)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:389)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:347)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:102)        at org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:309)        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)        at org.glassfish.jersey.internal.Errors.process(Errors.java:315)        at org.glassfish.jersey.internal.Errors.process(Errors.java:297)        at org.glassfish.jersey.internal.Errors.process(Errors.java:267)        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:292)        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1139)        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:460)        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:386)        at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:548)        at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:489)        at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:426)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)        at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)        at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)        at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)        at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)        at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:505)        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:957)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:423)        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1079)        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:620)        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)        at java.lang.Thread.run(Thread.java:745)Caused by: UnavailableException()        at org.apache.cassandra.thrift.Cassandra$execute_cql3_query_result.read(Cassandra.java:38685)        at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)        at org.apache.cassandra.thrift.Cassandra$Client.recv_execute_cql3_query(Cassandra.java:1597)        at org.apache.cassandra.thrift.Cassandra$Client.execute_cql3_query(Cassandra.java:1582)        at com.netflix.astyanax.thrift.ThriftCql3Query.execute_cql_query(ThriftCql3Query.java:34)        at com.netflix.astyanax.thrift.AbstractThriftCqlQuery$1.internalExecute(AbstractThriftCqlQuery.java:46)        at com.netflix.astyanax.thrift.AbstractThriftCqlQuery$1.internalExecute(AbstractThriftCqlQuery.java:43)        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)        ... 65 more{code}When I run this command in cqlsh it succeeds{code}cqlsh> SELECT now() FROM system.local; now()-------------------------------------- 64cc0050-5cc2-11e5-bec7-61ce9a33c087(1 rows){code},null,3,3,0,1,David Johnson,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-1064,Story,178,Closed,Create a system endpoint to de-dup connections per application,We need the ability to de-dupe connections per application.  This will enable migrating specific user applications when a shared keyspace is used.,null,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-1029,Bug,178,Closed,When PUTing by uuid or name add the entry into entity_id_sets column family,When a PUT occurs in 1.0 then entry to Entity_Id_Sets is not re-inserted.  We need to ensure it is re-written.,3,3,1,1,1,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-1018,Story,178,Closed,Create a job to remove duplicate connections and fix connection write logic,A bug in 2.0 has led to multiple edges on a connection.  We need a job that scans all connections and keeps the lowest timestamp on the connection.  Other edges should be deleted.,3,3,1,1,1,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-992,Story,178,Closed,Enable Org-level properties,null,5,3,2,1,0,Mike Dunker,Jeffrey West,Jeffrey West,4,0,0,0,0,0,0,0
USERGRID-1015,Story,178,Closed,Test Notification Migration ,null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-1023,Story,178,Closed,Delete from collection does not use SQS or the event service,null,3,3,1,0,1,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-1027,Bug,178,Closed,Occational MIsses on Indexing into Elasticsearch,Occasionally applications still aren't being indexed into elasticsearch. Need to investigate why these might be occuring. ,8,3,1,0,1,null,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-1013,Story,178,Closed,Automate upload of api baas 2.1 build to s3,null,3,3,1,1,0,null,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-532,Story,178,Closed,Endpoint to get the size of the SQS index queue,null,2,3,3,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-1022,Story,178,Closed,remove batching in index processing,null,1,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-1007,Story,178,Closed,Implement a cache for Shiro & permissions,"How will a cache help improve performance?* Reduce load on Tomcat ES and C* caused by permissons calculation.          Do we need a distributed cache?* YES: Todd says we tried non-distributed cache (w/EhCache) and the caching was not effective (bad hit/mss ratio).Implementation ideas:* Use Cassandra column family implementation * Use Hazelcast cache* Use EhCache configured for distributed operationHow much should we expect performance to improve? How can we test this?* JUnit + metrics collection in our cache implementationSimplest approach seems to be Cassandra. Here's a design:h1. Add new Core Persistence Cache moduleThis is a new module that depends only on the Core Persistence Common module (and maybe Model?) and provides a generic cache interface that is ""segmented"" by a cache scope. When you put or get things you specify the cache scope and it is possible to invalidate all things within a cache scope with one call.{code}public interface SegmentedCache<KV> {   /** Put value into segment with ttl */   void put( CacheScope scope K key V value long ttl );   /** Get value from segment */   V get( CacheScope segment K key );   /** Delete all cache data of all types and of all scopes */   void invalidate();   /** Delete all cache data within specified segment */   void invalidate( CacheScope segment );}{code}Caches are stored in Cassandra *Usergrid_Cache* column family:* Row-key is applicationId* Column key is toString() of K key* Value is serialized V value objecth1. Plugin our Cache into Shiro at the REST module levelTo plugin to Shiro we provide implementations of the Shiro *CacheManager* and *Cache* interfaces that are backed by the Cache module. When permissions are updated we need need to ensure that the old cached permissions are invalidated. So we will modify the *EntityManager* revoke and grant methods to call invalidate for the application's cache scope.",5,3,3,1,0,David Johnson,Jeffrey West,Jeffrey West,6,0,0,0,0,0,0,0
USERGRID-1058,Story,178,Closed,Ability to generate a master Jacoco coverage report,In addition to separate Jacoco reports for each module we should also be able to generate a master Jacoco report.,3,3,2,1,0,David Johnson,David Johnson,David Johnson,4,0,0,0,0,0,0,0
USERGRID-1038,Story,178,Closed,2.1-release: fix index batching from SQS reader,null,3,3,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,0,0,0,0,0,0,0,0
USERGRID-1052,Bug,178,Closed,After large deletions graph seek time becomes slow,After a large number of deletions 100k + seek time on graph becomes very slow when searching collections.  Identify the issue and implement a fix based off of sha  a09485a3a5ac8b4217b294f4754ea8a70a7ec447,5,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,2,0,3,0,0,0,0,0
USERGRID-1048,Story,178,Resolved,When reading messages from SQS an elevated consistency may be needed with latent replication,Occasionally Cassandra multi-region replication lags during high load.  During this high load messages fail to process because it cannot read the entity from Cassandra.  Rather than fail we should retry with a high consistency level of quorum in all regions to ensure we replicate the data correctly.,3,1,1,1,0,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-1049,Story,178,Closed,Add originating region to SQS queue message,"The region will be used to optimize handling of SQS messages that arrive faster than the corresponding C* changes.Name in the SQS message body ""sourceRegion"".",null,3,2,1,0,Michael Russo,Mike Dunker,Mike Dunker,1,0,0,0,0,0,0,0
USERGRID-1050,Story,178,Closed,Remove SQS implementation,SQS impl is no longer necessary with the current implementation.  We should always use the SNS implementation.  Remove it and configure the SNS implementation to work with a single region.,null,3,1,1,0,null,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-1021,Story,178,Closed,Improve Location Attribute Handling to not require Lat/Lon and also be indexable,We should be able to store entities which have a 'location' attribute which does not have both 'lat' an 'lon'.  These fields should also be queryable and therefore indexed.,null,3,1,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1056,Bug,178,Closed,ES Documents not getting deleted when deleting entities,"EntityDeleteEvents are not processing successfully causing no documents to get deleted when an entity is deleted.{code}2015-10-21 03:17:02177 [QueueConsumer_3] ERROR org.apache.usergrid.corepersistence.asyncevents.AmazonAsyncEventService- Received empty index sequence message:(d51bd93b-f26d-4bb1-a643-19ff097f4ba5) body:({""entityDeleteEvent"":{""creationTime"":1445396528637""sourceRegion"":""us-east-1""""entityIdScope"":{""id"":{""uuid"":""3504d238-7467-11e5-b7a4-123f5d920dd1""""type"":""testentity""}""applicationScope"":{""application"":{""uuid"":""857fd592-7385-11e5-93f4-0af922a4f655""""type"":""application""}}}}}){code}",null,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-1062,Bug,178,Closed,Entity Edges are not getting deleted from graph when handling delete event,null,null,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,0,0,1,0,0,0,0,0
USERGRID-1065,Story,178,Closed,Create a system endpoint for the superuser to GET all apps for an org,null,null,3,2,1,0,Michael Russo,Todd Nine,Todd Nine,1,0,1,0,0,0,0,0
USERGRID-1066,Story,178,Closed,Create a system endpoint for the superuser to GET all orgs in the system,null,null,3,2,1,0,Michael Russo,Todd Nine,Todd Nine,1,0,1,0,0,0,0,0
USERGRID-933,Story,186,Closed,[SPIKE] Understand what remains and break up tasks for migrating properties from files on Tomcat to Org-level in the management app,null,3,3,2,1,0,Mike Dunker,Jeffrey West,Jeffrey West,13,0,0,0,0,0,0,0
USERGRID-1075,Story,186,Closed,Create Repair Tool to address Service Resource Exceptions from users who cannot be queried for their data,Find a way to resolve the state where a user may still have an entity ref but is not able to be queried or retrieved without uuid.,5,3,1,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-1076,Story,186,Closed,Create a Repair tool that will address null pointer exceptions on entity returns and then properly handle them,500 null pointer exceptions return when data is present in an entity reference but not returned from cassandra while this may be a data consistency issue an investigation needs to be done. That said in the mean time a tool should be created that either can retrieve the data and restore it ( update ) or to delete the left over entity reference. ,5,3,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-1073,Story,186,Closed,Test Windows phone,null,1,3,3,1,0,Shawn Feldman,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-926,Story,186,Closed,Include distances in geoquery responses,The best place for this would be in the metadata of the results in metadata.distance perhaps.,3,3,3,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,6,0,0,0,0,0,0,0
USERGRID-945,Story,186,Closed,Perform load testing of new shard management impl,We'll want to load test this with our existing entity writes during heavy load.  We need to ensure shard allocation can keep up and that we have a consistent view of the shards.  We need to test the following scenarios# Write over 10 million entities in a single collection single region only# Write over 10 million entities concurrently in 2 regions# Write over 10 million entities concurrently in 2 regions and fail 1 of the regions.  The system should still function just not allocate new shards.,5,2,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,0,0,0,0,0
USERGRID-1085,Story,186,Closed,Create RPM Distributable for Usergrid 2.1,null,5,2,1,0,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-785,Bug,186,Closed,Unable to run 2.0 to 2.1 data migration on large data set.,Attempted to run entity data migration in (UG 2.0 to UG 2.1 ) with a instance having 1.1 million entities in a single collection within a single application.  This causes the following exception on cassandra:{code}ERROR [ReadStage:16] 2015-07-02 23:33:29720 SliceQueryFilter.java (line 206) Scanned over 100000 tombstones in ug_migrate_test.Graph_Source_Node_Edges; query aborted (see tombstone_failure_threshold)ERROR [ReadStage:27] 2015-07-02 23:33:39723 SliceQueryFilter.java (line 206) Scanned over 100000 tombstones in ug_migrate_test.Graph_Source_Node_Edges; query aborted (see tombstone_failure_threshold)ERROR [ReadStage:27] 2015-07-02 23:33:39723 CassandraDaemon.java (line 258) Exception in thread Thread[ReadStage:275main]java.lang.RuntimeException: org.apache.cassandra.db.filter.TombstoneOverwhelmingExceptionat org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:2016)at {code}which results in the following exception in usergrid:{code}2015-07-02 23:33:59680 [Index migrate data formats] ERROR org.apache.usergrid.rest.MigrateResource- Unable to migrate datajava.lang.RuntimeException: Unable to connect to casandraat org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:190)at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.hasNext(MultiRowColumnIterator.java:122)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardsColumnIterator.hasNext(ShardsColumnIterator.java:65)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupColumnIterator.advance(ShardGroupColumnIterator.java:120)at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupColumnIterator.hasNext(ShardGroupColumnIterator.java:68)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:66)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:71)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorFilter$1.onNext(OperatorFilter.java:54)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleScalarSynchronousObservableWithRequestLimits(OperatorMerge.java:280)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleScalarSynchronousObservable(OperatorMerge.java:243)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:176)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:248)at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl$1.call(EntityCollectionManagerImpl.java:240)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:84)at rx.internal.operators.OperatorMerge$InnerSubscriber.emit(OperatorMerge.java:676)at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:586)at rx.internal.operators.OperatorFilter$1.onNext(OperatorFilter.java:54)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.Subscriber.setProducer(Subscriber.java:171)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)at rx.internal.operators.OperatorBufferWithSize$1.onCompleted(OperatorBufferWithSize.java:119)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:75)at org.apache.usergrid.persistence.core.rx.ObservableIterator.call(ObservableIterator.java:38)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorMerge$MergeSubscriber.handleNewSource(OperatorMerge.java:215)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:185)at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:120)at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96)at rx.Subscriber.setProducer(Subscriber.java:177)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47)at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable$1.call(Observable.java:144)at rx.Observable$1.call(Observable.java:136)at rx.Observable.unsafeSubscribe(Observable.java:7495)at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:62)at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)at java.util.concurrent.FutureTask.run(FutureTask.java:266)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at java.lang.Thread.run(Thread.java:745)Caused by: com.netflix.astyanax.connectionpool.exceptions.OperationTimeoutException: OperationTimeoutException: [host=10.16.4.135(10.16.4.135):9160 latency=5001(30012) attempts=6]TimedOutException()at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:171)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:65)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:28)at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$ThriftConnection.execute(ThriftSyncConnectionFactoryImpl.java:151)at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:119)at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:338)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4.execute(ThriftColumnFamilyQueryImpl.java:532)at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:187)... 146 moreCaused by: TimedOutException()at org.apache.cassandra.thrift.Cassandra$multiget_slice_result.read(Cassandra.java:10480)at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)at org.apache.cassandra.thrift.Cassandra$Client.recv_multiget_slice(Cassandra.java:673)at org.apache.cassandra.thrift.Cassandra$Client.multiget_slice(Cassandra.java:657)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:538)at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:535)at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)... 152 more{code},3,1,2,1,0,Todd Nine,Michael Russo,Michael Russo,4,0,2,1,1,0,0,0
USERGRID-1044,Story,186,Closed,Support for gatling load testing with unlimited feed,Support for multi-worker testing that can create an unlimited number of entities that can be audited. Includes a new interleaving feed for creating new entities as well as creating chunked CSV files in the audit format so that creation and indexing can be validated.,null,3,2,1,0,Mike Dunker,Mike Dunker,Mike Dunker,5,0,0,0,0,0,0,0
USERGRID-1017,Story,186,Closed,Create a job to clean unused edges,We need a system job that audits edges and ensures they point to an entity.  If not the edge should be removed.,3,3,1,0,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,0,0,0,0,0
USERGRID-103,Improvement,186,Closed,Upgrade to latest Jersey 2.x release,JAX-RS 2.0 brings lots of new features much better extensible and async support are ones I think most useful ,5,3,8,1,0,David Johnson,Strong Liu,Strong Liu,17,0,1,1,1,0,0,0
USERGRID-941,Story,186,Closed,Spike: Investigate using Java Annotations to generate Swagger,null,5,3,1,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1025,Bug,186,Closed,Cass status fails in a 2.0 cluster,When the /status page is called in a UG 2.0 cluster running against a 2.0 cassandra the following stack is generated and the status incorrectly reports RED.{code}2015-09-16 22:25:57065 [http-bio-8080-exec-10] WARN  com.netflix.astyanax.connectionpool.impl.Slf4jConnectionPoolMonitorImpl- TokenRangeOfflineException: [host=ruc017sy.ap-sy.4.apigee.com(10.10.30.26):9160 latency=2(2) attempts=1]UnavailableException()2015-09-16 22:25:57065 [http-bio-8080-exec-10] ERROR org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl- Error connecting to Cassandracom.netflix.astyanax.connectionpool.exceptions.TokenRangeOfflineException: TokenRangeOfflineException: [host=ruc017sy.ap-sy.4.apigee.com(10.10.30.26):9160 latency=2(2) attempts=1]UnavailableException()        at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:165)        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:65)        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:28)        at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$ThriftConnection.execute(ThriftSyncConnectionFactoryImpl.java:151)        at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:119)        at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:338)        at com.netflix.astyanax.thrift.AbstractThriftCqlQuery.execute(AbstractThriftCqlQuery.java:41)        at org.apache.usergrid.persistence.collection.impl.EntityCollectionManagerImpl.getHealth(EntityCollectionManagerImpl.java:439)        at org.apache.usergrid.corepersistence.CpEntityManagerFactory.getEntityStoreHealth(CpEntityManagerFactory.java:730)        at org.apache.usergrid.rest.RootResource.getStatus(RootResource.java:199)        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)        at java.lang.reflect.Method.invoke(Method.java:497)        at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:144)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:161)        at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$TypeOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:205)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:99)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:389)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:347)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:102)        at org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:309)        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)        at org.glassfish.jersey.internal.Errors.process(Errors.java:315)        at org.glassfish.jersey.internal.Errors.process(Errors.java:297)        at org.glassfish.jersey.internal.Errors.process(Errors.java:267)        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:292)        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1139)        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:460)        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:386)        at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:548)        at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:489)        at org.glassfish.jersey.servlet.ServletContainer.doFilter(ServletContainer.java:426)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)        at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)        at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)        at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)        at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)        at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:505)        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:957)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:423)        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1079)        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:620)        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)        at java.lang.Thread.run(Thread.java:745)Caused by: UnavailableException()        at org.apache.cassandra.thrift.Cassandra$execute_cql3_query_result.read(Cassandra.java:38685)        at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)        at org.apache.cassandra.thrift.Cassandra$Client.recv_execute_cql3_query(Cassandra.java:1597)        at org.apache.cassandra.thrift.Cassandra$Client.execute_cql3_query(Cassandra.java:1582)        at com.netflix.astyanax.thrift.ThriftCql3Query.execute_cql_query(ThriftCql3Query.java:34)        at com.netflix.astyanax.thrift.AbstractThriftCqlQuery$1.internalExecute(AbstractThriftCqlQuery.java:46)        at com.netflix.astyanax.thrift.AbstractThriftCqlQuery$1.internalExecute(AbstractThriftCqlQuery.java:43)        at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)        ... 65 more{code}When I run this command in cqlsh it succeeds{code}cqlsh> SELECT now() FROM system.local; now()-------------------------------------- 64cc0050-5cc2-11e5-bec7-61ce9a33c087(1 rows){code},null,3,3,0,1,David Johnson,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-1064,Story,186,Closed,Create a system endpoint to de-dup connections per application,We need the ability to de-dupe connections per application.  This will enable migrating specific user applications when a shared keyspace is used.,null,3,1,1,0,Todd Nine,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-1088,Bug,186,Closed,Objects nested in arrays are not getting indexed.,"In Usergrid we don't support n+1 arrays for indexing however if you have objects nested within arrays we should index the nested object's key/value pairs.In the below document *""nestedKey"": ""nestedValue""* and *""key"": ""value""* should get indexed.  The value  *""1"" in nestedLists* should still NOT be indexed.{code}{  ""name"": ""region3""  ""nestedLists"": [    [      ""1""    ]  ]  ""nestedObjects"": [    {      ""array"": [        {          ""nestedKey"": ""nestedValue""        }      ]      ""key"": ""value""    }  ]}{code}",null,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,0,0,1,0,0,0,0,0
USERGRID-1067,Story,186,Closed,Finish 2.1 release testing,We need to test the following issues to verify they've been fixed.Multi region writes and index syncingMulti region mass collection deletes: Delete the entire collection then ensure that seek times are fast with no query language.,3,3,2,1,0,Mike Dunker,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-1068,Story,186,Closed,Create a per app migration script,Create a python script that will allow users to upgrade from 2.0 to 2.1 per application.  This will ultimately allow an incremental deployment across an existing 2.0 cluster without user impact.  Template for full system script that already exists: https://github.com/apache/usergrid/blob/2.1-release/stack/scripts/migrate_entity_data.pyIt should allow for the following migration process:tenant 11) setup new 2.1 tomcat2) run migration bootstrap3) migrate appinfo4) reindex mgmt app only5) run de-dup for whatever APP6) reindex whatever APP7) add 2.1 tomcats to customer ELB after 1-6 completed for all customer apps8) run delta re-index/migration for all customer appstenant 21) reset appinfo version2) migrate app info3) reindex mgmt app4) run de-dup for whatever APP5) reindex whatever app7) add 2.1 tomcats to customer ELB after 1-6 completed for all customer apps8) run delta re-index/migration for all customer appsafter all apps migration1) migrate entity data,2,3,3,1,0,David Johnson,Todd Nine,Todd Nine,4,0,0,0,0,0,0,0
USERGRID-1071,Story,186,Closed,Test iOS push notifications,null,1,3,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-1072,Story,186,Closed,Test Android push notifications,null,1,3,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-1074,Story,186,Closed,[SPIKE] Evaluate read repair of unique values in 1.0,null,1,3,2,1,0,George Reyes,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-1069,Story,186,Closed,implement build metrics in jenkins,null,1,4,1,1,0,Shawn Feldman,Shawn Feldman,Shawn Feldman,1,0,0,0,0,0,0,0
USERGRID-1079,Story,186,Closed,Add 2 endpoints for password hash migration,It is currently possible to migrate from a 1.0 installation to a 2.1 installation via a RESTful client.  However due to the inability to securely move password hashes application user's passwords are not retained.   Add the following.# In the 1.x branch add the ability to retrieve the password hash.   This should only be allowed by the superuser.# In 2.1-release add the ability to write the password hash to an application user.  This should only be allowed by the superuser.Note that the reason this is only allowed as a superuser is that we want to disable this functionality by default.  Any UG installation that is public facing should not have superuser enable.  This allows us to disable this functionality in environments that are publicly available environments.,5,3,2,1,0,Todd Nine,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-1080,Story,186,Closed,Change elasticsearch query for retrieving versions,Currently using scroll and also does a select * followed by post query filters which may be hugely inefficient.New solution uses repeated requests where we query (not scroll) through the results by ordering by edge timestamp and then excluding previously found timestamp range in successive queries.Michael/Mike pairing.,null,3,1,1,0,Michael Russo,Mike Dunker,Mike Dunker,0,0,0,0,0,0,0,0
USERGRID-1091,Story,186,Closed,AbstractReadGraphFilter produces and queues empty queue operations,When read repair is triggered it is possible that there are now deIndexRequests to be queued.  Currently we're queueing empty operations and need to filter this properly.,1,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-462,Bug,186,Resolved,[SPIKE] Investigate geo location re-index failure,When re-indexing entities that have a geo_location on it the geo_field is missing.  We need to investigate why this is happening.,3,1,1,1,0,Shawn Feldman,Todd Nine,Todd Nine,0,0,0,0,0,0,0,0
USERGRID-933,Story,210,Closed,[SPIKE] Understand what remains and break up tasks for migrating properties from files on Tomcat to Org-level in the management app,null,3,3,2,1,0,Mike Dunker,Jeffrey West,Jeffrey West,13,0,0,0,0,0,0,0
USERGRID-1187,Story,210,Closed,Ensure that PUT or POST does not create duplicate org association connections. ,Doing PUT creates a duplicate edge on /management/orgs/org/users/emailfor existing users who were already on the org the POST command to /management/orgs/org/users/email creates a duplicate edge,2,3,2,1,1,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-1076,Story,210,Closed,Create a Repair tool that will address null pointer exceptions on entity returns and then properly handle them,500 null pointer exceptions return when data is present in an entity reference but not returned from cassandra while this may be a data consistency issue an investigation needs to be done. That said in the mean time a tool should be created that either can retrieve the data and restore it ( update ) or to delete the left over entity reference. ,5,3,1,1,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-1073,Story,210,Closed,Test Windows phone,null,1,3,3,1,0,Shawn Feldman,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-926,Story,210,Closed,Include distances in geoquery responses,The best place for this would be in the metadata of the results in metadata.distance perhaps.,3,3,3,1,0,Shawn Feldman,Jeffrey West,Jeffrey West,6,0,0,0,0,0,0,0
USERGRID-945,Story,210,Closed,Perform load testing of new shard management impl,We'll want to load test this with our existing entity writes during heavy load.  We need to ensure shard allocation can keep up and that we have a consistent view of the shards.  We need to test the following scenarios# Write over 10 million entities in a single collection single region only# Write over 10 million entities concurrently in 2 regions# Write over 10 million entities concurrently in 2 regions and fail 1 of the regions.  The system should still function just not allocate new shards.,5,2,1,1,0,Todd Nine,Todd Nine,Todd Nine,1,0,1,0,0,0,0,0
USERGRID-1085,Story,210,Closed,Create RPM Distributable for Usergrid 2.1,null,5,2,1,0,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1032,Story,210,Closed,Test and confirm Usergrid 2.1 works with Cassandra 2.1,null,2,2,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1031,Story,210,Closed,Test and confirm Usergrid 1.0 works with Cassandra 2.1,1) Test locally2) Confirm in e2e,2,3,2,0,1,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-876,Story,210,Closed,[SPIKE] Review 'ignored tests',Hopefully there's nothing bad in there.,3,3,2,0,2,David Johnson,Jeffrey West,Jeffrey West,4,0,0,0,0,0,0,0
USERGRID-1099,Bug,210,Closed,Order of operations error in Query Execution,I have a test that shows that queries of this form work:C = c and ( A > a or B = false )But the very same query formed like this will not work properly:( A > a or B = false ) and C = c,5,3,2,1,0,David Johnson,David Johnson,David Johnson,4,0,1,0,0,0,0,0
USERGRID-872,Bug,210,Closed,Fix and prune Usergrid tools in 2.1,The Usergrid tools are broken in a variety of ways in the two-dot-o and two-dot-o-dev brands. The tools do not compile. Many rely on outdated 1.0 concepts. Many are obsolete.1. Delete any obsolete tools2. Make all tools compile,3,4,2,1,0,David Johnson,David Johnson,David Johnson,2,0,1,0,0,0,0,0
USERGRID-1101,Story,210,Closed,Unique Value Cleanup in 2.1 - cleaning up old columns for old versions,Ensure code makes it in to prevent wide rows in unique_values CF due to old versions not getting cleaned up,3,3,2,1,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1053,Story,210,Closed,[SPIKE] Audit TODOs in the code,We need to audit the TODO statements in the code.  For each we must:1) Check if there is an existing ticket- If there is no ticket create one2) Update the TODO statement with the link to the ticket3) Prioritize based on:- Will this generate a P1 case with a customer?- What is the usability impact of the product?Once we have audited these we will prioritize and schedule fixes,5,2,1,0,0,Todd Nine,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1115,Story,210,Closed,Fix AdminUsersIT tests,Six of the AdminUsersIT tests are ignored because they interfere with other tests and other reasons.  Figure out how to run those tests serially or some other way to test admin user features.,5,3,2,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1112,Bug,210,Closed,Test and Fix Shard Delete,There is a race condition between shard allocation and shard delete.  When a shard has been allocated it is getting removed AFTER edges are present.  This needs resolved.,null,3,2,1,0,Michael Russo,Todd Nine,Todd Nine,1,0,0,0,0,0,0,0
USERGRID-1122,Story,210,Closed,NullPointerException during read repair,In buildEntityDelete in EventBuilderImpl it can return null.  This is causing NPEs in AbstractReadGraphFilter.  We should return a result set with an empty observable instead of returning null.,null,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1119,Story,210,Closed,Fix GroupResourceIT.postGroupActivity() test,null,3,3,2,1,0,David Johnson,David Johnson,David Johnson,4,0,0,0,0,0,0,0
USERGRID-1106,Story,210,Closed,Fix test: clientCredentialsFlowWithHeaderAuthorization(),Currently this test is ignored in Usergrid master branch:ApplicationResourceIT.clientCredentialsFlowWithHeaderAuthorization()If it is still relevant we should fix it and un-ignore it.,3,3,2,1,0,David Johnson,David Johnson,David Johnson,4,0,0,0,0,0,0,0
USERGRID-1126,Bug,210,Closed,Documents not getting index when JSON contains latitude or longitude fields with empty string values,"Exception seen:{code}2015-11-21 21:40:37249 [Usergrid-SQS-Pool-88] ERROR org.apache.usergrid.corepersistence.asyncevents.AmazonAsyncEventService- Failed to index message: 7435e8a3-9f4c-4a08-a833-307698c45cbdjava.lang.RuntimeException: Error during processing of bulk index operations one of the responses failed.MapperParsingException[failed to parse]; nested: NumberFormatException[empty String];{code}Inside the entities there are latitude and longitude fields which contain empty strings.  These are mapped in Usergrid/Elasticsearch as geo_point types which are expected to be numbers or non-empty strings that can parse to coordiantes.  This is causing the document to get rejected upon indexing.  See the following for ensuring we are pre-validating so documents don't get rejected: https://www.elastic.co/guide/en/elasticsearch/reference/1.7/mapping-geo-point-type.htmlNeeds to be fixed here to not add the lat and lon properties if the values are null or empty strings  (non empty strings index without a problem).org/apache/usergrid/persistence/index/impl/EntityMappingParser.java:133A temporary workaround is just to assign a number value for these fields or just don't include them at all in the JSON request.Current:{code}""geographicCoordinates"": {              ""latitude"": """"              ""longitude"": """"            }{code}Example workaround:{code}""geographicCoordinates"": {              ""latitude"": 1              ""longitude"": 1            }{code}",null,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1186,Story,210,Closed,Add DELETE for Admin Users,#NAME?,2,3,2,0,0,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-1100,Story,210,Closed,POST /users/{user}/devices/notifications does not work.,null,1,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-1181,Story,210,Closed,"Allow notification entities to be deleted if they are not ""in progress""",Update NotificationsService to be allow removal of notifications that are not in a processing state:{code}@Override    protected boolean isDeleteAllowed(ServiceContext context Entity entity) {        Notification notification = (Notification) entity;        Notification.State state = notification.getState();        return !(state.equals(Notification.State.CREATED) || state.equals(Notification.State.STARTED) ||                state.equals(Notification.State.SCHEDULED));    }{code},null,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1104,Bug,210,Closed,Indexes in Elasticsearch created with alias names,This was seen when running the index mapping migration plugin on an elastic search cluster that's already running with indexes that have the latest mapping we see the following exception and the migration does not complete:{code}2015-11-11 19:26:17468 [Index migrate data formats] INFO  org.apache.usergrid.persistence.core.migration.data.DataMigrationManagerImpl- Migration version 2.  Failed to migrate reason is appended.  Error 'failed to update' org.elasticsearch.index.mapper.MergeMappingException: Merge failed with failures {[mapper [entityVersion] has different index values mapper [entityVersion] has different doc_values values mapper [entityVersion] has different tokenize values mapper [entityVersion] has different index_analyzer mapper [edgeName] has different index values mapper [edgeName] has different doc_values values mapper [edgeName] has different tokenize values mapper [edgeName] has different index_analyzer mapper [entityNodeType] has different index values mapper [entityNodeType] has different doc_values values mapper [entityNodeType] has different tokenize values mapper [entityNodeType] has different index_analyzer mapper [edgeTimestamp] has different doc_values values mapper [entityType] has different index values mapper [entityType] has different doc_values values mapper [entityType] has different tokenize values mapper [entityType] has different index_analyzer mapper [entitySize] has different doc_values values mapper [_all] enabled is true now encountering false mapper [edgeSearch] has different index values mapper [edgeSearch] has different doc_values values mapper [edgeSearch] has different tokenize values mapper [edgeSearch] has different index_analyzer mapper [entityId] has different index values mapper [entityId] has different doc_values values mapper [entityId] has different tokenize values mapper [entityId] has different index_analyzer mapper [nodeId] has different index values mapper [nodeId] has different doc_values values mapper [nodeId] has different tokenize values mapper [nodeId] has different index_analyzer mapper [applicationId] has different index values mapper [applicationId] has different doc_values values mapper [applicationId] has different tokenize values mapper [applicationId] has different index_analyzer object mapping [fields] can't be changed from non-nested to nested]}        at org.elasticsearch.cluster.metadata.MetaDataMappingService$4.execute(MetaDataMappingService.java:511)        at org.elasticsearch.cluster.service.InternalClusterService$UpdateTask.run(InternalClusterService.java:352)        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.runAndClean(PrioritizedEsThreadPoolExecutor.java:184)        at org.elasticsearch.common.util.concurrent.PrioritizedEsThreadPoolExecutor$TieBreakingPrioritizedRunnable.run(PrioritizedEsThreadPoolExecutor.java:154)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)        at java.lang.Thread.run(Thread.java:745)Caused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: rug000dn_a47ce531-0020-11e5-bfa2-0a0dfc3edbb7_write_alias        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:104)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:81)        at rx.internal.operators.OperatorMerge$MergeSubscriber.emitScalar(OperatorMerge.java:364)        at rx.internal.operators.OperatorMerge$MergeSubscriber.tryEmit(OperatorMerge.java:326)        at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:802)        at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.slowpath(OnSubscribeFromIterable.java:97)        at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:73)        at rx.Subscriber.setProducer(Subscriber.java:211)        at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:49)        at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:32)        at rx.Observable.unsafeSubscribe(Observable.java:7710)        at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:231)        at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:140)        at rx.internal.operators.OperatorMap$1.onNext(OperatorMap.java:55)        at rx.internal.operators.OnSubscribeToObservableFuture$ToObservableFuture.call(OnSubscribeToObservableFuture.java:74)        at rx.internal.operators.OnSubscribeToObservableFuture$ToObservableFuture.call(OnSubscribeToObservableFuture.java:42)        at rx.Observable$2.call(Observable.java:162)        at rx.Observable$2.call(Observable.java:154)        at rx.Observable$2.call(Observable.java:162)        at rx.Observable$2.call(Observable.java:154)        at rx.Observable$2.call(Observable.java:162)        at rx.Observable$2.call(Observable.java:154)        at rx.Observable$2.call(Observable.java:162) at rx.Observable$2.call(Observable.java:154)        at rx.Observable$2.call(Observable.java:162)        at rx.Observable$2.call(Observable.java:154)        at rx.Observable$2.call(Observable.java:162)        at rx.Observable$2.call(Observable.java:154)        at rx.Observable.subscribe(Observable.java:7804)        at rx.Observable.subscribe(Observable.java:7772)        at rx.Observable.subscribe(Observable.java:7484)        at org.apache.usergrid.persistence.index.migration.EsIndexMappingMigrationPlugin.run(EsIndexMappingMigrationPlugin.java:97)        at org.apache.usergrid.persistence.core.migration.data.DataMigrationManagerImpl.lambda$migrate$2(DataMigrationManagerImpl.java:124)        at org.apache.usergrid.persistence.core.migration.data.DataMigrationManagerImpl$$Lambda$121/1554791835.accept(Unknown Source)        at java.util.ArrayList.forEach(ArrayList.java:1249)        at org.apache.usergrid.persistence.core.migration.data.DataMigrationManagerImpl.migrate(DataMigrationManagerImpl.java:122)        at org.apache.usergrid.rest.system.MigrateResource$1.run(MigrateResource.java:99){code},null,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-1185,Story,210,Closed,PUT by name does a GET on an entity twice,We are tracking down the need for lots of GC on continuous PUT by name (different name/entities).  When looking at this we discovered that there are two GETs of an entity when doing PUT by name: 1) GET to see if it exists and 2) GET to get the entity to update (since PUT is really a PATCH).It would be more optimal to only have one GET in this scenario,null,3,1,1,0,Michael Russo,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1116,Story,187,Closed,Fix MessagesIT tests,Four of the MessagesIT tests are ignored. Fix these tests and un-ignore them.,null,3,2,1,2,George Reyes,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1118,Story,187,Closed,Fix EventsResource and IT,The EventsResource was broken during two-dot-o development and the tests in EventsResourceIT were marked ignore.Fix the EventsResource and re-enable the tests.,3,3,2,1,0,George Reyes,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-1205,Story,187,Closed,Duplicate Admin Repair,Develop a duplicate admin user repair tool that is testable with a dry-run feature.,null,3,2,1,0,David Johnson,David Johnson,David Johnson,3,0,0,0,0,0,0,0
USERGRID-933,Story,187,Closed,[SPIKE] Understand what remains and break up tasks for migrating properties from files on Tomcat to Org-level in the management app,null,3,3,2,1,0,Mike Dunker,Jeffrey West,Jeffrey West,13,0,0,0,0,0,0,0
USERGRID-1187,Story,187,Closed,Ensure that PUT or POST does not create duplicate org association connections. ,Doing PUT creates a duplicate edge on /management/orgs/org/users/emailfor existing users who were already on the org the POST command to /management/orgs/org/users/email creates a duplicate edge,2,3,2,1,1,George Reyes,George Reyes,George Reyes,1,0,0,0,0,0,0,0
USERGRID-1075,Story,187,Closed,Create Repair Tool to address Service Resource Exceptions from users who cannot be queried for their data,Find a way to resolve the state where a user may still have an entity ref but is not able to be queried or retrieved without uuid.,5,3,1,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-921,Story,187,Closed,Remove duplicate add to collection on write path,Todd's spaghetti comments on write path which results in 2x writes to cassandra ops.,3,2,3,1,0,George Reyes,Jeffrey West,Jeffrey West,4,0,0,0,0,0,0,0
USERGRID-1095,Story,187,Closed,Investigate query parsing and execution issues related to order of operations,null,null,3,1,0,0,null,Jeffrey West,Jeffrey West,0,0,1,0,0,0,0,0
USERGRID-1026,Story,187,Closed,Logic to detect (N+1)-d arrays catches a case where there is no 2-d array,"This entity is not fully indexed with the error message below.  It does not have a (direct) 2-d array.  It does have nested arrays however.2015-09-18 03:20:28190 [Usergrid-RxIOPool-151] WARN  org.apache.usergrid.persistence.index.impl.EntityMappingParser- Encountered 2 collections consecutively.  N+1 dimensional arrays are unsupported only arrays of depth 1 are supported{   ""type"" : ""example""   ""name"" : ""8980031""   ""created"" : 1442527975706   ""modified"" : 1442547269098   ""FacilityName"" : ""ALICES RESTAURANT""   ""LastUpdateOn"" : ""9/17/2015""   ""Locations"" : [ {     ""Addresses"" : [ {       ""Zip"" : ""94062""       ""AddressLine1"" : ""17288 Skyline Blvd""       ""LatNbr"" : ""37.386916""       ""LongNbr"" : ""-122.265383""       ""State"" : ""CA""       ""AddrUseCd"" : ""PH""       ""City"" : ""WOODSIDE""     } ]     ""Phones"" : [ {       ""PhnUseCd"" : ""PH""       ""PhoneNbr"" : ""123-456-3534""     } ]     ""LocSeq"" : ""1""     ""PracLocStrtDt"" : ""1/1/9999""     ""PracLocEndDt"" : ""3/31/9999""     ""Accepting"" : false     ""PracLocSpecialties"" : [ {       ""SpcltyPrimInd"" : ""Y""       ""SpcltyDsc"" : ""PANCAKES""       ""SpcltyCd"" : ""BRKF""     } ]   } ]   ""TheId"" : 8980031   ""ProviderType"" : ""FAC""   ""PvdrEndDt"" : ""3/31/2008""   ""PvdrSpecialties"" : [ {     ""SpcltyPrimInd"" : ""Y""     ""SpcltyDsc"" : ""PANCAKES""     ""SpcltyCd"" : ""BRKF""   } ] }",1,1,1,1,0,Michael Russo,Jeffrey West,Jeffrey West,0,0,1,0,0,0,0,0
USERGRID-1033,Story,187,Closed,Test and confirm Usergrid 2.0 works with Cassandra 2.1,null,1,3,1,1,0,Michael Russo,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1051,Story,187,Closed,When ElasticSearch rejects a Search request Usergrid should not return 200 OK with an empty array,Currently if the search queue is full a 200 response is returned with an empty entity array.,1,3,6,1,1,George Reyes,Jeffrey West,Jeffrey West,4,2,1,0,0,0,0,0
USERGRID-1113,Story,187,Closed,Improve NotificationsService test coverage,Currently many of the NotificationsServiceIT and NotifiersServiceIT test are either broken or incomplete because we were unable to create the mocks we need to test the code. We should revisit this and figure out how to get better test coverage for notifications in general.Search the code for USERGRID-1113 to find the tests that should be unignored fixed replace or deleted.,2,3,2,1,0,Michael Russo,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1182,Story,187,Closed,Support GCM 3.0 for Android Push Notifications,null,2,3,2,1,0,Michael Russo,Michael Russo,Michael Russo,7,0,2,0,0,0,0,0
USERGRID-35,Bug,187,Closed,Cannot delete an entity that has a connection to it,"""To repro attempt to delete an entity that has a connection to it such as: curl -X DELETE """"https://api.com/fdsafdsa/testapp/dog/Dachsund"""" Notice that you get error message: {""""error"""":""""class_cast""""""""timestamp"""":1386200483978""""duration"""":0""""exception"""":""""java.lang.ClassCastException""""""""error_description"""":""""org.usergrid.persistence.cassandra.ConnectedEntityRefImpl cannot be cast to org.usergrid.persistence.cassandra.ConnectionRefImpl""""} It is expected that the entity is deleted and the connection is deleted as well.""",3,2,5,1,0,George Reyes,Rod Simpson,Rod Simpson,4,0,0,0,0,0,0,0
USERGRID-1083,Bug,187,Closed,getEntityByName 404 API response logs unnecessary Uncaught Exception ERROR,2015-10-29 00:50:19056 [http-bio-8080-exec-342] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- Uncaught Exceptionorg.apache.usergrid.persistence.exceptions.EntityNotFoundException: Cannot find entity with name: test2307924        at org.apache.usergrid.services.AbstractCollectionService.getItemByName(AbstractCollectionService.java:155),null,2,2,1,0,George Reyes,Michael Russo,Michael Russo,2,0,0,0,0,0,0,0
USERGRID-144,Story,187,Closed,Assets: File meta not refreshed after PUT,In the new implementation of assets PUT operations update the asset data but do not update the file metadata.This means that if the content-type of the asset changes GET operations fail if I specify the expected content-type in the Accept header.For example if I attach an asset with content-type: image/jpeg I can PUT a new jpeg and retrieve the new image with the Accept: image/jpeg header.But...If I PUT a text file the file metadata remains content-type: image/jpeg so a GET with Accept: text/plain fails.But...A GET with Accept: image/jpeg succeeds and I get back the data for my text file.,null,4,3,1,0,George Reyes,Rod Simpson,Rod Simpson,2,0,0,0,0,0,0,0
USERGRID-1012,Story,187,Closed,Geolocation with limit of 610.000 returns a result with distance of 610.09,"Testing with the following entities and locations shows that we are rounding when people might not be expecting it:    UsergridEntity e = new UsergridEntity(collectionName);    e.setLocation(37.334115 -121.894340);    e.setProperty(""name"" ""Apigee Office"");    e.POST();    UsergridEntity amicis = new UsergridEntity(collectionName);    amicis.setLocation(37.335616 -121.894168);    amicis.setProperty(""name"" ""Amicis"");    amicis.POST();    UsergridEntity sanPedroMarket = new UsergridEntity(collectionName);    sanPedroMarket.setLocation(37.336499 -121.894356);    sanPedroMarket.setProperty(""name"" ""SanPedroMarket"");    sanPedroMarket.POST();    UsergridEntity saintJamesPark = new UsergridEntity(collectionName);    saintJamesPark.setLocation(37.339079 -121.891422);    saintJamesPark.setProperty(""name"" ""saintJamesPark"");    saintJamesPark.POST();    UsergridEntity sanJoseNews = new UsergridEntity(collectionName);    sanJoseNews.setLocation(37.337812 -121.890784);    sanJoseNews.setProperty(""name"" ""sanJoseNews"");    sanJoseNews.POST();    UsergridEntity deAnza = new UsergridEntity(collectionName);    deAnza.setLocation(37.334370 -121.895081);    deAnza.setProperty(""name"" ""deAnza"");    deAnza.POST();?ql=select+*++WHERE+location++within+610.0+of+37.334110260009766-121.89434051513672",null,2,3,1,0,George Reyes,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-936,Story,187,Closed,Unit Test for MapToEntityConverter.processListForField to test for 2d array and infinite loop,2015-08-25 00:01:10246 [http-bio-8080-exec-313] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- org.apache.usergrid.rest.exceptions.UncaughtException Server Error (500)org.apache.usergrid.rest.exceptions.UncaughtException: java.lang.StackOverflowError        at org.apache.usergrid.rest.exceptions.AbstractExceptionMapper.toResponse(AbstractExceptionMapper.java:59)        at org.apache.usergrid.rest.exceptions.ThrowableMapper.toResponse(ThrowableMapper.java:37)        at com.sun.jersey.spi.container.ContainerResponse.mapException(ContainerResponse.java:480)        at com.sun.jersey.spi.container.ContainerResponse.mapMappableContainerException(ContainerResponse.java:417)        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1477)        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:927)        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:875)        at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:829)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)        at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)        at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)        at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)        at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)        at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:343)        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:260)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:504)        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1074)        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:314)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)        at java.lang.Thread.run(Thread.java:745)Caused by: java.lang.StackOverflowError        at org.apache.usergrid.persistence.model.entity.MapToEntityConverter.processListForField(MapToEntityConverter.java:148)        at org.apache.usergrid.persistence.model.entity.MapToEntityConverter.processListForField(MapToEntityConverter.java:148)        at org.apache.usergrid.persistence.model.entity.MapToEntityConverter.processListForField(MapToEntityConverter.java:148)        at org.apache.usergrid.persistence.model.entity.MapToEntityConverter.processListForField(MapToEntityConverter.java:148)        at org.apache.usergrid.persistence.model.entity.MapToEntityConverter.processListForField(MapToEntityConverter.java:148),1,2,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-767,Bug,187,Closed,WebApplicationException / Uncaught Exception embarassment,"The following exception is returned for many cases including a parse error and if an endpoint doesn't support the attempted HTTP method.  We need more descriptive messages in these cases.{""error"":""web_application""""timestamp"":1435156493000""duration"":0""exception"":""javax.ws.rs.WebApplicationException""}",3,2,4,1,0,George Reyes,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-1203,Story,187,Closed,Allow certs in notifiers to be updated and store their details in the entity.,null,1,4,2,1,0,Michael Russo,Michael Russo,Michael Russo,2,0,0,0,0,0,0,0
USERGRID-1200,Story,187,Closed,Org config override for portal and API URLs,"1. Add usergrid.api.url.base property (defaults to http://localhost:8080/ROOT) that can be overridden for an org.2. The confirmation and activation properties are hardcoded paths and don't need org overrides. Example:usergrid.admin.activation.url is built by concatenating usergrid.api.url.base and ""/management/users/%s/activate""3. swagger.basepath removed and replaced by usergrid.api.url.base.4. Refactor orgconfig to return system defaults if not configurable by org.usergrid.redirect_root changes will happen later -- org not known when setting is being used so no need to add an org config item.",null,3,2,1,0,Mike Dunker,Mike Dunker,Mike Dunker,4,0,0,0,0,0,0,0
USERGRID-1047,Story,187,Closed,GET on missing Asset file in S3 generates 500 error not 404,When doing a GET on an asset file that doesn't exist it should return a 404 rather than a 500 error because the file is not there. ,null,3,3,1,0,George Reyes,Jeffrey West,Jeffrey West,3,0,0,0,0,0,0,0
USERGRID-1209,Story,187,Closed,GET on missing Asset file in S3 generates 500 error not 404,null,1,3,1,1,0,George Reyes,George Reyes,George Reyes,0,0,0,0,0,0,0,0
USERGRID-1210,Story,187,Closed,Fix AwsAssetResourceIT,Fix all the broken asset tests,3,3,2,1,0,George Reyes,George Reyes,George Reyes,2,0,0,0,0,0,0,0
USERGRID-1211,Story,187,Closed,Migrate locks from Hector to Astyanax,Implement locks and a lock manager using Astyanax driver.,3,2,1,1,0,Michael Russo,Michael Russo,Michael Russo,1,0,1,0,0,0,0,0
USERGRID-1241,Story,187,Closed,Org config settings for view redirects,The usergrid.view.* properties are currently used to redirect on activation or confirmation of organizations or users. These may need to be configured differently for different customers.The usergrid.view.* property names are made by concatenating package template and class names so instead of adding them as hardcoded org config items add a property (usergrid.org.config.property.regex) to specify the regex for additional properties that may be configured by org.Also add check for org overrides for the redirect properties.,null,3,2,1,1,Mike Dunker,Mike Dunker,Mike Dunker,4,0,0,0,0,0,0,0
USERGRID-1243,Story,187,Closed,Replace logging string concatenation with formatting,"Concatenating strings when logging creates temporary strings that can have a negative effect on GC. Instead log4j's string formatting functionality should be used.Example:Replacelogger.info(""Invalid property value. name = "" + name + "" value = "" + value);withlogger.info(""Invalid property value. name = {} value = {}"" name value);Also:1) Standardize on slf4j version 1.7.2 which includes variable argument support.2) Remove extraneous object creation (for when variable argument support didn't exist).3) Change debug statements for element creation/deletion connections etc. to trace.",null,3,1,1,0,Mike Dunker,Mike Dunker,Mike Dunker,0,0,1,0,0,0,0,0
USERGRID-1120,Story,218,Closed,Fix CounterIT.testIncrementAndDecrement() test,null,null,3,3,1,2,George Reyes,David Johnson,David Johnson,3,0,0,0,0,0,0,0
USERGRID-1116,Story,218,Closed,Fix MessagesIT tests,Four of the MessagesIT tests are ignored. Fix these tests and un-ignore them.,null,3,2,1,2,George Reyes,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1118,Story,218,Closed,Fix EventsResource and IT,The EventsResource was broken during two-dot-o development and the tests in EventsResourceIT were marked ignore.Fix the EventsResource and re-enable the tests.,3,3,2,1,0,George Reyes,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-1256,Story,218,Closed,Introduce Datastax Java Driver in effort to migration away from Astyanax,null,1,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,2,0,0,0,0,0,0,0
USERGRID-1093,Story,218,Closed,Load test in-memory queue with current consumer and queue implementation,null,3,3,1,0,0,Michael Russo,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1253,Story,218,Closed,Investigate and Refactor WriteUniqueVerify,Seeing a lot of exceptions like the following which indicate that the current workflow for writing and validating unique values (e.g. name/username/email properties):Caused by: java.lang.RuntimeException: Could not retrieve unique value for field email unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.executeStrategy(WriteUniqueVerify.java:201)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.run(WriteUniqueVerify.java:173)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.run(WriteUniqueVerify.java:150)        at com.netflix.hystrix.HystrixCommand$1.call(HystrixCommand.java:294)        ... 21 moreCaused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: org.apache.usergrid.persistence.collection.mvcc.stage.CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:104)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:81)        at rx.internal.util.ScalarSynchronousObservable$ScalarSynchronousAction.call(ScalarSynchronousObservable.java:115)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)        at rx.schedulers.ExecutorScheduler$ExecutorSchedulerWorker.run(ExecutorScheduler.java:98)We should see how to improve this so we can handle unique values at scale (likely introducing something like akka with consistent hash routing of the write operation).,null,3,2,0,0,David Johnson,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-522,Story,218,Closed,Support for Partial Indexing of types,This task is to create a design document and proposal for the approach which we would use for explicit/partial indexing.  With something like this we need to review the proposal with the community since it is a big change to how we handle indexing.Indexing everything all the time by default has gotten us into trouble and will continue to do so.  We should make index-everything configuratble and introduce a way of defining the fields to be indexed.Perhaps consider using JSON Schema to define the schema for a collection which can also define the fields for indexing.,null,2,1,1,1,George Reyes,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-832,Story,218,Closed,[SPIKE] Investigate and propose 2-3 approaches for indexing specific attributes of documents,Please investigate and propose a few different options for explicit indexing.Things to consider:1) How other databases handle this2) Ability to index all occurrences of a given field name - for example index 'cat' whether it is a root property pets.cat owners.cat etc.,5,2,2,1,1,George Reyes,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-990,Story,218,Closed,REST API Endpoint for defining indexes,null,null,4,1,1,1,null,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1191,Story,218,Closed,Create 2.1 Release for Apache,We need to create a 2.1 release for Apache.  Would be nice to have a binary WAR distribution.,3,3,2,0,0,David Johnson,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1124,Bug,218,Closed,"Internal ""size"" within entity metadata is not displayed when doing a GET by entity name ","This request does not come back with size in metadata object. GET /org/app/collection/entityName{code}{  ""action"" : ""get""  ""application"" : ""ec2df3b3-6e0e-11e5-9798-0223e9015bf9""  ""params"" : { }  ""path"" : ""/regions""  ""uri"" : ""https://testing""  ""entities"" : [ {    ""uuid"" : ""2dcf254c-8ef5-11e5-87c2-069a7df27e87""    ""type"" : ""region""    ""name"" : ""region6""    ""created"" : 1447961939135    ""modified"" : 1447961939135    ""metadata"" : {      ""path"" : ""/regions/2dcf254c-8ef5-11e5-87c2-069a7df27e87""    }  } ]  ""timestamp"" : 1447976782774  ""duration"" : 77  ""organization"" : ""org""  ""applicationName"" : ""app""}{code}However get with the entity's UUID does return the metadata size.GET /org/app/collection/2dcf254c-8ef5-11e5-87c2-069a7df27e87{code}{  ""action"" : ""get""  ""application"" : ""ec2df3b3-6e0e-11e5-9798-0223e9015bf9""  ""params"" : { }  ""path"" : ""/regions""  ""uri"" : ""https://testing""  ""entities"" : [ {    ""uuid"" : ""2dcf254c-8ef5-11e5-87c2-069a7df27e87""    ""type"" : ""region""    ""name"" : ""region6""    ""created"" : 1447961939135    ""modified"" : 1447961939135    ""metadata"" : {      ""path"" : ""/regions/2dcf254c-8ef5-11e5-87c2-069a7df27e87""      ""size"" : 334    }  } ]  ""timestamp"" : 1447977010952  ""duration"" : 36  ""organization"" : ""org""  ""applicationName"" : ""app""}{code}",1,4,1,1,1,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1252,Story,218,Closed,Default entity types do not show up on GET /<application> endpoint when there are 0 entities,Default entity types do not show up on GET /<application> endpoint when there are 0 entities of that type (none in the collection)e.g. usersDue to this the portal may not show the default collections when there are 0 entities in the collection.  This is happening now that graph edges are cleaned up properly but we should discuss showing these since they are default reserved typed entities in Usergrid.,null,3,2,1,0,George Reyes,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-891,Story,218,Closed,Convert Usergrid docs & Update for 2.0: Push Notifications,null,3,4,1,0,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-238,Wish,218,Closed,Remove ARS Maquette font from Portal,portal/css/arsmarquette/*dist/usergrid-portal/css/arsmarquette/*dist-cov/usergrid-portal/css/arsmarquette/*These fonts are Copyright (c) ARS Type┬«-Angus R. Shamal 1999-2010. All rights reserved. Do we have a license to redistribute them?,2,4,3,0,0,David Johnson,Yegor Pomortsev,Yegor Pomortsev,3,0,0,0,0,0,0,0
USERGRID-119,Story,218,Closed,Automate create of Usergrid release bundles,"There are two parts to this:1. The source code release bundleApache releases are source code so this is the ""primary"" release bundle. It should be a Tar and/or Gzipped Tar file that contains all of our source code.2. The binary release bundleThis is intended to be a convenience for people who want to get a copy of the Usergrid that is ready for deployment. It should contain the ROOT.war file the launcher Jar and the Portal Zip file plus a pointer to docs that explain how to deploy and run them.",null,4,2,1,0,David Johnson,David Johnson,David Johnson,1,1,0,0,0,0,0,0
USERGRID-1205,Story,218,Closed,Duplicate Admin Repair,Develop a duplicate admin user repair tool that is testable with a dry-run feature.,null,3,2,1,0,David Johnson,David Johnson,David Johnson,3,0,0,0,0,0,0,0
USERGRID-286,Bug,218,In Progress,Build Application and Collection Delete Async Distributed Workflow,Akka and the Usergrid ActorSystem module is now used in Usergrid from 2.1.1 onwards.  We need to develop an asynch distributed workflow leveraging this ActorSystem for things like data cleanup after app/collection deletion.,3,4,1,0,0,Michael Russo,Rod Simpson,Rod Simpson,0,0,1,1,1,0,0,0
USERGRID-402,Story,218,Open,Remove old dictionary calls with Hector and migrate to the map module,null,1,2,2,1,1,Michael Russo,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-403,Story,218,Open,Migrate counters from Hector to Datastax Java Driver,We need to migrate our counters from Hector to a more reliable counter framework.  Use counter column and leverage Datastax Java Driver for time being assuming Cassandra 2.1 improvements are solid.,3,2,1,1,1,Michael Russo,Todd Nine,Todd Nine,0,0,1,0,0,0,0,0
USERGRID-1250,Story,218,Open,Create additional push notification tests for the node.js integration tests,Need to test the following example endpoints:/users/michael/notifications/users/michael/devices/notifications/users/michael/devices/*/notifications/users;ql=select * where username='michael'/notifications/devices/*/notifications/devices/device1/notifications/devices/af94a111-a927-11e5-8d9c-12c60bce005f/notifications/devices;ql=select * where uuid='a4b7dc0b-b4d3-11e5-80bb-12c60bce005f'/notificationsAlso it's important to test creating groups of users and sending notifications to 1 or more groups. ,null,4,1,1,1,Abhinav Sinha,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1245,Story,218,Closed,Find alternative to com.clearspring.analytics,com.clearspring.analytics.hash.MurmurHash is found in the fasterutil dependency which is 16MB.  We want to pare down the size of the REST WAR file.  Let's see if there is an alternative.Here is the maven dependency:{code}    <dependency>      <groupId>com.clearspring.analytics</groupId>      <artifactId>stream</artifactId>      <version>2.7.0</version>    </dependency>{code}Look for the com.clearspring.analytics package.  Seems to be used in GCM Adapter:{code}   private Batch getBatch( Map<String Object> payload) {       synchronized (this) {           long hash = MurmurHash.hash64(payload);           Batch batch = batches.get(hash);           if (batch == null && payload != null) {               batch = new Batch(notifier payload);               batches.put(hash batch);           }           return batch;       }   }{code}Also the CountMinSketch is used from this dependency:org/apache/usergrid/services/notifications/impl/ApplicationQueueManagerImpl.java:111{code}final CountMinSketch sketch = new CountMinSketch(0.0001.997364181); //add probablistic counter to find dups{code},null,3,1,1,1,Michael Russo,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1120,Story,221,Closed,Fix CounterIT.testIncrementAndDecrement() test,null,null,3,3,1,2,George Reyes,David Johnson,David Johnson,3,0,0,0,0,0,0,0
USERGRID-1116,Story,221,Closed,Fix MessagesIT tests,Four of the MessagesIT tests are ignored. Fix these tests and un-ignore them.,null,3,2,1,2,George Reyes,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1118,Story,221,Closed,Fix EventsResource and IT,The EventsResource was broken during two-dot-o development and the tests in EventsResourceIT were marked ignore.Fix the EventsResource and re-enable the tests.,3,3,2,1,0,George Reyes,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-1256,Story,221,Closed,Introduce Datastax Java Driver in effort to migration away from Astyanax,null,1,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,2,0,0,0,0,0,0,0
USERGRID-1093,Story,221,Closed,Load test in-memory queue with current consumer and queue implementation,null,3,3,1,0,0,Michael Russo,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1253,Story,221,Closed,Investigate and Refactor WriteUniqueVerify,Seeing a lot of exceptions like the following which indicate that the current workflow for writing and validating unique values (e.g. name/username/email properties):Caused by: java.lang.RuntimeException: Could not retrieve unique value for field email unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.executeStrategy(WriteUniqueVerify.java:201)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.run(WriteUniqueVerify.java:173)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.run(WriteUniqueVerify.java:150)        at com.netflix.hystrix.HystrixCommand$1.call(HystrixCommand.java:294)        ... 21 moreCaused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: org.apache.usergrid.persistence.collection.mvcc.stage.CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:104)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:81)        at rx.internal.util.ScalarSynchronousObservable$ScalarSynchronousAction.call(ScalarSynchronousObservable.java:115)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)        at rx.schedulers.ExecutorScheduler$ExecutorSchedulerWorker.run(ExecutorScheduler.java:98)We should see how to improve this so we can handle unique values at scale (likely introducing something like akka with consistent hash routing of the write operation).,null,3,2,0,0,David Johnson,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-522,Story,221,Closed,Support for Partial Indexing of types,This task is to create a design document and proposal for the approach which we would use for explicit/partial indexing.  With something like this we need to review the proposal with the community since it is a big change to how we handle indexing.Indexing everything all the time by default has gotten us into trouble and will continue to do so.  We should make index-everything configuratble and introduce a way of defining the fields to be indexed.Perhaps consider using JSON Schema to define the schema for a collection which can also define the fields for indexing.,null,2,1,1,1,George Reyes,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-832,Story,221,Closed,[SPIKE] Investigate and propose 2-3 approaches for indexing specific attributes of documents,Please investigate and propose a few different options for explicit indexing.Things to consider:1) How other databases handle this2) Ability to index all occurrences of a given field name - for example index 'cat' whether it is a root property pets.cat owners.cat etc.,5,2,2,1,1,George Reyes,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-990,Story,221,Closed,REST API Endpoint for defining indexes,null,null,4,1,1,1,null,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1268,Story,221,Closed,Proof of Concept: use Akka for Unique Value enforcement,By using an distributed Actor System we can ensure that only one thread accesses any one unique value at a time. I have a working proof of concept of this that writes to Cassandra (via Java Native Driver).Initial design is here:https://docs.google.com/document/d/1o9okFgNb_c1RY0eIcZMhijhxE9v7BxHYDiuI8BqkLgU/edit#Proof of Concept (POC) code is here:https://github.com/snoopdave/akka_poc1Presentation that explains the POC is here:https://docs.google.com/presentation/d/11ARSPZ6IAxOYSTo4jcmEdnzXvOgVGNGslznmVtLOZjY/edit?usp=sharing,8,3,1,0,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1191,Story,221,Closed,Create 2.1 Release for Apache,We need to create a 2.1 release for Apache.  Would be nice to have a binary WAR distribution.,3,3,2,0,0,David Johnson,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1124,Bug,221,Closed,"Internal ""size"" within entity metadata is not displayed when doing a GET by entity name ","This request does not come back with size in metadata object. GET /org/app/collection/entityName{code}{  ""action"" : ""get""  ""application"" : ""ec2df3b3-6e0e-11e5-9798-0223e9015bf9""  ""params"" : { }  ""path"" : ""/regions""  ""uri"" : ""https://testing""  ""entities"" : [ {    ""uuid"" : ""2dcf254c-8ef5-11e5-87c2-069a7df27e87""    ""type"" : ""region""    ""name"" : ""region6""    ""created"" : 1447961939135    ""modified"" : 1447961939135    ""metadata"" : {      ""path"" : ""/regions/2dcf254c-8ef5-11e5-87c2-069a7df27e87""    }  } ]  ""timestamp"" : 1447976782774  ""duration"" : 77  ""organization"" : ""org""  ""applicationName"" : ""app""}{code}However get with the entity's UUID does return the metadata size.GET /org/app/collection/2dcf254c-8ef5-11e5-87c2-069a7df27e87{code}{  ""action"" : ""get""  ""application"" : ""ec2df3b3-6e0e-11e5-9798-0223e9015bf9""  ""params"" : { }  ""path"" : ""/regions""  ""uri"" : ""https://testing""  ""entities"" : [ {    ""uuid"" : ""2dcf254c-8ef5-11e5-87c2-069a7df27e87""    ""type"" : ""region""    ""name"" : ""region6""    ""created"" : 1447961939135    ""modified"" : 1447961939135    ""metadata"" : {      ""path"" : ""/regions/2dcf254c-8ef5-11e5-87c2-069a7df27e87""      ""size"" : 334    }  } ]  ""timestamp"" : 1447977010952  ""duration"" : 36  ""organization"" : ""org""  ""applicationName"" : ""app""}{code}",1,4,1,1,1,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1252,Story,221,Closed,Default entity types do not show up on GET /<application> endpoint when there are 0 entities,Default entity types do not show up on GET /<application> endpoint when there are 0 entities of that type (none in the collection)e.g. usersDue to this the portal may not show the default collections when there are 0 entities in the collection.  This is happening now that graph edges are cleaned up properly but we should discuss showing these since they are default reserved typed entities in Usergrid.,null,3,2,1,0,George Reyes,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-446,Story,221,Closed,Removed unused column families,There are a lot of remnant column families from 1.0 that are causing bloat in our system.  We need to audit each 1.0 column family.  If it is no longer used it should be removed.  If it is more complicated to remove these column families (such as queues) we'll need to open tickets for them and address them later.,5,3,2,0,0,George Reyes,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-402,Story,221,Open,Remove old dictionary calls with Hector and migrate to the map module,null,1,2,2,1,1,Michael Russo,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-403,Story,221,Open,Migrate counters from Hector to Datastax Java Driver,We need to migrate our counters from Hector to a more reliable counter framework.  Use counter column and leverage Datastax Java Driver for time being assuming Cassandra 2.1 improvements are solid.,3,2,1,1,1,Michael Russo,Todd Nine,Todd Nine,0,0,1,0,0,0,0,0
USERGRID-1262,Bug,221,In Progress,Always return JSON as application/json,Sometimes Usergrid returns JSON data as text/html so that it may be displayed in a browser. This is a bad practice and should be discontinued.,null,3,1,0,0,null,David Johnson,David Johnson,0,0,0,0,0,0,0,0
USERGRID-1120,Story,224,Closed,Fix CounterIT.testIncrementAndDecrement() test,null,null,3,3,1,2,George Reyes,David Johnson,David Johnson,3,0,0,0,0,0,0,0
USERGRID-1116,Story,224,Closed,Fix MessagesIT tests,Four of the MessagesIT tests are ignored. Fix these tests and un-ignore them.,null,3,2,1,2,George Reyes,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1283,Improvement,224,Closed,Improve ServiceManager.init() start-up logic,"Changes related to management app / startup logic1) Lock Manager setup now happens in the EntityManagerFactory and is invoked as part of the normal /database/setup process.2) CpEntityManagerFactory now checks for the existence of the management app and will retry if it cannot be found unless Usergrid has not yet been bootstrapped. It will log the root cause exception and a track trace. Max retries and interval are configurable.3) CpEntityManagerFactory now keeps a ""cache"" of the latest fetched Management App object. EntityManager cache will update the cached Management App object whenever it is successfully fetched.4) CpEntityManagerFactory's cache of EntityManagers will not cache bad EntityManagers i.e. those that cannot fetch their own applications or the application's name is null.5) EntityManager cache size configurable via a new property ''entity.manager.cache.size""6) Additional logging for when EntityManager EntityManagerFactory QueueManager or QueueManagerFactory is null.",null,3,2,1,1,David Johnson,David Johnson,David Johnson,8,0,1,0,0,0,0,0
USERGRID-1289,Story,224,Closed,Make /org/app/users/me permissions more robust.,null,null,4,3,1,1,David Johnson,Michael Russo,Michael Russo,3,0,0,0,0,0,0,0
USERGRID-1118,Story,224,Closed,Fix EventsResource and IT,The EventsResource was broken during two-dot-o development and the tests in EventsResourceIT were marked ignore.Fix the EventsResource and re-enable the tests.,3,3,2,1,0,George Reyes,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-1256,Story,224,Closed,Introduce Datastax Java Driver in effort to migration away from Astyanax,null,1,3,1,1,0,Michael Russo,Michael Russo,Michael Russo,2,0,0,0,0,0,0,0
USERGRID-1093,Story,224,Closed,Load test in-memory queue with current consumer and queue implementation,null,3,3,1,0,0,Michael Russo,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1253,Story,224,Closed,Investigate and Refactor WriteUniqueVerify,Seeing a lot of exceptions like the following which indicate that the current workflow for writing and validating unique values (e.g. name/username/email properties):Caused by: java.lang.RuntimeException: Could not retrieve unique value for field email unable to verify        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.executeStrategy(WriteUniqueVerify.java:201)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.run(WriteUniqueVerify.java:173)        at org.apache.usergrid.persistence.collection.mvcc.stage.write.WriteUniqueVerify$ConsistentReplayCommand.run(WriteUniqueVerify.java:150)        at com.netflix.hystrix.HystrixCommand$1.call(HystrixCommand.java:294)        ... 21 moreCaused by: rx.exceptions.OnErrorThrowable$OnNextValue: OnError while emitting onNext value: org.apache.usergrid.persistence.collection.mvcc.stage.CollectionIoEvent.class        at rx.exceptions.OnErrorThrowable.addValueAsLastCause(OnErrorThrowable.java:104)        at rx.internal.operators.OperatorDoOnEach$1.onNext(OperatorDoOnEach.java:81)        at rx.internal.util.ScalarSynchronousObservable$ScalarSynchronousAction.call(ScalarSynchronousObservable.java:115)        at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55)        at rx.schedulers.ExecutorScheduler$ExecutorSchedulerWorker.run(ExecutorScheduler.java:98)We should see how to improve this so we can handle unique values at scale (likely introducing something like akka with consistent hash routing of the write operation).,null,3,2,0,0,David Johnson,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-522,Story,224,Closed,Support for Partial Indexing of types,This task is to create a design document and proposal for the approach which we would use for explicit/partial indexing.  With something like this we need to review the proposal with the community since it is a big change to how we handle indexing.Indexing everything all the time by default has gotten us into trouble and will continue to do so.  We should make index-everything configuratble and introduce a way of defining the fields to be indexed.Perhaps consider using JSON Schema to define the schema for a collection which can also define the fields for indexing.,null,2,1,1,1,George Reyes,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-832,Story,224,Closed,[SPIKE] Investigate and propose 2-3 approaches for indexing specific attributes of documents,Please investigate and propose a few different options for explicit indexing.Things to consider:1) How other databases handle this2) Ability to index all occurrences of a given field name - for example index 'cat' whether it is a root property pets.cat owners.cat etc.,5,2,2,1,1,George Reyes,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-990,Story,224,Closed,REST API Endpoint for defining indexes,null,null,4,1,1,1,null,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1268,Story,224,Closed,Proof of Concept: use Akka for Unique Value enforcement,By using an distributed Actor System we can ensure that only one thread accesses any one unique value at a time. I have a working proof of concept of this that writes to Cassandra (via Java Native Driver).Initial design is here:https://docs.google.com/document/d/1o9okFgNb_c1RY0eIcZMhijhxE9v7BxHYDiuI8BqkLgU/edit#Proof of Concept (POC) code is here:https://github.com/snoopdave/akka_poc1Presentation that explains the POC is here:https://docs.google.com/presentation/d/11ARSPZ6IAxOYSTo4jcmEdnzXvOgVGNGslznmVtLOZjY/edit?usp=sharing,8,3,1,0,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1266,Story,224,Closed,401 when 404 is expected on missing entity,"This missing entity should return a 404: https://api-connectors-prod.apigee.net/appservices/api-connectors/sdksandbox/nodejs/2f2ec3d7-d40f-11e5-860f-0a65ea91a1eb {""error"":""service_resource_not_found""""timestamp"":1455559868909""duration"":0""error_description"":""Service resource not found""""exception"":""org.apache.usergrid.services.exceptions.ServiceResourceNotFoundException""}",null,3,2,1,1,Mike Dunker,Jeffrey West,Jeffrey West,5,0,2,0,0,0,0,0
USERGRID-1128,Bug,224,Closed,Entity request by uuid that doesn't exist returns 401 instead of 404,Note: validated fixed in 2.1 unresolved in 1.0. Do we need to mark this as #wontfix?If you call the following without auth:https://api.usergrid.com/brandon.apigee/sandbox/tests/b3037a1a-4cd6-11e5-8aa2-0b8eb3ce43efYou can an entity response.If you call:https://api.usergrid.com/brandon.apigee/sandbox/tests/b3037a1a-4cd6-11e5-8aa2-0b8eb3ce43eeYou get the correct error body but the response status code is 401. Expect it to be 404.,null,3,2,1,2,Mike Dunker,Brandon Shelley,Brandon Shelley,3,0,1,0,0,0,0,0
USERGRID-1296,Story,224,Closed,Selecting nested fields in query select cause not working,null,null,3,2,1,1,David Johnson,Michael Russo,Michael Russo,2,0,0,0,0,0,0,0
USERGRID-1297,Story,224,Closed,PUT /{collection}/{entityName} giving 400 Status with DuplicateUniquePropertyExistsException,null,null,3,1,1,1,Michael Russo,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-1192,Story,224,Closed,Evaluate GC and profile 2.1 for GC settings optimization,We have seen a large number of long GC pauses,null,3,2,1,0,Michael Russo,Jeffrey West,Jeffrey West,3,0,4,0,0,0,0,0
USERGRID-1246,Story,224,In Progress,Remove Unnecessary dependencies,You can see/sort the dependency files in /Users/ApigeeCorporation/code/usergrid/apache/usergrid/stack/rest/target/ROOT and use the dependency tree/graph in IntelliJList:- Hazelcast- Choose netty-all-4.0.23.Final or netty-3.6.6.Final or netty-3.2.7.Final- snappy-java- usergrid-core: org.boss.netty- antlr-2.7.7 vs antlr-3.5.2- jersey-client-2.21 vs jersey-client-1.19- metrics-core-3.0.0 vs metrics-core-2.2.0- cloudfiles-1.9.0.jar vs cloudfiles-uk-1.9.0.jar vs cloudfiles-us-1.9.0.jar- collection-2.1.1-SNAPSHOT-tests- common-2.1.1-SNAPSHOT-tests- commons-collections-3.2.1.jar vs commons-collections4-4.0.jar- uuid-3.2.0.jar vs uuid-3.2.jar,null,3,2,1,1,George Reyes,Jeffrey West,Jeffrey West,3,0,1,0,0,0,0,0
USERGRID-507,Bug,224,Closed,Many Histrix timeouts though Cassndra is not under load,Cassandra is not under heavy load but I am seeing a high number of Hystrix timeouts.  Should we increase connection pool size?  Is there an operational setting that can help this?2015-03-24 18:34:17420 [graphTaskExecutor-3] ERROR org.apache.usergrid.persistence.core.task.NamedTaskExecutorImpl- Unable to execute task.  Exception iscom.netflix.hystrix.exception.HystrixRuntimeException: HystrixCassandra$1 timed-out and no fallback available.        at com.netflix.hystrix.HystrixCommand.getFallbackOrThrowException(HystrixCommand.java:1646)        at com.netflix.hystrix.HystrixCommand.access$1900(HystrixCommand.java:103)        at com.netflix.hystrix.HystrixCommand$TimeoutObservable$1$1.run(HystrixCommand.java:1023)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:37)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:57)        at com.netflix.hystrix.HystrixCommand$TimeoutObservable$1$2.tick(HystrixCommand.java:1047)        at com.netflix.hystrix.HystrixCommand$1.performBlockingGetWithTimeout(HystrixCommand.java:627)        at com.netflix.hystrix.HystrixCommand$1.get(HystrixCommand.java:522)        at com.netflix.hystrix.HystrixCommand.execute(HystrixCommand.java:431)        at org.apache.usergrid.persistence.core.hystrix.HystrixCassandra.user(HystrixCassandra.java:69)        at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:187)        at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.hasNext(MultiRowColumnIterator.java:124)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardsColumnIterator.hasNext(ShardsColumnIterator.java:65)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.NodeShardAllocationImpl.auditShard(NodeShardAllocationImpl.java:208)        at sun.reflect.GeneratedMethodAccessor193.invoke(Unknown Source)        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)        at java.lang.reflect.Method.invoke(Method.java:601)        at com.google.inject.internal.DelegatingInvocationHandler.invoke(DelegatingInvocationHandler.java:37)        at com.sun.proxy.$Proxy92.auditShard(Unknown Source)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupCompactionImpl$ShardAuditTask.call(ShardGroupCompactionImpl.java:368)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupCompactionImpl$ShardAuditTask.call(ShardGroupCompactionImpl.java:319)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: java.util.concurrent.TimeoutException        ... 25 more2015-03-24 18:34:17420 [graphTaskExecutor-3] ERROR org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupCompactionImpl- Unable to execute audit for shard of {}com.netflix.hystrix.exception.HystrixRuntimeException: HystrixCassandra$1 timed-out and no fallback available.        at com.netflix.hystrix.HystrixCommand.getFallbackOrThrowException(HystrixCommand.java:1646)        at com.netflix.hystrix.HystrixCommand.access$1900(HystrixCommand.java:103)        at com.netflix.hystrix.HystrixCommand$TimeoutObservable$1$1.run(HystrixCommand.java:1023)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:37)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:57)        at com.netflix.hystrix.HystrixCommand$TimeoutObservable$1$2.tick(HystrixCommand.java:1047)        at com.netflix.hystrix.HystrixCommand$1.performBlockingGetWithTimeout(HystrixCommand.java:627)        at com.netflix.hystrix.HystrixCommand$1.get(HystrixCommand.java:522)        at com.netflix.hystrix.HystrixCommand.execute(HystrixCommand.java:431)        at org.apache.usergrid.persistence.core.hystrix.HystrixCassandra.user(HystrixCassandra.java:69)        at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:187)        at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.hasNext(MultiRowColumnIterator.java:124)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardsColumnIterator.hasNext(ShardsColumnIterator.java:65)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.NodeShardAllocationImpl.auditShard(NodeShardAllocationImpl.java:208)        at sun.reflect.GeneratedMethodAccessor193.invoke(Unknown Source)        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)        at java.lang.reflect.Method.invoke(Method.java:601)        at com.google.inject.internal.DelegatingInvocationHandler.invoke(DelegatingInvocationHandler.java:37)        at com.sun.proxy.$Proxy92.auditShard(Unknown Source)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupCompactionImpl$ShardAuditTask.call(ShardGroupCompactionImpl.java:368)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupCompactionImpl$ShardAuditTask.call(ShardGroupCompactionImpl.java:319)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: java.util.concurrent.TimeoutException        ... 25 more2015-03-24 18:34:17420 [graphTaskExecutor-3] ERROR org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupCompactionImpl- Unable to perform audit.  Exception iscom.netflix.hystrix.exception.HystrixRuntimeException: HystrixCassandra$1 timed-out and no fallback available.        at com.netflix.hystrix.HystrixCommand.getFallbackOrThrowException(HystrixCommand.java:1646)        at com.netflix.hystrix.HystrixCommand.access$1900(HystrixCommand.java:103)        at com.netflix.hystrix.HystrixCommand$TimeoutObservable$1$1.run(HystrixCommand.java:1023)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:37)        at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:57)        at com.netflix.hystrix.HystrixCommand$TimeoutObservable$1$2.tick(HystrixCommand.java:1047)        at com.netflix.hystrix.HystrixCommand$1.performBlockingGetWithTimeout(HystrixCommand.java:627)        at com.netflix.hystrix.HystrixCommand$1.get(HystrixCommand.java:522)        at com.netflix.hystrix.HystrixCommand.execute(HystrixCommand.java:431)        at org.apache.usergrid.persistence.core.hystrix.HystrixCassandra.user(HystrixCassandra.java:69)        at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.advance(MultiRowColumnIterator.java:187)        at org.apache.usergrid.persistence.core.astyanax.MultiRowColumnIterator.hasNext(MultiRowColumnIterator.java:124)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardsColumnIterator.hasNext(ShardsColumnIterator.java:65)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.NodeShardAllocationImpl.auditShard(NodeShardAllocationImpl.java:208)        at sun.reflect.GeneratedMethodAccessor193.invoke(Unknown Source)        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)        at java.lang.reflect.Method.invoke(Method.java:601)        at com.google.inject.internal.DelegatingInvocationHandler.invoke(DelegatingInvocationHandler.java:37)        at com.sun.proxy.$Proxy92.auditShard(Unknown Source)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupCompactionImpl$ShardAuditTask.call(ShardGroupCompactionImpl.java:368)        at org.apache.usergrid.persistence.graph.serialization.impl.shard.impl.ShardGroupCompactionImpl$ShardAuditTask.call(ShardGroupCompactionImpl.java:319)        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)        at java.util.concurrent.FutureTask.run(FutureTask.java:166)        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)        at java.lang.Thread.run(Thread.java:722)Caused by: java.util.concurrent.TimeoutException        ... 25 more,3,4,2,1,1,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-447,Story,224,Closed,Fix data migration format lifecycle on initial setup,During our initial setup we perform the following phases.# Setup keyspaces and column families# Set up the root applicationAdmins then have to run the migration via PUT /system/migrate/runThis causes an unnecessary migration from V0 to current.  Instead on our initial setup in CPSetup.java we should perform the following.# Create keyspaces and column families# Perform the data migration which will simply set the current max version BEFORE data is written# Write the initial root application state,1,4,2,1,1,Michael Russo,Todd Nine,Todd Nine,2,0,0,0,0,0,0,0
USERGRID-1197,Story,224,Closed,Test and confirm DELETE APP in an integration environment,We need integration test validation for DELETE APP.  We also need to handle really deleting the application data.[~djohnson],null,3,3,1,1,George Reyes,Jeffrey West,Jeffrey West,2,0,0,0,0,0,0,0
USERGRID-1090,Story,224,Closed,DELETE on missing User entity returns 401 not 404,DELETE on /org/app/users/{missing_uuid} returns 401.  It should return 404 when there is a valid token used.,null,3,2,1,1,Mike Dunker,Jeffrey West,Jeffrey West,2,0,1,0,0,0,0,0
USERGRID-1098,Story,224,Closed,Perform quorum reads only after waiting and retrying,If indexing requests make it to another region before C* has replicated the data and a local quorum read fails we retry with a quorum read immediately. It would be better to give some time for C* to replicate the data so we should put the message back in the queue at least once before trying the quorum read.The delete issues we had show how bad large amounts of quorum reads can be on a C* cluster so we should avoid where possible.,null,3,2,1,1,Michael Russo,Mike Dunker,Mike Dunker,1,0,0,0,0,0,0,0
USERGRID-1293,Story,224,Open,Asset files do not appear to be deleted,Need to add a test case to services layer to prove that the asset binary files get deleted when an entity is deleted and fix if proven.  Per request from mailing list appears there is a bug around this as ServiceResults.Type.COLLECTION is almost always used.  There does not appear to be a services layer test cases for assets only REST layer tests which test creation.  Any deletion test in REST would only verify that an entity got deleted but could not check specifically if the asset binary file is gone hence the need for services layer test.I think Usergrid is an amazing project and I use it as my application's backbone. But I always cannot delete binary files and here is my question about deleting asset binary files through rest API.`stack/rest/src/main/java/org/apache/usergrid/rest/applications/ServiceResource.java` has this code snippet:   {code}    ServiceResults sr = executeServiceRequest( ui response ServiceAction.DELETE null );    // if we deleted an entity (and not a connection or collection) then    // we may need to clean up binary asset data associated with that entity    if (    !sr.getResultsType().equals( ServiceResults.Type.CONNECTION )        && !sr.getResultsType().equals( ServiceResults.Type.COLLECTION )) {        // Execute binaryStore.delete(){code}So I learn Usergrid has a way to delete binary files. Here comes my question. The if-else statement does not allow a ServiceResult whose ResultType equals COLLECTION. But take a look `stack/services/src/main/java/org/apache/usergrid/services/AbstractCollectionService.java` (I remember almost services extend this class):  {code}    @Override    public ServiceResults deleteItemById( ServiceContext context UUID id ) throws Exception {        checkPermissionsForEntity( context id );             // skip some contents ...        return new ServiceResults( this context Type.COLLECTION Results.fromEntity( item ) null null );    }{code}Above method always returns a ServiceResults whose ResultType equals Type.COLLECTION. So it always cannot access the code snippet inside of the if-else statement. Is that a bug? Or it's my misunderstanding ? I look forward your help and hope you can explain a little bit more if I'm understanding. Thank you so much.,null,4,2,1,2,null,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1248,Bug,224,Resolved,Please delete old releases from mirroring system,To reduce the load on the ASF mirrors projects are required to delete old releases [1]Please can you remove all non-current releases?i.e. the ones listed as affected.Thanks![1] http://www.apache.org/dev/release.html#when-to-archive,null,3,1,0,1,David Johnson,Sebb,Sebb,6,0,0,0,0,0,0,0
USERGRID-1314,Bug,224,Closed,"Or queries fail when field ""name"" is included","When I fixed the Query Validator module I found that about 5 of the tests fail to return correct results.All of the failing queries use an OR operator with a field named ""name"" for example these queries (from EntityIndexTest in the query index module) work fine:        testQuery( scope searchTypes ""age > 35"" 29 );        testQuery( scope searchTypes ""age <= 35"" 73 );        testQuery( scope searchTypes ""age <= 35 or age > 35"" 102 );But this query returns 0 results because the presence of the ""name"" field seems to turn the OR query into an AND query.        testQuery( scope searchTypes ""name = 'astro*' or age > 35"" 29 );Until this is fixed I have marked the five failing tests in UserQueryIT (in the query-validator module) with the @Ignore annotations.",null,3,2,0,0,Ayesha Amrin Dastagiri,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-1310,Story,224,Closed,No cursor returned when paging incoming connections,"Investigate and fix: no cursor returned when getting incoming connections?---From Andrew Lane on the user mailing list:Let's say I have some collection called someentity that has connections to other entities via a verb subscribedto. For a particular entity with id some_id I'd like to pull all the entities that are connected to this entity via the subscribedto verb. I can do that via this GET request:/org/app/someentity/some_id/subscribedtoHowever I'm not sure how I stream or page through this data if there are thousands or more results. I'm not getting back a cursor or anything. Is having a huge number of connections to a particular entity something that's just not a smart thing to do with Usergrid?From Dave Johnson:---Usergrid is designed to support a huge number of connections and we implemented ""edge sharding"" to ensure that we are not thwarted by Cassandra's 2-billion column limitation. The normal way to page through results is to have a cursor so the fact that you did not get a cursor is a problem and most likely a bug -- can you share the exact API call you are making as a curl (or HTTPie) command?  Do you see any errors in the logs? From Andrew Lane:---I have a collection of events and users can subscribe to those events via a connection called ""subscribedto"".  For a particular event (some_event_id) I'm trying to stream all the users that are subscribed to that event.  In my scenario there are over 1000 subscribers.  I'm issuing something like this (note the ""connecting"" part of the URL which I accidentally ommitted previously):curl -X GET ""http://myserver:8080/myorg/sandbox/events/some_event_id/connecting/subscribedto?limit=5""It's correctly limiting to 5 users but I'm not getting any cursor where I can continue streaming.  If I remove the limit clause I only get the first 1000 results which I expect.  But again no cursor to continue to pull data.From Andrew Lane:---I should be clear that I DO get a cursor when querying the relationship in the opposite direction.  That is if a single user is subscribed to more than 1 event I can stream those successfully and I get a cursor.  It's the inverse direction that's not giving me a cursor.",null,3,3,1,0,Ayesha Amrin Dastagiri,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-1304,Bug,224,Closed,HTTP 500 error when retrieving Entity via connection,"From the Usergrid mailing list:I've noticed that the errors Usergrid returns seem somewhatinconsistent. For example when attempting to GET an entity that doesn'texist directly from the collection (omitting org and app from path forclarity):GET /things/ferrariwill return an error ""entity_not_found"" but attempting to GET the sameentity through a connection where I ""own"" the entity:GET /users/me/owns/things/ferrariwill return an ""uncaught"" error with error_description ""Internal ServerError.""Is this intentional? I was expecting to get an ""entity_not_found"" errorin both cases as I think this would be a pretty common situation tohave in a system where entities are created and deleted dynamically.(If /things/ferrari actually exists and I own it both queries return itas expected so that's cool.)If I've understood the design intent behind Usergrid correctly theseconnections are extremely important because I can map permissions tothem. Therefore it's not always possible to access objects directlyunder the collection as the user may only have permission to accessobjects through a connection (e.g. ""owns""). I like this scheme a lotit's simple intuitive yet powerful.Here are curl commands that reproduce the behavior:curl -X POST ""http://localhost/udwc/brikoleur/token"" -d '{ ""grant_type""ΓÇª: ""password""  ""username"" : ""abogdanov"" ""password"" : ""thepassword"" }'{""access_token"":""YWMtpgdKYDbyEeaD2zHg-adLzwAAAVWSPvYGkxL-sP9RrdRTbAGgQJijcOXcApE""""expires_in"":604800""user"":{""uuid"":""2349d142-317a-11e6-9322-080027cf389a""""type"":""user""""name"":""AlexanderBogdanov""""created"":1465831132919""modified"":1465841524921""username"":""abogdanov""""email"":""psulonen@gmail.com""""activated"":true""picture"":""http://www.gravatar.com/avatar/fd1ebc06694e703c1b0c64215890a865""""metadata"":{""size"":608}""repeatPassword"":""thepassword""}}ΓÇªcurl --header ""Authorization: BearerYWMtpgdKYDbyEeaD2zHg-adLzwAAAVWSPvYGkxL-sP9RrdRTbAGgQJijcOXcApE""""http://localhost/udwc/brikoleur/users/abogdanov/owns/things/ferrari""{""error"":""uncaught""""timestamp"":1466432732273""duration"":0""error_description"":""InternalServerError""""exception"":""org.apache.usergrid.rest.exceptions.UncaughtException""""error_id"":""d87217ed-36f2-11e6-b273-080027cf389a""}",null,3,2,0,1,Ayesha Amrin Dastagiri,David Johnson,David Johnson,1,0,0,0,0,0,0,0
USERGRID-647,Bug,224,Closed,Issue with Unique Values - NPE,Please ensure appropriate null checks and behavior happen here:2015-05-12 17:05:37811 [http-bio-8080-exec-14] ERROR org.apache.usergrid.rest.exceptions.AbstractExceptionMapper- java.lang.NullPointerException Server Error (500)java.lang.NullPointerExceptionat org.apache.usergrid.services.AbstractConnectionsService.getItemByName(AbstractConnectionsService.java:238)at org.apache.usergrid.services.AbstractService.invokeItemWithName(AbstractService.java:671)at org.apache.usergrid.services.AbstractService.invoke(AbstractService.java:628)at org.apache.usergrid.services.AbstractService.invoke(AbstractService.java:544)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:226)at org.apache.usergrid.services.ServiceRequest.invokeMultiple(ServiceRequest.java:262)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:229)at org.apache.usergrid.services.ServiceRequest.execute(ServiceRequest.java:193)at org.apache.usergrid.rest.applications.ServiceResource.executeServiceRequest(ServiceResource.java:251)at org.apache.usergrid.rest.applications.ServiceResource.executeGet(ServiceResource.java:297)at sun.reflect.GeneratedMethodAccessor142.invoke(Unknown Source)at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)at java.lang.reflect.Method.invoke(Method.java:497)at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:540)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:909)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:857)at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:811)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.usergrid.rest.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:92)at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:503)at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:421)at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)at java.lang.Thread.run(Thread.java:745),3,3,2,1,0,null,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1281,Bug,224,Reopened,Download page must link to ASF mirrors for KEYS sigs hashes,The download page currently links to  https://dist.apache.org/repos/dist/ for KEYS sigs and hashes.Such links must use the ASF mirrors eghttps://www.apache.org/dist/usergrid/KEYS,null,3,1,0,0,David Johnson,Sebb,Sebb,6,0,0,0,0,0,0,0
USERGRID-1272,Story,224,In Progress,Set a property to turn off usergrid's dependency on elasticsearch,Have a property that can tell Usergrid whether we want to use elasticsearch or not. If we don't we shouldn't have any errors should just work as is with only graph searches . ,5,3,4,1,0,Michael Russo,George Reyes,George Reyes,3,0,0,0,0,0,0,0
USERGRID-1336,Story,224,In Progress,Implement a query analyzer,"Implement a query analyzer such that the following things can be taken into consideration based on applicatino set limits:size of collection (in count of entities and total bytes)size of index (total bytes)number of query operandsnumber of query sort predicatesIf one exceeds the limit mark it as a violation.The initial approach for this will be log only such that we can alert based on logs if something extremely abnormal is detected.  Also provide the client a new queryparam ""analyzeOnly"" so that for any existing query they can run this and get back the warnings without having the query execute against Elasticsearch.",null,3,2,0,0,Michael Russo,Michael Russo,Michael Russo,4,0,0,0,0,0,0,0
USERGRID-1259,Story,224,Closed,Re-indexing ElasticSearch entity data from Cassandra - Possible Memory Leaks in Usergrid,Full system re-index job (http://localhost:8080/system/index/rebuild) seems to stop / hang after 20-30 hours of indexing. Usergrid seems to exhaust the 4.5 GB of RAM. Please see logs below:1. UserGrid logs (out of java heap space)Feb 04 17:06:32 Usergrid-2 catalina.out:  06:36:31961  WARN OioServerSocketPipelineSink:83 - Failed to accept a connection.Feb 04 17:06:32 Usergrid-2 catalina.out:  java.lang.OutOfMemoryError: Java heap spaceFeb 04 15:05:03 Usergrid-2 catalina.out:  04:34:25166  WARN jvm:203 - [default] [gc][old][29454][2683] duration [54.2s] collections [3]/[54.3s] total [54.2s]/[13.2h] memory [4.4gb]->[4.4gb]/[4.4gb] all_pools {[young] [532.5mb]->[532.5mb]/[532.5mb]}{[survivor] [62.5mb]->[65mb]/[66.5mb]}{[old] [3.8gb]->[3.8gb]/[3.8gb]}Feb 03 20:38:34 Usergrid-2 catalina.out: 10:08:34616 ERROR AmazonAsyncEventService:361 - Failed to index message: 886ea9bd-708d-4bea-ab1c-844ff97c947c 2. ES logs (time out removed non-data node from cluster)Feb 04 16:00:33 Elasticsearch elasticsearch.log:  [2016-02-04 05:31:17243][INFO ][cluster.service          ] [Arlette Truffaut] removed {[default][3GuynlamR6GvdiCAhhTBmw][ip-10-0-0-237][inet[/10.0.0.237:9301]]{client=true data=false}} reason: zen-disco-node_failed([default][3GuynlamR6GvdiCAhhTBmw][ip-10-0-0-237][inet[/10.0.0.237:9301]]{client=true data=false}) reason failed to ping tried [3] times each with maximum [30s] timeoutFeb 04 16:00:33 Elasticsearch elasticsearch.log:  [2016-02-04 05:31:17256][DEBUG][action.admin.cluster.node.stats] [Arlette Truffaut] failed to execute on node [3GuynlamR6GvdiCAhhTBmw]Feb 04 16:00:33 Elasticsearch elasticsearch.log:  org.elasticsearch.transport.NodeDisconnectedException: [default][inet[/10.0.0.237:9301]][cluster:monitor/nodes/stats[n]] disconnectedIs it possible that the re-indexing code in Usergrid could have memory leaks and thus uses up all the java heap memory.Please help.ThanksJaskaran,null,3,2,1,1,Michael Russo,Jaskaran,Jaskaran,3,0,0,0,0,0,0,0
USERGRID-1298,Story,224,Closed,When cursor queryparam is passed in with an empty value 500 response code is thrown,Whenever bad input is received the API should response with 400 Bad Request and a meaningful error response message.,null,3,1,1,1,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1270,Story,224,Closed,Enhance shard compaction to track the 'end' of a shard's valid Edges,During the shard compaction process columns (edges) are moved from a source shard (row) to a target shard to balance the size against the configured shard size in Usergrid.This causes tombstones to be created and can make seeks slower or potentially cause timeout exceptions in Astyanax if the tombstone overwhelming exception from Cassandra is thrown. Implement the ability to 'mark' a shard's last valid edge so that can be fed into the range scan when retrieving the row (shard).,null,3,2,1,1,Michael Russo,Michael Russo,Michael Russo,3,0,0,0,0,0,0,0
USERGRID-1295,Story,224,Closed,Enhance de-index on update/delete logic to find old versions using Cassandra,Currently old versions of entities in Elasticsearch are found by querying elasticsearch.  This can lead to many documents being returned and also put high stress on Elasticsearch.  This information should exist in Cassandra.  We should query and get older versions and then build the docIds for ES directly and send a de-index request ( or batches of de-index requests).,null,3,2,1,1,Michael Russo,Michael Russo,Michael Russo,2,0,0,0,0,0,0,0
USERGRID-1305,Story,224,Closed,Error trying to send push notifications / iterate collections,The graph read filter will attempt to queue up read repair events to de-index deleted entities.  However if it encounters a non-time UUID the deIndex code throws an exception:Caused by: java.lang.UnsupportedOperationException: Not a time-based UUIDat java.util.UUID.timestamp(UUID.java:293)at org.apache.usergrid.corepersistence.index.IndexServiceImpl.deIndexEntity(IndexServiceImpl.java:284)at org.apache.usergrid.corepersistence.asyncevents.EventBuilderImpl.buildEntityDelete(EventBuilderImpl.java:132)at org.apache.usergrid.corepersistence.pipeline.read.traverse.AbstractReadGraphFilter.lambda$null$1(AbstractReadGraphFilter.java:159),null,3,1,1,1,Michael Russo,Michael Russo,Michael Russo,1,0,0,0,0,0,0,0
USERGRID-1193,Story,226,Closed,Evaluate code to reduce GC pressure,Review the code paths and look at areas where we can improve the code (low hanging fruit obvious things) which reduce the GC pressure.,null,3,2,1,1,Michael Russo,Jeffrey West,Jeffrey West,1,0,0,0,0,0,0,0
USERGRID-1183,Story,226,Open,Support APNS VoIP Push Notifications,If using older APNS binary provider multiple certificates would need to be managed as VoIP certificates are provisioned separately by Apple.  If using newer HTTP/2 implementation  Apple allows a single cert (provisioned with one or more topics) to work for regular voip watch notifications for example.  Using HTTP/2 implementation is preferred.,2,3,1,1,1,Michael Russo,Michael Russo,Michael Russo,2,0,3,0,0,0,0,0
USERGRID-1251,Story,226,Open,Handle index processing event case where an edge exists but entity is missing.,In the event an edge exists in graph and the entity has been deleted ensure this is handled as OK when processing the index event in AmazonAsyncEventService.  Currently it logs an exception because when it tries to fetch the entity data it doesn't exist and therefore 0 messages are returned for an event that should have returned 1 message. Ideally this should trigger a graph node compaction (read repair) to remove that edge. ,null,3,1,1,2,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1267,Story,226,Closed,Simplify Central SSO: eliminate ext token validation end-point,"Instead of requiring that clients first validate tokens obtained from an external ""Central SSO"" system when Usergrid is configured for using Central SSO it should attempt to verify any unknown token itself.This can be implemented by moving the validate external token logic from the ManagementResource and into the TokenService.",3,3,2,1,0,David Johnson,David Johnson,David Johnson,2,0,0,0,0,0,0,0
USERGRID-1240,Story,226,Open,Test and integrate Pushy SOCKS changes,Test changes in https://github.com/relayrides/pushy/pull/215 and confirm it works for using APNS via a SOCKS proxy.  This is important for users of Usergrid which are behind corporate firewalls.For reference: https://github.com/relayrides/pushy/issues/99#issuecomment-175152811,null,3,1,1,0,Michael Russo,Jeffrey West,Jeffrey West,0,0,0,0,0,0,0,0
USERGRID-1244,Story,226,Open,Upgrade pushy library to use latest version (HTTP/2 APNS implementation) ,Additional system requirements will need to be met (https://github.com/relayrides/pushy#system-requirements):1) require openssl to be installed on servers running Usergrid and have specific compiled versions of usergrid for the supported platforms for running Usergrid (os version etc.).  http://netty.io/wiki/forked-tomcat-native.html2) require an additional jar file added to the boot classpath of the jvm (alpn-boot) which is specific to the JDK version being usedIt may make sense to see about having the ability to disable push so that no push notification services are bootstrapped in the event someone wants to use Usergrid but does not require push and does not want to manage these additional system requirements.Option 1 preferred at the moment as having OpenSSL installed is an easy requirement and and the platform configurations for http://netty.io/wiki/forked-tomcat-native.html seem limited.,2,3,1,0,0,Michael Russo,Michael Russo,Michael Russo,1,0,1,0,0,0,0,0
USERGRID-1250,Story,226,Open,Create additional push notification tests for the node.js integration tests,Need to test the following example endpoints:/users/michael/notifications/users/michael/devices/notifications/users/michael/devices/*/notifications/users;ql=select * where username='michael'/notifications/devices/*/notifications/devices/device1/notifications/devices/af94a111-a927-11e5-8d9c-12c60bce005f/notifications/devices;ql=select * where uuid='a4b7dc0b-b4d3-11e5-80bb-12c60bce005f'/notificationsAlso it's important to test creating groups of users and sending notifications to 1 or more groups. ,null,4,1,1,1,Abhinav Sinha,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1260,Story,226,Open,Asset and Accept Header changes,Fixes:1. GET entity with text/html was returning an error. Now entity retrieval returns 406 Not Acceptable if text/html is only acceptable type (must allow application/json even if text/html is preferred).2. PUT was leaving all files in the payload of the entity -- only text/plain files should be embedded in the entity payload.3. PUT/POST file was being allowed even on non entities. Now only PUT /collection/entity POST /collection/entity and POST /collection (auto-creates entity) are allowed. Others return 400 Bad Request.4. GET of asset file streams is now locked down to GET /collection/entity. Other URL patterns return 404 Not Found.5. For GET of asset file streams if either the entity itself or the asset for an entity is not found it now returns 404.6. Accept header was not being validated for GET of asset file streams. Now an accept header that is compatible with the file type is required (otherwise returns 406 Not Acceptable).7. Other errors in GET asset streams function were cleaned up (404 when asset not found 500 when something goes wrong with retrieval).8. Added tests and fixed other tests (since text/html entity requests are now locked down).,null,3,1,0,0,Mike Dunker,Mike Dunker,Mike Dunker,0,0,0,0,0,0,0,0
USERGRID-1207,Story,226,Open,Notification statistics are not accurate,In org.apache.usergrid.services.notifications.TaskManager the task updates an entity but in a multi-threaded environment this can lead to inconsitiencies due to the way it's implemented with getting an entity incrementing the stats at this point in time and then writing it back. If 2 threads do this at nearly the same time they both could be incrementing from the same base entity data and each overwrite with a single increment rather than the value being incremented on the latest update to date changes. Need to make this thread safe or see about using counters for these type of statistics.,null,3,1,0,0,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-1208,Story,226,Open,Complete Push Notifications TestAdapter functionality.,"Add all of the necessary functionality to the TestAdapter instead of having its interface implementations be empty methods. With this introduce a new NotificationServiceIT for the test adapter and do any mock testing here.  Remove the option for USE_REAL_CONNECTIONS in apns and gcm tests as they should always use real connections and TestAdapter mock a ""no provider"" scenario.",null,4,1,0,0,Michael Russo,Michael Russo,Michael Russo,0,0,0,0,0,0,0,0
USERGRID-423,Story,226,Closed,Added rest tests for system/* endpoints,Currently there are no rest tests that check that the system/database/setup completed correctly. We use test utils that automatically call the service endpoints. We should implement a way to disable/move it so that we can check that the system is being properly initialized using rest tier calls.,5,4,3,1,2,null,George Reyes,George Reyes,2,0,0,0,0,0,0,0
